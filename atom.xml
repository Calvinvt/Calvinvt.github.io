<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ShengFu&#39;s blog</title>
  
  <subtitle>å‰ç«¯ï¼ŒJavascriptï¼Œhtmlï¼Œcss,html5,Vue,React,Angular</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-05-15T14:57:00.716Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>ShengFu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä½¿ç”¨ Verdaccio æ­å»ºç§æœ‰ npm æœåŠ¡</title>
    <link href="http://yoursite.com/2019/05/15/verdaccio/"/>
    <id>http://yoursite.com/2019/05/15/verdaccio/</id>
    <published>2019-05-15T14:13:09.000Z</published>
    <updated>2019-05-15T14:57:00.716Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ</h2><p>å‡å¦‚æˆ‘ä»¬ç”±äºå¹³æ—¶çš„æŠ€æœ¯ç§¯ç´¯ï¼Œå†™äº†ä¸€äº›å¯ä»¥å¤ç”¨çš„å·¥å…·ï¼Œæˆ‘ä»¬æƒ³åˆ†äº«ç»™å…¬å¸å…¶å®ƒåŒäº‹ä½¿ç”¨ï¼›æˆ–è€…æˆ‘ä»¬å…¬å¸å¯èƒ½ä¼šæœ‰ä¸€ä¸ªå…¬å…±ç»„ä»¶ä»“åº“ï¼Œæˆ‘ä»¬æƒ³ç”¨npmçš„æ–¹å¼å®‰è£…è€Œä¸æ˜¯å»ç®€å•çš„æ‹·è´æ–‡ä»¶ï¼›ç„¶è€Œï¼Œè¿™äº›å·¥å…·æˆ–è€…ç»„ä»¶éƒ½æ¶‰åŠå…¬å¸å†…éƒ¨çš„æœºå¯†ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥æ­å»ºä¸€ä¸ªnpmç§æœï¼Œåªåœ¨å…¬å¸å±€åŸŸç½‘è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬å†™å¥½çš„å·¥å…·å‘å¸ƒåˆ°ä¸Šé¢ï¼Œæ–¹ä¾¿å…¶å®ƒåŒäº‹å®‰è£…ä½¿ç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒé¡ºç•…çš„å·¥ä½œæµã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦é€‰verdaccio"><a href="#ä¸ºä»€ä¹ˆè¦é€‰verdaccio" class="headerlink" title="ä¸ºä»€ä¹ˆè¦é€‰verdaccio?"></a>ä¸ºä»€ä¹ˆè¦é€‰verdaccio?</h2><p>ç›®å‰ï¼Œå¸‚é¢ä¸Šç”¨æ¥æ­å»ºnpmç§æœçš„å·¥å…·æœ‰å¤§ä½“ä¸‰ç§ï¼š</p><ol><li>nexus</li><li>cnpm</li><li>verdaccio</li></ol><p>nexusåŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯éƒ¨ç½²å’Œé…ç½®è¾ƒç¹çï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„ä½¿ç”¨è¦æ±‚ã€‚cnpmè™½ç„¶æ¯”nexusé…ç½®ç®€å•ï¼Œä½†æ˜¯ä¹Ÿéœ€è¦ä½¿ç”¨åˆ°mysqlã€‚æœ‰æ²¡æœ‰æ›´å¥½ç”¨çš„å·¥å…·å‘¢ï¼Ÿé‚£å°±æ˜¯verdaccioã€‚verdaccioä½¿ç”¨æ–‡ä»¶å­˜å‚¨åŒ…æ•°æ®ï¼Œæ— éœ€å®‰è£…æ•°æ®åº“å¹¶ä¸”éƒ¨ç½²ç®€å•ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥éƒ¨ç½²å®Œæˆï¼Œè¿™ä¸ªæ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚</p><h2 id="verdaccioéƒ¨ç½²"><a href="#verdaccioéƒ¨ç½²" class="headerlink" title="verdaccioéƒ¨ç½²"></a>verdaccioéƒ¨ç½²</h2><p>é¦–å…ˆï¼Œå‡è®¾æˆ‘ä»¬å·²ç»åœ¨æœåŠ¡å™¨ç«¯å®‰è£…äº†nodejså’Œnpmã€‚ä¸‹é¢æˆ‘ä»¬æ¥è®²è®²verdaccioçš„éƒ¨ç½²ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">npm install -g verdaccio</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆå§‹åŒ–</span></span><br><span class="line">verdaccio --init ~/verdaccio.config.js</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿è¡Œverdaccio</span></span><br><span class="line">verdaccio</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢æˆ‘ä»¬ç”¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:4873ï¼Œå¦‚æœæˆ‘ä»¬çœ‹åˆ°è¿™æ ·çš„ç•Œé¢ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»éƒ¨ç½²æˆåŠŸã€‚" target="_blank" rel="noopener">http://localhost:4873ï¼Œå¦‚æœæˆ‘ä»¬çœ‹åˆ°è¿™æ ·çš„ç•Œé¢ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»éƒ¨ç½²æˆåŠŸã€‚</a><br><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557931029943-6dd03fc1-aeb2-4d83-b0ad-d502428bfb79.png" alt=""></p><h2 id="ä½¿ç”¨pm2å¯åŠ¨"><a href="#ä½¿ç”¨pm2å¯åŠ¨" class="headerlink" title="ä½¿ç”¨pm2å¯åŠ¨"></a>ä½¿ç”¨pm2å¯åŠ¨</h2><p>pm2 æ˜¯ä¸€æ¬¾è‘—åçš„nodejsè¿›ç¨‹å®ˆæŠ¤å’Œç®¡ç†å·¥å…·ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨pm2æ¥å¯åŠ¨verdaccio:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨pm2å¯åŠ¨</span></span><br><span class="line">pm2 start verdaccio</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨æˆåŠŸåä¼šè¾“å‡ºä»¥ä¸‹å†…å®¹<br><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557931365700-4fcfaef9-8d1a-4f88-be1d-f6ae444a9fb6.png" alt=""></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>ä¸ºäº†æ–¹ä¾¿åˆ‡æ¢npmä»“åº“åœ°å€ï¼Œæˆ‘ä»¬ä½¿ç”¨nrmã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥å®‰è£…nrmã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨nrmç®¡ç†npmä»“åº“åŸåœ°å€ï¼Œæˆ‘ä»¬ä½¿ç”¨verdaccioåœ°å€ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nrm add <span class="built_in">local</span> http://localhost:4873</span><br><span class="line">nrm use <span class="built_in">local</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æˆåŠŸå°†npmçš„ä»“åº“åœ°å€æ¢æˆäº†æˆ‘ä»¬æœ€æ–°æ­å»ºçš„ç§æœåœ°å€ã€‚ğŸº</p><h2 id="å‘å¸ƒåŒ…"><a href="#å‘å¸ƒåŒ…" class="headerlink" title="å‘å¸ƒåŒ…"></a>å‘å¸ƒåŒ…</h2><p>åœ¨å‘å¸ƒåŒ…ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ–°å»ºç”¨æˆ·ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm adduser</span><br></pre></td></tr></table></figure></p><p>åœ¨è¾“å…¥ç”¨æˆ·åã€å¯†ç å’Œé‚®ç®±åï¼Œæˆ‘ä»¬æˆåŠŸåœ¨æˆ‘ä»¬æœ¬åœ°çš„npmç§æœåˆ›å»ºäº†ç”¨æˆ·ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å‘å¸ƒä¸€ä¸ªnpmåŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish npm_pkg</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨æˆ‘ä»¬å‘å¸ƒå®Œæˆåï¼ŒåŒ…çš„å†…å®¹ä¼šæ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆæ¥verdaccioçš„åŸºæœ¬ä½¿ç”¨æ“ä½œã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆè¦æ­å»ºnpmç§æœï¼Ÿ&lt;/h2&gt;&lt;p&gt;å‡å¦‚æˆ‘ä»¬ç”±äºå¹³æ—¶çš„æŠ€æœ¯ç§¯ç´¯ï¼Œå†™äº†ä¸€äº›å¯ä»¥å¤ç”¨çš„å·¥å…·ï¼Œæˆ‘ä»¬æƒ³åˆ†
      
    
    </summary>
    
      <category term="node.js" scheme="http://yoursite.com/categories/node-js/"/>
    
    
      <category term="Nodejs" scheme="http://yoursite.com/tags/Nodejs/"/>
    
      <category term="npm" scheme="http://yoursite.com/tags/npm/"/>
    
      <category term="åŒ…ç®¡ç†å·¥å…·" scheme="http://yoursite.com/tags/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>Flexå¸ƒå±€</title>
    <link href="http://yoursite.com/2019/05/15/flex/"/>
    <id>http://yoursite.com/2019/05/15/flex/</id>
    <published>2019-05-15T14:06:44.000Z</published>
    <updated>2019-05-15T14:10:17.122Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557043900778-3b2a263e-8954-46b3-90ab-4f397829164a.png#align=left&amp;display=inline&amp;height=368&amp;name=&amp;originHeight=368&amp;originWidth=700&amp;size=0&amp;status=done&amp;width=700" alt=""><br><a id="more"></a><br><a name="NeX6P"></a></p><h2 id="ç½‘é¡µå¸ƒå±€çš„å‡ ç§å½¢å¼"><a href="#ç½‘é¡µå¸ƒå±€çš„å‡ ç§å½¢å¼" class="headerlink" title="ç½‘é¡µå¸ƒå±€çš„å‡ ç§å½¢å¼"></a>ç½‘é¡µå¸ƒå±€çš„å‡ ç§å½¢å¼</h2><p><img src="https://cdn.nlark.com/yuque/0/2019/gif/149846/1557043924903-f495d09b-5899-471b-97be-8c4ecdc5ee96.gif#align=left&amp;display=inline&amp;height=352&amp;originHeight=352&amp;originWidth=403&amp;size=0&amp;status=done&amp;width=403" alt=""></p><p><a name="P5op4"></a></p><h2 id="Flexå¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Flexå¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Flexå¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Flexå¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Flexæ˜¯Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚<br>ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex; <span class="comment">/* Safari */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œè®¾ä¸ºFlexå¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚ </p></blockquote><p><br><br><a name="MtOuB"></a></p><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><p>é‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºFlexå®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸ºFlexé¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557044027503-3f6860b4-e0bc-4fd4-8c79-fd518f4af2cb.png#align=left&amp;display=inline&amp;height=333&amp;originHeight=333&amp;originWidth=563&amp;size=0&amp;status=done&amp;width=563" alt=""></p><blockquote><p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åšmain startï¼Œç»“æŸä½ç½®å«åšmain endï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åšcross startï¼Œç»“æŸä½ç½®å«åšcross endã€‚<br>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åšmain sizeï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åšcross sizeã€‚<br><a name="X9zBa"></a></p></blockquote><h2 id="å®¹å™¨çš„å±æ€§"><a href="#å®¹å™¨çš„å±æ€§" class="headerlink" title="å®¹å™¨çš„å±æ€§"></a>å®¹å™¨çš„å±æ€§</h2><p>æ€»å…±æœ‰ä»¥ä¸‹6ä¸ªå±æ€§å¯ä»¥è®¾ç½®åˆ°å®¹å™¨ä¸Šé¢ï¼š</p><ul><li>flex-direction</li><li>flex-wrap</li><li>flex-flow</li><li>justify-content</li><li>align-items</li><li>align-content</li></ul><p><a name="a2q9t"></a></p><h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h3><p>flex-directionå±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557044282298-14888d63-8acf-4087-9333-38af954e196e.png#align=left&amp;display=inline&amp;height=203&amp;originHeight=203&amp;originWidth=796&amp;size=0&amp;status=done&amp;width=796" alt=""></p><ul><li>row(é»˜è®¤ï¼‰ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯</li><li>row-reverseï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯</li><li>columnï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šç«¯</li><li>column-reverseï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸‹ç«¯<br><a name="lQiiS"></a><h3 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h3>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®éƒ½æ’åœ¨ä¸€æ¡çº¿ï¼ˆåˆç§°â€è½´çº¿â€ï¼‰ä¸Šã€‚flex-wrapå±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557233753425-6e74825b-ca5c-4f19-866e-ef37ef3f25cf.png#align=left&amp;display=inline&amp;height=276&amp;originHeight=276&amp;originWidth=798&amp;size=0&amp;status=done&amp;width=798" alt=""></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="J81i8"></a></p><h4 id="nowrap-é»˜è®¤-ä¸æ¢è¡Œ"><a href="#nowrap-é»˜è®¤-ä¸æ¢è¡Œ" class="headerlink" title="nowrap(é»˜è®¤):ä¸æ¢è¡Œ"></a>nowrap(é»˜è®¤):ä¸æ¢è¡Œ</h4><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557233848091-df395156-ced1-421a-8dfa-5ffe95dae6a2.png#align=left&amp;display=inline&amp;height=145&amp;originHeight=145&amp;originWidth=700&amp;size=0&amp;status=done&amp;width=700" alt=""><br><a name="GjMER"></a></p><h4 id="wrapï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹"><a href="#wrapï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹" class="headerlink" title="wrapï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹"></a>wrapï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹</h4><p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/149846/1557233878922-de4d42c3-258d-41ec-9509-b20835517050.jpeg#align=left&amp;display=inline&amp;height=177&amp;originHeight=177&amp;originWidth=700&amp;size=0&amp;status=done&amp;width=700" alt=""><br><a name="nVXde"></a></p><h4 id="wrap-reverse-æ¢è¡Œï¼Œèµ·ç‚¹åœ¨ä¸‹æ–¹"><a href="#wrap-reverse-æ¢è¡Œï¼Œèµ·ç‚¹åœ¨ä¸‹æ–¹" class="headerlink" title="wrap-reverse:æ¢è¡Œï¼Œèµ·ç‚¹åœ¨ä¸‹æ–¹"></a>wrap-reverse:æ¢è¡Œï¼Œèµ·ç‚¹åœ¨ä¸‹æ–¹</h4><p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/149846/1557233912083-d25dce3d-87f3-45b9-840e-f2bfdf95e66d.jpeg#align=left&amp;display=inline&amp;height=177&amp;originHeight=177&amp;originWidth=700&amp;size=0&amp;status=done&amp;width=700" alt=""></p><p><a name="0dosE"></a></p><h3 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h3><p>flex-flowå±æ€§æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrapã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-flow</span>: &lt;flex-direction&gt; &lt;flex-wrap&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="Ljeml"></a></p><h3 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h3><p>justify-contentå±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557234002760-78b6671c-114c-4c67-ba4e-f6a2b956fb74.png#align=left&amp;display=inline&amp;height=763&amp;originHeight=763&amp;originWidth=637&amp;size=0&amp;status=done&amp;width=637" alt=""><br><a name="FksvN"></a></p><h3 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h3><p>align-itemså±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557234033894-10c234d9-598b-4d30-8667-a4fbee9591ad.png#align=left&amp;display=inline&amp;height=786&amp;originHeight=786&amp;originWidth=617&amp;size=0&amp;status=done&amp;width=617" alt=""></p><p><a name="Y5drG"></a></p><h3 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-content</span>: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557234078863-280e5542-a066-495f-9117-a02194f30943.png#align=left&amp;display=inline&amp;height=786&amp;originHeight=786&amp;originWidth=620&amp;size=0&amp;status=done&amp;width=620" alt=""></p><p><a name="qXvfv"></a></p><h2 id="é¡¹ç›®å±æ€§"><a href="#é¡¹ç›®å±æ€§" class="headerlink" title="é¡¹ç›®å±æ€§"></a>é¡¹ç›®å±æ€§</h2><ul><li>order</li><li>flex-grow</li><li>flex-shrink</li><li>flex-basis</li><li>flex</li><li>align-self</li></ul><p><a name="fZapQ"></a></p><h3 id="order"><a href="#order" class="headerlink" title="order"></a>order</h3><p>orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557234181234-96d0c576-072e-49bd-bee9-258009e6fb3f.png#align=left&amp;display=inline&amp;height=480&amp;originHeight=480&amp;originWidth=751&amp;size=0&amp;status=done&amp;width=751" alt=""><br><a name="0SKRx"></a></p><h3 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h3><p>flex-growå±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557234215075-686f89e8-ac26-4a63-b3e1-414d3b9326f8.png#align=left&amp;display=inline&amp;height=211&amp;originHeight=211&amp;originWidth=802&amp;size=0&amp;status=done&amp;width=802" alt=""></p><p><a name="v78Yc"></a></p><h3 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h3><p>flex-shrinkå±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/149846/1557234231293-4f7fdd4d-f1c0-406b-b30a-a6da6035e443.jpeg#align=left&amp;display=inline&amp;height=145&amp;originHeight=145&amp;originWidth=700&amp;size=0&amp;status=done&amp;width=700" alt=""></p><p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚<br>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p><p><a name="uvPY4"></a></p><h3 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h3><p>flex-basiså±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p><p>å®ƒå¯ä»¥è®¾ä¸ºè·Ÿwidthæˆ–heightå±æ€§ä¸€æ ·çš„å€¼ï¼ˆæ¯”å¦‚350pxï¼‰ï¼Œåˆ™é¡¹ç›®å°†å æ®å›ºå®šç©ºé—´ã€‚</p><p><a name="M0gWq"></a></p><h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><p>flexå±æ€§æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: none | [ &lt;<span class="string">'flex-grow'</span>&gt; &lt;<span class="string">'flex-shrink'</span>&gt;? || &lt;<span class="string">'flex-basis'</span>&gt; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br>è¯¥å±æ€§æœ‰ä¸¤ä¸ªå¿«æ·å€¼ï¼šauto (1 1 auto) å’Œ none (0 0 auto)ã€‚<br>å»ºè®®ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯å•ç‹¬å†™ä¸‰ä¸ªåˆ†ç¦»çš„å±æ€§ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæ¨ç®—ç›¸å…³å€¼</p><p><a name="ygfYK"></a></p><h3 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h3><p>align-selfå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±æ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºstretchã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1557234270481-ed101ca1-cedc-41ae-863c-ce7b616212a9.png#align=left&amp;display=inline&amp;height=390&amp;originHeight=390&amp;originWidth=743&amp;status=done&amp;width=743" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.nlark.com/yuque/0/2019/png/149846/1557043900778-3b2a263e-8954-46b3-90ab-4f397829164a.png#align=left&amp;amp;display=inline&amp;amp;height=368&amp;amp;name=&amp;amp;originHeight=368&amp;amp;originWidth=700&amp;amp;size=0&amp;amp;status=done&amp;amp;width=700&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="css" scheme="http://yoursite.com/categories/css/"/>
    
    
      <category term="Flex" scheme="http://yoursite.com/tags/Flex/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºMochaçš„å•å…ƒæµ‹è¯•å®è·µ</title>
    <link href="http://yoursite.com/2019/04/08/%E5%9F%BA%E4%BA%8EMocha%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%AE%9E%E8%B7%B5/"/>
    <id>http://yoursite.com/2019/04/08/åŸºäºMochaçš„å•å…ƒæµ‹è¯•å®è·µ/</id>
    <published>2019-04-08T13:05:12.000Z</published>
    <updated>2019-04-08T13:57:50.434Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.pexels.com/photos/374147/pexels-photo-374147.jpeg?cs=srgb&amp;dl=beverage-caffeine-cappuccino-374147.jpg&amp;fm=jpg" alt="Mocha"><br><a id="more"></a></p><h2 id="å‰åº"><a href="#å‰åº" class="headerlink" title="å‰åº"></a>å‰åº</h2><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸ä¼šé‡åˆ°é¡¹ç›®ä¸Šçº¿è¿«åœ¨çœ‰ç«ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„æµ‹è¯•æ—¶é—´æˆ–è€…åœ¨åˆ›ä¸šå…¬å¸åšæ•æ·å¼€å‘ï¼Œå®Œå…¨æ²¡æœ‰æµ‹è¯•äººå‘˜çš„æƒ…å†µï¼Œä½†æˆ‘ä»¬åˆå¿…é¡»ä¿è¯ä»£ç è´¨é‡ï¼Œå°½é‡å‡å°‘ä¸Šçº¿é£é™©ï¼Œè¿™æ—¶æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆæ˜¯æˆ‘ä»¬é‡‡ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œç®€ç§°TDDçš„å¼€å‘æ¨¡å¼ã€‚é¡¾åæ€ä¹‰ï¼ŒTDDå°±æ˜¯ â€œTest Drive Developâ€ï¼Œåœ¨æ­£å¼å¼€å‘äº§å“åŠŸèƒ½å‰å…ˆå†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œç”¨è¿™äº›æµ‹è¯•ç”¨ä¾‹å»ä¿è¯æˆ‘ä»¬ä»£ç çš„è´¨é‡ï¼Œè¿™æ ·å°±ç®—äº§å“ä¸ç»è¿‡æ­£å¼æµ‹è¯•ï¼Œæˆ‘ä»¬ä¹Ÿå¯¹ä»£ç ä¸­çš„å…³é”®éƒ¨åˆ†å¯ä»¥åšåˆ°çŸ¥æ ¹çŸ¥åº•ï¼Œå°†é£é™©æ§åˆ¶åˆ°ä¸€å®šèŒƒå›´å†…ã€‚é‚£ä¹ˆåœ¨Javascriptä¸­æœ‰ä¸€æ¬¾ç‰¹åˆ«æœ‰åçš„æµ‹è¯•æ¡†æ¶ï¼šMochaï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥é€šè¿‡ä¸€ä¸ªä¾‹å­ç®€å•ä»‹ç»ä¸‹Mochaçš„ä½¿ç”¨æ–¹æ³•ã€‚</p><h2 id="Mochaå®‰è£…"><a href="#Mochaå®‰è£…" class="headerlink" title="Mochaå®‰è£…"></a>Mochaå®‰è£…</h2><p>Mochaå¯ä»¥å…¨å±€å®‰è£…ä¹Ÿå¯ä»¥å±€éƒ¨å®‰è£…ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…¨å±€å®‰è£…</span></span><br><span class="line">npm install -g mocha</span><br><span class="line"><span class="comment">#å±€éƒ¨å®‰è£…</span></span><br><span class="line">npm install mocha --save-dev</span><br></pre></td></tr></table></figure></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ã€‚æˆ‘ä»¬æ–°å»ºç”¨äºæµ‹è¯•çš„jsæ–‡ä»¶ï¼Œå¹¶æ·»åŠ æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„å‡½æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">a,b </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = add;</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢æˆ‘ä»¬å…ˆå®‰è£…ä¸‹æ–­è¨€åº“ï¼Œæˆ‘ä»¬ä½¿ç”¨chai:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…chai</span></span><br><span class="line">npm install chai --save-dev</span><br></pre></td></tr></table></figure></p><p>ä¹‹åï¼Œæˆ‘ä»¬ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> should = <span class="built_in">require</span>(<span class="string">"chai"</span>).should();</span><br><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a,b</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line">describe(<span class="string">"function test"</span>,()=&gt;&#123;</span><br><span class="line">    it(<span class="string">"test add function"</span>,()=&gt;&#123;</span><br><span class="line">        add(<span class="number">1</span>,<span class="number">2</span>).should.to.equal(<span class="number">3</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>å‡è®¾æˆ‘ä»¬å±€éƒ¨å®‰è£…mocha,æˆ‘ä»¬è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx mocha test1.js</span><br></pre></td></tr></table></figure></p><p>ä¹‹åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><p>function test<br>    âœ“ test add function</p><p>  1 passing (22ms)</p><p>å‡å¦‚æˆ‘ä»¬å°†ä¸Šé¢çš„æ–­è¨€æ”¹æˆï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">1</span>,<span class="number">2</span>).should.to.equal(<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å°†å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š<br> function test<br>    1) test add function</p><p>  0 passing (22ms)<br>  1 failing<br>ç¬¬ä¸€ä¸ªè¯´æ˜æµ‹è¯•æˆåŠŸï¼Œç¬¬äºŒä¸ªç»“æœè¯´æ˜æµ‹è¯•å¤±è´¥ï¼Œè¿™æ ·ä¹Ÿå°±éªŒè¯äº†æˆ‘ä»¬å†™çš„å‡½æ•°æ˜¯å¦å¾—åˆ°äº†æ­£ç¡®çš„è¾“å‡ºã€‚ä½†æ˜¯è¿™æ ·è¿˜ä¸å¤Ÿï¼Œå› ä¸ºæˆ‘ä»¬è™½ç„¶éªŒè¯äº†å‡½æ•°çš„æ­£ç¡®æ€§ï¼Œä½†æ˜¯å´ä¸çŸ¥é“æˆ‘ä»¬ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹è¦†ç›–äº†å¤šå°‘åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å¾—åˆ°è¦†ç›–ç‡æ¥ä¿è¯æˆ‘ä»¬æ‰€æœ‰çš„ä»£ç éƒ½æ­£å¸¸è¿è¡Œã€‚æˆ‘ä»¬éœ€è¦å¦å¤–å®‰è£…ä¸€ä¸ªæµ‹è¯•è¦†ç›–ç‡æ£€æµ‹å·¥å…·ï¼šnyc<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install nyc --save-dev</span><br></pre></td></tr></table></figure></p><p>ç„¶åæˆ‘ä»¬è¿è¡Œï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx nyc mocha test1.js</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p><p>â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”â€”â€”â€”-|<br>File      |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |<br>â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”â€”â€”â€”-|<br>All files |      100 |      100 |      100 |      100 |                   |<br> test1.js |      100 |      100 |      100 |      100 |                   |<br>â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”-|â€”â€”â€”â€”â€”â€”-|</p><p>å¥½äº†ï¼Œç”±äºæ—¶é—´å…³ç³»ï¼Œä»Šå¤©å°±è¯´åˆ°è¿™é‡Œå§ã€‚å…³äº Mocha å’Œ Chai è¿™é‡Œè¿˜æœ‰å¾ˆå¤šçŸ¥è¯†æ²¡æœ‰è¦†ç›–åˆ°ï¼Œæˆ‘ä¼šåœ¨ä¹‹åé™†ç»­æ›´æ–°ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.pexels.com/photos/374147/pexels-photo-374147.jpeg?cs=srgb&amp;amp;dl=beverage-caffeine-cappuccino-374147.jpg&amp;amp;fm=jpg&quot; alt=&quot;Mocha&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="å•å…ƒæµ‹è¯•" scheme="http://yoursite.com/categories/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="Mocha" scheme="http://yoursite.com/tags/Mocha/"/>
    
  </entry>
  
  <entry>
    <title>Vue dispatchã€broaddcastã€event-buså®ç°</title>
    <link href="http://yoursite.com/2019/04/07/dispatch/"/>
    <id>http://yoursite.com/2019/04/07/dispatch/</id>
    <published>2019-04-07T14:19:48.000Z</published>
    <updated>2019-04-07T14:23:53.466Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://get.pxhere.com/photo/photography-wallpaper-portrait-landscape-cute-lovely-happy-alive-natural-beautiful-beauty-live-hair-green-girl-hairstyle-black-hair-long-hair-hair-coloring-brown-hair-1452521.jpg" alt="Vue dispatchã€broaddcastã€event-buså®ç°"><br><a id="more"></a><br><a name="820f8de7"></a></p><h2 id="ä¸ºä»€ä¹ˆè¦å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ</h2><p>åœ¨ä½¿ç”¨Vueçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚çˆ¶ã€å­ç»„ä»¶é€šä¿¡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨propså’Œeventå®ç°ï¼Œä½†æ˜¯å¦‚æœç»„ä»¶å±‚çº§è·¨åº¦è¾ƒå¤§æˆ–è€…æ˜¯å…„å¼Ÿç»„ä»¶ä¹‹é—´é€šä¿¡æ—¶ï¼Œå¦‚æœæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨propså’Œeventä¸€å±‚ä¸€å±‚ä¼ é€’çš„è¯ï¼Œå°±ä¼šé€ æˆä»£ç éš¾ä»¥ç»´æŠ¤ã€éš¾ä»¥é˜…è¯»ä»¥åŠæ›´å®¹æ˜“å‡ºé”™çš„é—®é¢˜ã€‚é‚£ä¹ˆæˆ‘ä»¬æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿå½“ç„¶æœ‰ï¼Œé‚£å°±æ˜¯dispatchã€broadcastä¸event-busã€‚<br><a name="6028afbe"></a></p><h2 id="dispatchã€broadcastã€event-buså„è‡ªçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#dispatchã€broadcastã€event-buså„è‡ªçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="dispatchã€broadcastã€event-buså„è‡ªçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>dispatchã€broadcastã€event-buså„è‡ªçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å…ˆæ¥è¯´è¯´dispatchå’Œbroadcastå§ã€‚<br><br><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1554645955932-1a1514a2-d036-4289-b067-8e320efd0172.png#align=left&amp;display=inline&amp;height=249&amp;name=image.png&amp;originHeight=498&amp;originWidth=669&amp;size=23532&amp;status=done&amp;width=335" alt="image.png"><br>dispatchçš„ä½œç”¨æ˜¯å°†äº‹ä»¶å‘ä¸Šä¼ é€’ã€‚æ¯”å¦‚è¯´å¦‚æœä¸€ä¸ªç»„ä»¶è§¦å‘äº‹ä»¶çš„è¯ï¼Œè¯¥äº‹ä»¶ä¼šä¸€å±‚å±‚å‘ä¸Šä¼ é€’åˆ°æ‰€æœ‰çš„çˆ¶ç»„ä»¶ã€‚broadcastæ­£å¥½å’Œdispatchæƒ³æ³•ï¼Œbroadcastçš„ä½œç”¨æ˜¯å‘ä¸‹é¢æ‰€æœ‰çš„å­ç»„ä»¶å¹¿æ’­äº‹ä»¶ã€‚å¦‚æœå®ç°äº†dispatchå’Œbroadcastï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿ä¸ç”¨propså’Œeventsä¸€å±‚ä¸€å±‚çš„é€šä¿¡äº†ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1554646459281-4e06cae8-1ec5-4bb0-a5d1-135fc3a5adf8.png#align=left&amp;display=inline&amp;height=141&amp;name=image.png&amp;originHeight=281&amp;originWidth=705&amp;size=14241&amp;status=done&amp;width=353" alt="image.png"><br><br>event-busç§°ä¸ºäº‹ä»¶æ€»çº¿ï¼Œå…¶ä½œç”¨æ˜¯åœ¨ä¸¤ä¸ªæ¯«æ— å…³è”çš„ç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®ã€‚event-buså°±åƒä¸€ä¸ªäº‹ä»¶çš„å…±äº«æ± ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥åœ¨event-busä¸Šé¢è®¢é˜…å’Œå‘å¸ƒäº‹ä»¶ï¼Œè¿™æ ·å°±å®ç°äº†ä¸¤ä¸ªæ¯«æ— ç®¡ç†çš„ç»„ä»¶æ•°æ®ä¼ é€’ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯â€œè®¢é˜…-å‘å¸ƒâ€æ¨¡å¼ã€‚</p><p><a name="b28c6524"></a></p><h2 id="å¦‚ä½•å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ"><a href="#å¦‚ä½•å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ"></a>å¦‚ä½•å®ç°dispatchã€broadcastå’Œevent-busï¼Ÿ</h2><p>dispatchçš„ç›®çš„æ˜¯è¦å‘æ‰€æœ‰çš„çˆ¶ç»„ä»¶ä¼ é€’äº‹ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡é€’å½’æ‰€æœ‰çš„çˆ¶ç»„ä»¶æ¥å®ç°,è¿™é‡Œæˆ‘ä»¬å€ŸåŠ©$parentè·å–çˆ¶ç»„ä»¶å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dispatch(event,data) &#123;</span><br><span class="line"><span class="keyword">let</span> parent = <span class="keyword">this</span>.$parent;</span><br><span class="line">  <span class="keyword">while</span>(parent) &#123;</span><br><span class="line">  <span class="keyword">if</span>(parent) &#123;</span><br><span class="line">    <span class="keyword">this</span>.$emit(event,data);</span><br><span class="line">      parent = parent.$parent;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Vue.prototype.$dispatch = dispatch;</span><br></pre></td></tr></table></figure><p>broadcastçš„ä½œç”¨æ˜¯å‘ä¸‹çº§ç»„ä»¶å¹¿æ’­äº‹ä»¶ï¼Œæˆ‘ä»¬å€ŸåŠ©$childrenè·å–ä¸‹çº§ç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">broadcast</span>(<span class="params">event,data</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> children = <span class="keyword">this</span>.$children;</span><br><span class="line">  children.forEach(<span class="function"><span class="params">child</span>=&gt;</span>&#123;</span><br><span class="line">  child.$emit(event,data);</span><br><span class="line">    <span class="keyword">if</span>(child.$children.length) &#123;</span><br><span class="line">    broadcast.call(child,event,data);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">Vue.prototype.$broadcast = boardcast;</span><br></pre></td></tr></table></figure><p>event-busçš„å®ç°æ˜¯å€ŸåŠ©äºâ€œè®¢é˜…-å‘å¸ƒâ€æ¨¡å¼ï¼Œè€ŒVueçš„å®ä¾‹æ­£å¥½å®ç°äº†è¿™ä¸€æ¨¡å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åˆ›å»ºå¦ä¸€ä¸ªVueå®ä¾‹å°±å¯ä»¥å®ç°event-busäº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.$bus = <span class="keyword">new</span> Vue();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¢é˜…</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">this</span>.$bus.$on(eventname,(data)=&gt;&#123;</span><br><span class="line">...</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å‘å¸ƒ</span></span><br><span class="line"><span class="keyword">this</span>.$bus.$emit(eventname,data);</span><br></pre></td></tr></table></figure><p><a name="3dc6070a"></a></p><h2 id="æœ€åè¦è¯´çš„"><a href="#æœ€åè¦è¯´çš„" class="headerlink" title="æœ€åè¦è¯´çš„"></a>æœ€åè¦è¯´çš„</h2><p>Vueç»„ä»¶ä¹‹é—´é€šä¿¡å‡ºäº†ä»¥ä¸Šåˆ—ä¸¾çš„æ–¹æ³•è¿˜å¯ä»¥ä½¿ç”¨Vuexã€‚Vuexæ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªé€šç”¨çŠ¶æ€ç®¡ç†å™¨ã€‚åœ¨ä¸­å¤§å‹é¡¹ç›®ä¸­ï¼Œå¦‚æœåœ¨ç»„ä»¶é—´ä»»æ„ä¼ é€’æ•°æ®ä¼šå¯¼è‡´åº”ç”¨çš„æ•°æ®æ··ä¹±å¹¶ä¸”éš¾ä»¥ç®¡ç†ï¼Œè€ŒVuexæä¾›äº†å•å‘æ•°æ®æµç»‘å®šï¼Œåº”ç”¨ä¸­çš„æ¯ä¸€ä¸ªçŠ¶æ€éƒ½å¯ä»¥å­˜å‚¨åˆ°Vuexä¸­è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://get.pxhere.com/photo/photography-wallpaper-portrait-landscape-cute-lovely-happy-alive-natural-beautiful-beauty-live-hair-green-girl-hairstyle-black-hair-long-hair-hair-coloring-brown-hair-1452521.jpg&quot; alt=&quot;Vue dispatchã€broaddcastã€event-buså®ç°&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Vue" scheme="http://yoursite.com/categories/Vue/"/>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Typescriptå­¦ä¹ -æ¥å£</title>
    <link href="http://yoursite.com/2019/03/31/ts-%E6%8E%A5%E5%8F%A3/"/>
    <id>http://yoursite.com/2019/03/31/ts-æ¥å£/</id>
    <published>2019-03-31T13:16:38.000Z</published>
    <updated>2019-03-31T13:21:37.121Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/k-63-dsc055535259-coke_1.jpg?auto=format&amp;bg=F4F4F3&amp;con=3&amp;cs=srgb&amp;dpr=1&amp;fm=jpg&amp;ixlib=php-1.1.0&amp;mark=rawpixel-watermark.png&amp;markalpha=90&amp;markpad=13&amp;markscale=10&amp;markx=25&amp;q=75&amp;usm=15&amp;vib=3&amp;w=1600&amp;s=3799e16babbb570d2b18315e1a5710e9" alt=""><br><a id="more"></a></p><p><a name="61a3ec66"></a></p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>TypeScriptçš„æ ¸å¿ƒåŸåˆ™ä¹‹ä¸€æ˜¯å¯¹å€¼æ‰€å…·æœ‰çš„_ç»“æ„_è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ å®ƒæœ‰æ—¶è¢«ç§°åšâ€œé¸­å¼è¾¨å‹æ³•â€æˆ–â€œç»“æ„æ€§å­ç±»å‹åŒ–â€ã€‚ åœ¨TypeScripté‡Œï¼Œæ¥å£çš„ä½œç”¨å°±æ˜¯ä¸ºè¿™äº›ç±»å‹å‘½åå’Œä¸ºä½ çš„ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä»£ç å®šä¹‰å¥‘çº¦ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> LabelledValue &#123;</span><br><span class="line">  label: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printLabel</span>(<span class="params">labelledObj: LabelledValue</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(labelledObj.label);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myObj = &#123;size: <span class="number">10</span>, label: <span class="string">"Size 10 Object"</span>&#125;;</span><br><span class="line">printLabel(myObj);</span><br></pre></td></tr></table></figure><p><a name="c2a37b74"></a></p><h2 id="å¯é€‰å±æ€§"><a href="#å¯é€‰å±æ€§" class="headerlink" title="å¯é€‰å±æ€§"></a>å¯é€‰å±æ€§</h2><p>æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ã€‚ æœ‰äº›æ˜¯åªåœ¨æŸäº›æ¡ä»¶ä¸‹å­˜åœ¨ï¼Œæˆ–è€…æ ¹æœ¬ä¸å­˜åœ¨ã€‚ å¯é€‰å±æ€§åœ¨åº”ç”¨â€œoption bagsâ€æ¨¡å¼æ—¶å¾ˆå¸¸ç”¨ï¼Œå³ç»™å‡½æ•°ä¼ å…¥çš„å‚æ•°å¯¹è±¡ä¸­åªæœ‰éƒ¨åˆ†å±æ€§èµ‹å€¼äº†ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> SquareConfig &#123;</span><br><span class="line">  color?: <span class="built_in">string</span>;</span><br><span class="line">  width?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createSquare</span>(<span class="params">config: SquareConfig</span>): </span>&#123;color: <span class="built_in">string</span>; area: <span class="built_in">number</span>&#125; &#123;</span><br><span class="line">  <span class="keyword">let</span> newSquare = &#123;color: <span class="string">"white"</span>, area: <span class="number">100</span>&#125;;</span><br><span class="line">  <span class="keyword">if</span> (config.color) &#123;</span><br><span class="line">    newSquare.color = config.color;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (config.width) &#123;</span><br><span class="line">    newSquare.area = config.width * config.width;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newSquare;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mySquare = createSquare(&#123;color: <span class="string">"black"</span>&#125;);</span><br></pre></td></tr></table></figure><p><a name="c17fa77c"></a></p><h2 id="åªè¯»å±æ€§"><a href="#åªè¯»å±æ€§" class="headerlink" title="åªè¯»å±æ€§"></a>åªè¯»å±æ€§</h2><p>ä¸€äº›å¯¹è±¡å±æ€§åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚ ä½ å¯ä»¥åœ¨å±æ€§åå‰ç”¨ <code>readonly</code>æ¥æŒ‡å®šåªè¯»å±æ€§:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Point &#123;</span><br><span class="line">    readonly x: <span class="built_in">number</span>;</span><br><span class="line">    readonly y: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TypeScriptå…·æœ‰<code>ReadonlyArray&lt;T&gt;</code>ç±»å‹ï¼Œå®ƒä¸<code>Array&lt;T&gt;</code>ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> ro: ReadonlyArray&lt;<span class="built_in">number</span>&gt; = a;</span><br><span class="line">ro[<span class="number">0</span>] = <span class="number">12</span>; <span class="comment">// error!</span></span><br><span class="line">ro.push(<span class="number">5</span>); <span class="comment">// error!</span></span><br><span class="line">ro.length = <span class="number">100</span>; <span class="comment">// error!</span></span><br><span class="line">a = ro; <span class="comment">// error!</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼Œå¯ä»¥çœ‹åˆ°å°±ç®—æŠŠæ•´ä¸ª<code>ReadonlyArray</code>èµ‹å€¼åˆ°ä¸€ä¸ªæ™®é€šæ•°ç»„ä¹Ÿæ˜¯ä¸å¯ä»¥çš„ã€‚ ä½†æ˜¯ä½ å¯ä»¥ç”¨ç±»å‹æ–­è¨€é‡å†™ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = ro <span class="keyword">as</span> <span class="built_in">number</span>[];</span><br></pre></td></tr></table></figure><p>æœ€ç®€å•åˆ¤æ–­è¯¥ç”¨<code>readonly</code>è¿˜æ˜¯<code>const</code>çš„æ–¹æ³•æ˜¯çœ‹è¦æŠŠå®ƒåšä¸ºå˜é‡ä½¿ç”¨è¿˜æ˜¯åšä¸ºä¸€ä¸ªå±æ€§ã€‚ åšä¸ºå˜é‡ä½¿ç”¨çš„è¯ç”¨<code>const</code>ï¼Œè‹¥åšä¸ºå±æ€§åˆ™ä½¿ç”¨<code>readonly</code>ã€‚<br><br><br>ç´¢å¼•ç­¾å<br><br><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> SquareConfig &#123;</span><br><span class="line">    color?: <span class="built_in">string</span>;</span><br><span class="line">    width?: <span class="built_in">number</span>;</span><br><span class="line">    [propName: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a name="25009be8"></a></p><h2 id="å‡½æ•°ç±»å‹"><a href="#å‡½æ•°ç±»å‹" class="headerlink" title="å‡½æ•°ç±»å‹"></a>å‡½æ•°ç±»å‹</h2><p>æ¥å£èƒ½å¤Ÿæè¿°JavaScriptä¸­å¯¹è±¡æ‹¥æœ‰çš„å„ç§å„æ ·çš„å¤–å½¢ã€‚ é™¤äº†æè¿°å¸¦æœ‰å±æ€§çš„æ™®é€šå¯¹è±¡å¤–ï¼Œæ¥å£ä¹Ÿå¯ä»¥æè¿°å‡½æ•°ç±»å‹ã€‚<br>ä¸ºäº†ä½¿ç”¨æ¥å£è¡¨ç¤ºå‡½æ•°ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¥å£å®šä¹‰ä¸€ä¸ªè°ƒç”¨ç­¾åã€‚ å®ƒå°±åƒæ˜¯ä¸€ä¸ªåªæœ‰å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹çš„å‡½æ•°å®šä¹‰ã€‚å‚æ•°åˆ—è¡¨é‡Œçš„æ¯ä¸ªå‚æ•°éƒ½éœ€è¦åå­—å’Œç±»å‹ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ISearchFunc &#123;</span><br><span class="line">(source:<span class="built_in">string</span>):<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> search:ISearchFunc = (source):<span class="function"><span class="params">void</span>=&gt;</span> &#123;</span><br><span class="line"><span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="194da868"></a></p><h2 id="å¯ç´¢å¼•çš„ç±»å‹"><a href="#å¯ç´¢å¼•çš„ç±»å‹" class="headerlink" title="å¯ç´¢å¼•çš„ç±»å‹"></a>å¯ç´¢å¼•çš„ç±»å‹</h2><p>ä¸ä½¿ç”¨æ¥å£æè¿°å‡½æ•°ç±»å‹å·®ä¸å¤šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æè¿°é‚£äº›èƒ½å¤Ÿâ€œé€šè¿‡ç´¢å¼•å¾—åˆ°â€çš„ç±»å‹ï¼Œæ¯”å¦‚<code>a[10]</code>æˆ–<code>ageMap[&quot;daniel&quot;]</code>ã€‚ å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª <em>ç´¢å¼•ç­¾å</em>ï¼Œå®ƒæè¿°äº†å¯¹è±¡ç´¢å¼•çš„ç±»å‹ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼•è¿”å›å€¼ç±»å‹ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> StringArray &#123;</span><br><span class="line">[index:<span class="built_in">number</span>]:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> myArray:StringArray = [</span><br><span class="line"><span class="string">"Jack"</span>,</span><br><span class="line">  <span class="string">"Sam"</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> str1 = myArray[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Anim &#123;</span><br><span class="line">name:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> Dog <span class="keyword">extends</span> Anim &#123;</span><br><span class="line">breed:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="c8c05a8b"></a></p><h2 id="ç±»æ¥å£"><a href="#ç±»æ¥å£" class="headerlink" title="ç±»æ¥å£"></a>ç±»æ¥å£</h2><p>å½“ä½ æ“ä½œç±»å’Œæ¥å£çš„æ—¶å€™ï¼Œä½ è¦çŸ¥é“ç±»æ˜¯å…·æœ‰ä¸¤ä¸ªç±»å‹çš„ï¼šé™æ€éƒ¨åˆ†çš„ç±»å‹å’Œå®ä¾‹çš„ç±»å‹ã€‚ <br><br><br>è¿™é‡Œå› ä¸ºå½“ä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ¥å£æ—¶ï¼Œåªå¯¹å…¶å®ä¾‹éƒ¨åˆ†è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ constructorå­˜åœ¨äºç±»çš„é™æ€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸åœ¨æ£€æŸ¥çš„èŒƒå›´å†…ã€‚<br>å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥ç›´æ¥æ“ä½œç±»çš„é™æ€éƒ¨åˆ†ã€‚ çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¥å£ï¼Œ <code>ClockConstructor</code>ä¸ºæ„é€ å‡½æ•°æ‰€ç”¨å’Œ<code>ClockInterface</code>ä¸ºå®ä¾‹æ–¹æ³•æ‰€ç”¨ã€‚ ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•° <code>createClock</code>ï¼Œå®ƒç”¨ä¼ å…¥çš„ç±»å‹åˆ›å»ºå®ä¾‹ã€‚<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ClockConstructor &#123;</span><br><span class="line">    <span class="keyword">new</span> (hour: <span class="built_in">number</span>, minute: <span class="built_in">number</span>): ClockInterface;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> ClockInterface &#123;</span><br><span class="line">    tick();</span><br><span class="line">&#125;ty</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createClock</span>(<span class="params">ctor: ClockConstructor, hour: <span class="built_in">number</span>, minute: <span class="built_in">number</span></span>): <span class="title">ClockInterface</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ctor(hour, minute);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> DigitalClock <span class="keyword">implements</span> ClockInterface &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    tick() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"beep beep"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> AnalogClock <span class="keyword">implements</span> ClockInterface &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    tick() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"tick tock"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> digital = createClock(DigitalClock, <span class="number">12</span>, <span class="number">17</span>);</span><br><span class="line"><span class="keyword">let</span> analog = createClock(AnalogClock, <span class="number">7</span>, <span class="number">32</span>);</span><br></pre></td></tr></table></figure></p><p><a name="86e26f66"></a></p><h2 id="ç»§æ‰¿æ¥å£"><a href="#ç»§æ‰¿æ¥å£" class="headerlink" title="ç»§æ‰¿æ¥å£"></a>ç»§æ‰¿æ¥å£</h2><p>å’Œç±»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥è½»æ¾çš„å°†ä¸€ä¸ªæ¥å£ä¸­çš„å±æ€§å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ¥å£ä¸­ï¼Œå¯ä»¥æ›´çµæ´»çš„å°†å¯ä»¥é‡ç”¨çš„å±æ€§ç‹¬ç«‹å‡ºæ¥ã€‚<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Shape &#123;</span><br><span class="line">    color: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> PenStroke &#123;</span><br><span class="line">    penWidth: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Square <span class="keyword">extends</span> Shape, PenStroke &#123;</span><br><span class="line">    sideLength: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> square = &lt;Square&gt;&#123;&#125;;</span><br><span class="line">square.color = <span class="string">"blue"</span>;</span><br><span class="line">square.sideLength = <span class="number">10</span>;</span><br><span class="line">square.penWidth = <span class="number">5.0</span>;</span><br></pre></td></tr></table></figure></p><p><a name="e076dbf6"></a></p><h2 id="æ··åˆç±»å‹"><a href="#æ··åˆç±»å‹" class="headerlink" title="æ··åˆç±»å‹"></a>æ··åˆç±»å‹</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Counter &#123;</span><br><span class="line">    (start: <span class="built_in">number</span>): <span class="built_in">string</span>;</span><br><span class="line">    interval: <span class="built_in">number</span>;</span><br><span class="line">    reset(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCounter</span>(<span class="params"></span>): <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> counter = &lt;Counter&gt;<span class="function"><span class="keyword">function</span> (<span class="params">start: <span class="built_in">number</span></span>) </span>&#123; &#125;;</span><br><span class="line">    counter.interval = <span class="number">123</span>;</span><br><span class="line">    counter.reset = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;;</span><br><span class="line">    <span class="keyword">return</span> counter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = getCounter();</span><br><span class="line">c(<span class="number">10</span>);</span><br><span class="line">c.reset();</span><br><span class="line">c.interval = <span class="number">5.0</span>;</span><br></pre></td></tr></table></figure><p><a name="a16ad588"></a></p><h2 id="æ¥å£ç»§æ‰¿ç±»"><a href="#æ¥å£ç»§æ‰¿ç±»" class="headerlink" title="æ¥å£ç»§æ‰¿ç±»"></a>æ¥å£ç»§æ‰¿ç±»</h2><p>å½“æ¥å£ç»§æ‰¿äº†ä¸€ä¸ªç±»ç±»å‹æ—¶ï¼Œå®ƒä¼šç»§æ‰¿ç±»çš„æˆå‘˜ä½†ä¸åŒ…æ‹¬å…¶å®ç°ã€‚ å°±å¥½åƒæ¥å£å£°æ˜äº†æ‰€æœ‰ç±»ä¸­å­˜åœ¨çš„æˆå‘˜ï¼Œä½†å¹¶æ²¡æœ‰æä¾›å…·ä½“å®ç°ä¸€æ ·ã€‚ æ¥å£åŒæ ·ä¼šç»§æ‰¿åˆ°ç±»çš„privateå’Œprotectedæˆå‘˜ã€‚ è¿™æ„å‘³ç€å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªæ‹¥æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜çš„ç±»æ—¶ï¼Œè¿™ä¸ªæ¥å£ç±»å‹åªèƒ½è¢«è¿™ä¸ªç±»æˆ–å…¶å­ç±»æ‰€å®ç°ï¼ˆimplementï¼‰ã€‚<br>å½“ä½ æœ‰ä¸€ä¸ªåºå¤§çš„ç»§æ‰¿ç»“æ„æ—¶è¿™å¾ˆæœ‰ç”¨ï¼Œä½†è¦æŒ‡å‡ºçš„æ˜¯ä½ çš„ä»£ç åªåœ¨å­ç±»æ‹¥æœ‰ç‰¹å®šå±æ€§æ—¶èµ·ä½œç”¨ã€‚ è¿™ä¸ªå­ç±»é™¤äº†ç»§æ‰¿è‡³åŸºç±»å¤–ä¸åŸºç±»æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ ä¾‹ï¼š<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Control &#123;</span><br><span class="line">    <span class="keyword">private</span> state: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> SelectableControl <span class="keyword">extends</span> Control &#123;</span><br><span class="line">    select(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Button <span class="keyword">extends</span> Control <span class="keyword">implements</span> SelectableControl &#123;</span><br><span class="line">    select() &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> TextBox <span class="keyword">extends</span> Control &#123;</span><br><span class="line">    select() &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯ï¼šâ€œImageâ€ç±»å‹ç¼ºå°‘â€œstateâ€å±æ€§ã€‚</span></span><br><span class="line"><span class="keyword">class</span> Image <span class="keyword">implements</span> SelectableControl &#123;</span><br><span class="line">    select() &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Location &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/k-63-dsc055535259-coke_1.jpg?auto=format&amp;amp;bg=F4F4F3&amp;amp;con=3&amp;amp;cs=srgb&amp;amp;dpr=1&amp;amp;fm=jpg&amp;amp;ixlib=php-1.1.0&amp;amp;mark=rawpixel-watermark.png&amp;amp;markalpha=90&amp;amp;markpad=13&amp;amp;markscale=10&amp;amp;markx=25&amp;amp;q=75&amp;amp;usm=15&amp;amp;vib=3&amp;amp;w=1600&amp;amp;s=3799e16babbb570d2b18315e1a5710e9&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Typescriptå­¦ä¹ è®¡åˆ’" scheme="http://yoursite.com/categories/Typescript%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/"/>
    
    
      <category term="Typescript" scheme="http://yoursite.com/tags/Typescript/"/>
    
  </entry>
  
  <entry>
    <title>Typescriptå­¦ä¹ -åŸºæœ¬ç±»å‹</title>
    <link href="http://yoursite.com/2019/03/31/ts-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/"/>
    <id>http://yoursite.com/2019/03/31/ts-åŸºæœ¬ç±»å‹/</id>
    <published>2019-03-31T13:16:26.000Z</published>
    <updated>2019-03-31T13:21:45.217Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/k-s7-jg-004aaa.jpg?auto=format&amp;bg=F4F4F3&amp;con=3&amp;cs=srgb&amp;dpr=1&amp;fm=jpg&amp;ixlib=php-1.1.0&amp;mark=rawpixel-watermark.png&amp;markalpha=90&amp;markpad=13&amp;markscale=10&amp;markx=25&amp;q=75&amp;usm=15&amp;vib=3&amp;w=1600&amp;s=6c8c046e0b837035b4cbee8f277d62e6" alt=""><br><a id="more"></a><br><a name="06e1ad91"></a></p><h2 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h2><p>è¡¨ç¤ºé€»è¾‘çœŸæˆ–å‡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isDone:<span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p><a name="55d4790c"></a></p><h2 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h2><p>è¡¨ç¤ºæ•°å­—ç±»å‹ï¼Œæ”¯æŒåè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decLiteral: <span class="built_in">number</span> = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">let</span> hexLiteral: <span class="built_in">number</span> = <span class="number">0xf00d</span>;</span><br><span class="line"><span class="keyword">let</span> binaryLiteral: <span class="built_in">number</span> = <span class="number">0b1010</span>;</span><br><span class="line"><span class="keyword">let</span> octalLiteral: <span class="built_in">number</span> = <span class="number">0o744</span>;</span><br></pre></td></tr></table></figure><p><a name="cc4dd1da"></a></p><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>è¡¨ç¤ºå­—ç¬¦ä¸²ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str:<span class="built_in">string</span> = <span class="string">"Hello world"</span>;</span><br></pre></td></tr></table></figure><p><a name="0e67d4b0"></a></p><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>è¡¨ç¤ºæ•°ç»„ç±»å‹ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr:<span class="built_in">string</span>[] = [<span class="string">'12'</span>,<span class="string">'23'</span>]</span><br></pre></td></tr></table></figure><p><a name="bd18cb09"></a></p><h2 id="å…ƒç»„Tuple"><a href="#å…ƒç»„Tuple" class="headerlink" title="å…ƒç»„Tuple"></a>å…ƒç»„Tuple</h2><p>å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º string å’Œ number ç±»å‹çš„å…ƒç»„ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Declare a tuple type</span></span><br><span class="line"><span class="keyword">let</span> x: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line"><span class="comment">// Initialize it</span></span><br><span class="line">x = [<span class="string">'hello'</span>, <span class="number">10</span>]; <span class="comment">// OK</span></span><br><span class="line"><span class="comment">// Initialize it incorrectly</span></span><br><span class="line">x = [<span class="number">10</span>, <span class="string">'hello'</span>]; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure><p>å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(x[<span class="number">0</span>].substr(<span class="number">1</span>)); <span class="comment">// OK</span></span><br><span class="line"><span class="built_in">console</span>.log(x[<span class="number">1</span>].substr(<span class="number">1</span>)); <span class="comment">// Error, 'number' does not have 'substr'</span></span><br></pre></td></tr></table></figure><p>å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x[<span class="number">3</span>] = <span class="string">'world'</span>; <span class="comment">// OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(x[<span class="number">5</span>].toString()); <span class="comment">// OK, 'string' å’Œ 'number' éƒ½æœ‰ toString</span></span><br><span class="line"></span><br><span class="line">x[<span class="number">6</span>] = <span class="literal">true</span>; <span class="comment">// Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹</span></span><br></pre></td></tr></table></figure><p><a name="56975625"></a></p><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p>enum ç±»å‹æ˜¯å¯¹ JavaScript æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚ åƒ C# ç­‰å…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123;Red,Yellow,Blue&#125;</span><br><span class="line"><span class="keyword">let</span> c:Color = Color.Red;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä»0å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­æ”¹æˆä» 1å¼€å§‹ç¼–å·ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123;Red = <span class="number">1</span>, Green, Blue&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;</span><br><span class="line"><span class="comment">//////////</span></span><br><span class="line"><span class="keyword">enum</span> Color &#123;Red = <span class="number">1</span>, Green=<span class="number">2</span>, Blue=<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;</span><br></pre></td></tr></table></figure><p>æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“æ•°å€¼ä¸º2ï¼Œä½†æ˜¯ä¸ç¡®å®šå®ƒæ˜ å°„åˆ° Coloré‡Œçš„å“ªä¸ªåå­—ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾ç›¸åº”çš„åå­—ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123;Red = <span class="number">1</span>, Green, Blue&#125;</span><br><span class="line"><span class="keyword">let</span> colorName: <span class="built_in">string</span> = Color[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(colorName);  <span class="comment">// æ˜¾ç¤º'Green'å› ä¸ºä¸Šé¢ä»£ç é‡Œå®ƒçš„å€¼æ˜¯2</span></span><br></pre></td></tr></table></figure><p><a name="Any"></a></p><h2 id="Any"><a href="#Any" class="headerlink" title="Any"></a>Any</h2><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚ è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹ä»£ç åº“ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯ç›´æ¥è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚<br><a name="Void"></a></p><h2 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h2><p>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoid ç±»å‹åƒæ˜¯ä¸<code>any</code>ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ voidã€‚<br>å£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆundefined å’Œ nullï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unusable: <span class="built_in">void</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><p><a name="57701822"></a></p><h2 id="Nullå’ŒUndefined"><a href="#Nullå’ŒUndefined" class="headerlink" title="Nullå’ŒUndefined"></a>Nullå’ŒUndefined</h2><p>TypeScript é‡Œ undefined å’Œ null ä¸¤è€…å„è‡ªæœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš undefined å’Œ nullã€‚ å’Œ void ç›¸ä¼¼ï¼Œå®ƒä»¬çš„æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§<br>é»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚<br>ç„¶è€Œï¼Œå½“ä½ æŒ‡å®šäº† â€“ strictNullChecksæ ‡è®°ï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™<code>void</code>å’Œå®ƒä»¬å„è‡ªã€‚ è¿™èƒ½é¿å… _å¾ˆå¤š_å¸¸è§çš„é—®é¢˜ã€‚ ä¹Ÿè®¸åœ¨æŸå¤„ä½ æƒ³ä¼ å…¥ä¸€ä¸ª string æˆ– null æˆ– undefined ï¼Œä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹ string|null|undefinedã€‚ </p><blockquote><p>æ³¨æ„ï¼šæˆ‘ä»¬é¼“åŠ±å°½å¯èƒ½åœ°ä½¿ç”¨<code>--strictNullChecks</code>ï¼Œä½†åœ¨æœ¬æ‰‹å†Œé‡Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªæ ‡è®°æ˜¯å…³é—­çš„ã€‚</p></blockquote><p><a name="Never"></a></p><h2 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h2><p><code>never</code>ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œ <code>never</code>ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼› å˜é‡ä¹Ÿå¯èƒ½æ˜¯ <code>never</code>ç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚<br><code>never</code>ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œ_æ²¡æœ‰_ç±»å‹æ˜¯<code>never</code>çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™<code>never</code>ç±»å‹ï¼ˆé™¤äº†<code>never</code>æœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ <code>any</code>ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™<code>never</code>ã€‚<br><a name="Ojbect"></a></p><h2 id="Ojbect"><a href="#Ojbect" class="headerlink" title="Ojbect"></a>Ojbect</h2><p><code>object</code>è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤<code>number</code>ï¼Œ<code>string</code>ï¼Œ<code>boolean</code>ï¼Œ<code>symbol</code>ï¼Œ<code>null</code>æˆ–<code>undefined</code>ä¹‹å¤–çš„ç±»å‹ã€‚<br>ä½¿ç”¨<code>object</code>ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ<code>Object.create</code>è¿™æ ·çš„APIã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">o: object | <span class="literal">null</span></span>): <span class="title">void</span></span>;</span><br><span class="line"></span><br><span class="line">create(&#123; prop: <span class="number">0</span> &#125;); <span class="comment">// OK</span></span><br><span class="line">create(<span class="literal">null</span>); <span class="comment">// OK</span></span><br><span class="line"></span><br><span class="line">create(<span class="number">42</span>); <span class="comment">// Error</span></span><br><span class="line">create(<span class="string">"string"</span>); <span class="comment">// Error</span></span><br><span class="line">create(<span class="literal">false</span>); <span class="comment">// Error</span></span><br><span class="line">create(<span class="literal">undefined</span>); <span class="comment">// Error</span></span><br></pre></td></tr></table></figure><p><a name="9650a3c5"></a></p><h2 id="ç±»å‹å’Œæ–­è¨€"><a href="#ç±»å‹å’Œæ–­è¨€" class="headerlink" title="ç±»å‹å’Œæ–­è¨€"></a>ç±»å‹å’Œæ–­è¨€</h2><p>æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯”TypeScriptæ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚ é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚<br>é€šè¿‡<em>ç±»å‹æ–­è¨€</em>è¿™ç§æ–¹å¼å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œâ€œç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆâ€ã€‚ ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚ å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚ TypeScriptä¼šå‡è®¾ä½ ï¼Œç¨‹åºå‘˜ï¼Œå·²ç»è¿›è¡Œäº†å¿…é¡»çš„æ£€æŸ¥ã€‚<br>ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚ å…¶ä¸€æ˜¯â€œå°–æ‹¬å·â€è¯­æ³•ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someValue: <span class="built_in">any</span> = <span class="string">"this is a string"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> strLength: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;someValue).length;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªä¸º<code>as</code>è¯­æ³•ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someValue: <span class="built_in">any</span> = <span class="string">"this is a string"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> strLength: <span class="built_in">number</span> = (someValue <span class="keyword">as</span> <span class="built_in">string</span>).length;</span><br></pre></td></tr></table></figure><p>ä¸¤ç§å½¢å¼æ˜¯ç­‰ä»·çš„ã€‚ è‡³äºä½¿ç”¨å“ªä¸ªå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å‡­ä¸ªäººå–œå¥½ï¼›ç„¶è€Œï¼Œå½“ä½ åœ¨TypeScripté‡Œä½¿ç”¨JSXæ—¶ï¼Œåªæœ‰ <code>as</code>è¯­æ³•æ–­è¨€æ˜¯è¢«å…è®¸çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/k-s7-jg-004aaa.jpg?auto=format&amp;amp;bg=F4F4F3&amp;amp;con=3&amp;amp;cs=srgb&amp;amp;dpr=1&amp;amp;fm=jpg&amp;amp;ixlib=php-1.1.0&amp;amp;mark=rawpixel-watermark.png&amp;amp;markalpha=90&amp;amp;markpad=13&amp;amp;markscale=10&amp;amp;markx=25&amp;amp;q=75&amp;amp;usm=15&amp;amp;vib=3&amp;amp;w=1600&amp;amp;s=6c8c046e0b837035b4cbee8f277d62e6&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Typescriptå­¦ä¹ è®¡åˆ’" scheme="http://yoursite.com/categories/Typescript%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/"/>
    
    
      <category term="Typescript" scheme="http://yoursite.com/tags/Typescript/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹å†™call,apply,bind</title>
    <link href="http://yoursite.com/2019/03/31/call/"/>
    <id>http://yoursite.com/2019/03/31/call/</id>
    <published>2019-03-31T13:08:57.313Z</published>
    <updated>2019-03-31T13:23:40.852Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/k-199-eye-006547-l_2.jpg?auto=format&amp;bg=F4F4F3&amp;con=3&amp;cs=srgb&amp;dpr=1&amp;fm=jpg&amp;ixlib=php-1.1.0&amp;mark=rawpixel-watermark.png&amp;markalpha=90&amp;markpad=13&amp;markscale=10&amp;markx=25&amp;q=75&amp;usm=15&amp;vib=3&amp;w=1600&amp;s=4ff36d0e064c667b6455097787e90f01" alt=""><br><a id="more"></a><br>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œbind,call,applyè¿™ä¸‰ä¸ªå‡½æ•°æ˜¯ä½¿ç”¨ç‡æ¯”è¾ƒé«˜çš„å‡½æ•°ï¼Œå®ƒä»¬éƒ½å¯ä»¥æ”¹å˜å‡½æ•°éƒ½æ‰§è¡Œä½œç”¨åŸŸï¼ˆæ”¹å˜thisï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŸ¥é“å®ƒä»¬æ˜¯å¦‚ä½•å®ç°éƒ½å—ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æ‰‹åŠ¨å®ç°ä»¥ä¸‹è¿™ä¸‰ä¸ªå‡½æ•°ï¼š<br><a name="06f1ca97"></a></p><h2 id="call-apply"><a href="#call-apply" class="headerlink" title="call,apply"></a>call,apply</h2><p>æ ¹æ®MDNçš„æè¿°ï¼Œcall æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°, å…¶å…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„ this å€¼å’Œåˆ†åˆ«åœ°æä¾›çš„å‚æ•°ã€‚call å’Œ apply çš„å…·ä½“åŠŸèƒ½ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ä¼ å‚æ–¹å¼ä¸ä¸€æ ·ã€‚call ä¼ å‚æ•°æ˜¯åˆ†å¼€çš„ï¼Œapply æ˜¯ç”¨ä¸€ä¸ªç»„æ•°ä¼ é€’å‚æ•°ã€‚ä¸‹é¢æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°çš„å…·ä½“å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//call</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.call = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> result = context.fn(...args);</span><br><span class="line">    <span class="keyword">delete</span> context.fn</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//apply</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.apply = <span class="function"><span class="keyword">function</span> (<span class="params">context, arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="built_in">Object</span>(context) || <span class="built_in">window</span>;</span><br><span class="line">    context.fn = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="keyword">if</span> (!arr) &#123;</span><br><span class="line">        result = context.fn();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> args = [...arr].slice(<span class="number">1</span>);</span><br><span class="line">      result = context.fn(...args)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> context.fn</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="bind"></a></p><h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h2><p>æ ¹æ®MDNæè¿°ï¼Œbind æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨è°ƒç”¨æ—¶è®¾ç½® this å…³é”®å­—ä¸ºæä¾›çš„å€¼ã€‚å¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œå°†ç»™å®šå‚æ•°åˆ—è¡¨ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°åºåˆ—çš„å‰è‹¥å¹²é¡¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//bind</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> F) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> _self(...args,...arguments);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> _self.apply(context,[...args,...arguments]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/k-199-eye-006547-l_2.jpg?auto=format&amp;amp;bg=F4F4F3&amp;amp;con=3&amp;amp;cs=srgb&amp;amp;dpr=1&amp;amp;fm=jpg&amp;amp;ixlib=php-1.1.0&amp;amp;mark=rawpixel-watermark.png&amp;amp;markalpha=90&amp;amp;markpad=13&amp;amp;markscale=10&amp;amp;markx=25&amp;amp;q=75&amp;amp;usm=15&amp;amp;vib=3&amp;amp;w=1600&amp;amp;s=4ff36d0e064c667b6455097787e90f01&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Javascript" scheme="http://yoursite.com/categories/Javascript/"/>
    
    
      <category term="Javascript" scheme="http://yoursite.com/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹å†™ä¸€ä¸ªPromise</title>
    <link href="http://yoursite.com/2019/03/31/promise/"/>
    <id>http://yoursite.com/2019/03/31/promise/</id>
    <published>2019-03-31T12:47:03.000Z</published>
    <updated>2019-03-31T13:00:33.056Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.pexels.com/photos/2061057/pexels-photo-2061057.jpeg?cs=srgb&amp;dl=adorable-animal-bed-2061057.jpg&amp;fm=jpg" alt=""><br><a id="more"></a></p><p><a name="df45c20f"></a></p><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>Promiseæ˜¯ä¸ºäº†è§£å†³Javascriptå›è°ƒåµŒå¥—è¿‡å¤šå¯¼è‡´å›è°ƒåœ°ç‹±ï¼ˆcallbackhellï¼‰è€Œäº§ç”Ÿçš„ã€‚ç›®å‰å·²è¢«çº³å…¥äº†es2015è§„èŒƒï¼Œä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒPromiseã€‚ä¸ºäº†åœ¨å·¥ä½œä¸­æ›´å¥½çš„è¿ç”¨Promise,æˆ‘ä»¬éœ€è¦ç†è§£Promiseè§„èŒƒä¸å†…éƒ¨å®ç°æœºåˆ¶ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æ‰‹åŠ¨å®ç°ä¸€ä¸ªPromiseã€‚</p><p><a name="2d7cd21f"></a></p><h2 id="Promise-A-è§„èŒƒ"><a href="#Promise-A-è§„èŒƒ" class="headerlink" title="Promise/A+è§„èŒƒ"></a>Promise/A+è§„èŒƒ</h2><p>åœ¨å†™ä»£ç ä¹‹å‰è®©æˆ‘ä»¬å…ˆäº†è§£ä¸‹ Promise/A+è§„èŒƒã€‚<br>ä¸€ä¸ªpromiseæœ‰ä¸‰ç§çŠ¶æ€ï¼š</p><ul><li>pending:è¡¨ç¤ºåˆå§‹çŠ¶æ€ï¼Œå¯ä»¥è½¬ç§»åˆ° fullfilled æˆ–è€… rejected çŠ¶æ€</li><li>fulfilled:è¡¨ç¤ºæ“ä½œæˆåŠŸï¼Œä¸å¯è½¬ç§»çŠ¶æ€</li><li>rejected:è¡¨ç¤ºæ“ä½œå¤±è´¥ï¼Œä¸å¯è½¬ç§»çŠ¶æ€</li><li>å¿…é¡»æœ‰ä¸€ä¸ª then å¼‚æ­¥æ‰§è¡Œæ–¹æ³•ï¼Œthen æ¥å—ä¸¤ä¸ªå‚æ•°ä¸”å¿…é¡»è¿”å›ä¸€ä¸ªpromiseï¼š</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1553841212355-dc481bad-250e-4b16-9207-a221230c6fba.png#align=left&amp;display=inline&amp;height=277&amp;originHeight=297&amp;originWidth=801&amp;size=0&amp;status=done&amp;width=746" alt=""></p><p>å€Ÿç”¨è¿™å¼ æ¥è‡ªMDNçš„æµç¨‹å›¾æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ° Promise çŠ¶æ€çš„æµè½¬è¿‡ç¨‹ã€‚</p><p><a name="7920d5ef"></a></p><h2 id="ç®€å•ç‰ˆ"><a href="#ç®€å•ç‰ˆ" class="headerlink" title="ç®€å•ç‰ˆ"></a>ç®€å•ç‰ˆ</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€å•ç‰ˆçš„ Promise:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise1</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span>;</span><br><span class="line">self.status = <span class="string">'pending'</span>;</span><br><span class="line">  self.value = <span class="literal">undefined</span>;</span><br><span class="line">  self.reason = <span class="literal">undefined</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(self.status===<span class="string">'pending'</span>)&#123;</span><br><span class="line">    self.status = <span class="string">'fullfilled'</span>;</span><br><span class="line">      self.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(self.status===<span class="string">'pending'</span>) &#123;</span><br><span class="line">    self.status = <span class="string">'rejected'</span>;</span><br><span class="line">      self.reason = reason;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">  executor(resolve,reject);</span><br><span class="line">  &#125;<span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  reject(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise1.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFullfilled,onRejected</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.status===<span class="string">'fullfilled'</span>) &#123;</span><br><span class="line">  onFullfilled(<span class="keyword">this</span>.value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.status===<span class="string">'rejected'</span>) &#123;</span><br><span class="line">  onRejected(<span class="keyword">this</span>.reason);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> p= <span class="keyword">new</span> Promise1(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;resolve(<span class="number">1</span>)&#125;);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="built_in">console</span>.log(x)&#125;)</span><br><span class="line"><span class="comment">//è¾“å‡º1</span></span><br></pre></td></tr></table></figure><p><a name="8a03c7d9"></a></p><h2 id="æ”¯æŒå¼‚æ­¥"><a href="#æ”¯æŒå¼‚æ­¥" class="headerlink" title="æ”¯æŒå¼‚æ­¥"></a>æ”¯æŒå¼‚æ­¥</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬å®ç°äº†æœ€ç®€å•çš„ Promiseã€‚ä»¥ä¸Šç‰ˆæœ¬çš„Promiseæ˜¯å­˜åœ¨å¾ˆå¤šé—®é¢˜çš„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæœ€å¤§çš„é—®é¢˜æ˜¯å®ƒä¸æ”¯æŒå¼‚æ­¥ï¼Œç„¶è€Œåœ¨ç°å®ä¸­ï¼ŒPromiseç»å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯éƒ½æ˜¯å¼‚æ­¥ã€‚è®©æˆ‘ä»¬æ¥ä¸º Promise åŠ å…¥å¼‚æ­¥åŠŸèƒ½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">'fullfilled'</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise1</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span>;</span><br><span class="line">self.status = PENDING;</span><br><span class="line">  self.value = <span class="literal">undefined</span>;</span><br><span class="line">  self.reason = <span class="literal">undefined</span>;</span><br><span class="line">  self.fullfilledCallbacks = [];</span><br><span class="line">  self.rejectedCallbacks = [];</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">    value.then(resolve,reject);</span><br><span class="line">    &#125;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(self.status===PENDING)&#123;</span><br><span class="line">        self.status = FULFILLED;</span><br><span class="line">        self.value = value;</span><br><span class="line">        self.fullfilledCallbacks.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">        cb(self.value)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(self.status===PENDING) &#123;</span><br><span class="line">        self.status = REJECTED;</span><br><span class="line">        self.reason = reason;</span><br><span class="line">        self.rejectedCallbacks.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">        cb(self.reason);</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">  executor(resolve,reject);</span><br><span class="line">  &#125;<span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  reject(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise1.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled,onRejected</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Promise1(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> _value = (<span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> &amp;&amp; onFulfilled(value)) || value;</span><br><span class="line">        resolve(_value)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> _reason = (<span class="keyword">typeof</span> onRejected === <span class="string">'function'</span> &amp;&amp; onRejected(reason)) || reason;</span><br><span class="line">        reject(_reason);</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">if</span>(self.status==PENDING) &#123;</span><br><span class="line">      self.fullfilledCallbacks.push(success);</span><br><span class="line">        self.rejectedCallbacks.push(error);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(self.status==FULLFILLED)&#123;</span><br><span class="line">      success.call(<span class="keyword">this</span>,<span class="keyword">this</span>.value)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(self.status==REJECTED) &#123;</span><br><span class="line">      error.call(<span class="keyword">this</span>,<span class="keyword">this</span>.reason);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬åšäº†å¦‚ä¸‹æ›´æ”¹ï¼š</p><ol><li>å°† Promise ä¸‰ä¸ªçŠ¶æ€å®šä¹‰ä¸ºå¸¸é‡ï¼Œæ–¹ä¾¿ç»´æŠ¤</li><li>å¯¹äº Promise resolveå’Œreject å‡½æ•°æ‰§è¡ŒåŠ å…¥å¼‚æ­¥å¤„ç†</li><li>åœ¨Promise.thenä¸­è¿”å›æ–°çš„Promiseå¯¹è±¡ï¼Œä½¿Promiseå¯ä»¥æ”¯æŒé“¾å¼è°ƒç”¨</li></ol><p><a name="852384c0"></a></p><h2 id="é”™è¯¯å¤„ç†ä»¥åŠé™æ€æ–¹æ³•"><a href="#é”™è¯¯å¤„ç†ä»¥åŠé™æ€æ–¹æ³•" class="headerlink" title="é”™è¯¯å¤„ç†ä»¥åŠé™æ€æ–¹æ³•"></a>é”™è¯¯å¤„ç†ä»¥åŠé™æ€æ–¹æ³•</h2><p>ä¸‹é¢è®©æˆ‘ä»¬æ¥ä¸ºPromise æ·»åŠ é”™è¯¯å¤„ç†ä»¥åŠé™æ€æ–¹æ³•:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é”™è¯¯å¤„ç†</span></span><br><span class="line">Promise1.prototype.catch = <span class="function"><span class="keyword">function</span>(<span class="params">onRejected</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.then(<span class="literal">null</span>, onRejected);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›fullfilled Promiseå¯¹è±¡</span></span><br><span class="line">Promise1.resolve = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Promise1(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(value);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿”å› rejected Promise å¯¹è±¡</span></span><br><span class="line">Promise1.reject = <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Promise1(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(reason);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Promise.allæ–¹æ³•</span></span><br><span class="line">Promise1.all = <span class="function"><span class="keyword">function</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">gen</span>(<span class="params">length, resolve</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> values = [];</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">i, value</span>) </span>&#123;</span><br><span class="line">            values[i] = value;</span><br><span class="line">            <span class="keyword">if</span> (++count === length) &#123;</span><br><span class="line">                resolve(values);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Promise1(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> done = gen(promises.length, resolve);</span><br><span class="line">        promises.forEach(<span class="function">(<span class="params">promise, index</span>) =&gt;</span> &#123;</span><br><span class="line">            promise.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">                done(index, value)</span><br><span class="line">            &#125;, reject)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Promise.raceæ–¹æ³•</span></span><br><span class="line">Promise1.race = <span class="function"><span class="keyword">function</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Promise1(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        promises.forEach(<span class="function">(<span class="params">promise, index</span>) =&gt;</span> &#123;</span><br><span class="line">           promise.then(resolve, reject);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨å½“æˆ‘ä»¬console.log(Promise1.resolve(â€˜aâ€™))çš„æ—¶å€™ï¼Œæˆ‘å‘ç°æ‰“å°å‡ºæ¥çš„çŠ¶æ€ç«Ÿç„¶æ˜¯ pendingçŠ¶æ€ï¼Œæˆ‘çŒœæƒ³åŸå› æ˜¯åº”è¯¥æ˜¯resolveä¸­å‡½æ•°å¼‚æ­¥æ‰§è¡Œï¼Œåœ¨å½“æˆ‘ä»¬consoleçš„æ—¶å€™setTimeoutä¸­ä»£ç æœªæ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ç»™å‡ºçš„è§£å†³æ–¹æ³•æ˜¯å°†çŠ¶æ€å˜åŒ–ä¸èµ‹å€¼ç§»åˆ°setTimeoutå¤–é¢ï¼Œè¿™æ ·å°±ä¸ä¼šäº§ç”Ÿåˆšæ‰çš„é—®é¢˜äº†ï¼Œæ›´æ”¹åä»£ç é•¿è¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">    value.then(resolve,reject);</span><br><span class="line">    &#125;</span><br><span class="line">  self.status = FULFILLED;</span><br><span class="line">  self.value = value;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(self.status===PENDING)&#123;</span><br><span class="line">        self.fullfilledCallbacks.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">        cb(self.value)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    self.status = REJECTED;</span><br><span class="line">    self.reason = reason;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(self.status===PENDING) &#123;</span><br><span class="line">        self.rejectedCallbacks.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">        cb(self.reason);</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><a name="25f9c7fa"></a></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»è¿‡ä»¥ä¸Šå®è·µï¼Œæˆ‘ä»¬æˆåŠŸçš„æ‰‹å†™äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ Promiseã€‚è¿™é‡Œç»™æˆ‘çš„æœ€å¤§å¯å‘æ˜¯å¦‚æœæˆ‘ä»¬æƒ³å­¦ä¹ ä¸€ä¸ªä¸œè¥¿ï¼Œå¿…é¡»æ·±å…¥åˆ°å®ƒçš„åº•å±‚ï¼Œäº†è§£å®ƒçš„è¿è¡ŒåŸç†ä¸å…·ä½“å®ç°æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥é€ ä¸€ä¸ªç®€å•çš„è½®å­ï¼Œè¿™æ ·æ‰ç®—æˆ‘ä»¬æŒæ¡äº†è¯¥çŸ¥è¯†ç‚¹ã€‚ä»å‰çš„æˆ‘å¯¹äºè¿™ä¸€ç‚¹æ²¡æœ‰å…³æ³¨çš„å¤ªå¤šï¼Œå¯¼è‡´åœ¨ç”¨æŸä¸ªçŸ¥è¯†ç‚¹æ—¶åªæ˜¯æŒæ¡çš„å®ƒçš„è¡¨å±‚ç”¨æ³•ï¼Œåœ¨é«˜çº§ä¸€ç‚¹çš„ä½¿ç”¨åœºæ™¯æ—¶å®Œå…¨ä¸ä¼šè¿ç”¨ã€‚ä»¥åæˆ‘ä¼šæ›´åŠ æ³¨é‡æºç æ–¹é¢çš„å­¦ä¹ ï¼Œå¼¥è¡¥æˆ‘è¿™æ–¹é¢çš„ä¸è¶³ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.pexels.com/photos/2061057/pexels-photo-2061057.jpeg?cs=srgb&amp;amp;dl=adorable-animal-bed-2061057.jpg&amp;amp;fm=jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Javascript" scheme="http://yoursite.com/categories/Javascript/"/>
    
    
      <category term="Javascript" scheme="http://yoursite.com/tags/Javascript/"/>
    
      <category term="Promise" scheme="http://yoursite.com/tags/Promise/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆè¦ä»£ç å®¡æŸ¥</title>
    <link href="http://yoursite.com/2019/03/10/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%81%9A%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5/"/>
    <id>http://yoursite.com/2019/03/10/ä¸ºä»€ä¹ˆè¦åšä»£ç å®¡æŸ¥/</id>
    <published>2019-03-10T14:56:44.000Z</published>
    <updated>2019-03-31T12:53:49.147Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.pexels.com/photos/2058172/pexels-photo-2058172.jpeg?cs=srgb&amp;dl=architectural-design-architecture-building-2058172.jpg&amp;fm=jpg" alt=""><br><a id="more"></a></p><blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="http://sophiebits.com/2018/12/25/why-review-code.html" target="_blank" rel="noopener">http://sophiebits.com/2018/12/25/why-review-code.html</a><br>ä½œè€…ï¼šSophie Alpert<br>å‘å¸ƒæ—¶é—´ï¼š2018å¹´12æœˆ25æ—¥</p></blockquote><p>æœ€è¿‘ä¸€ä¸ªæœ‹å‹é—®æˆ‘ä¸ºä»€ä¹ˆä»£ç å®¡æŸ¥å¾ˆæœ‰ä»·å€¼ï¼Ÿè‡³å°‘å¤§å¤šæ•°ç¡…è°·ç§‘æŠ€å…¬å¸åœ¨æ¯ä¸€æ¬¡å˜åŒ–æ—¶éƒ½åšä»£ç å®¡æŸ¥ï¼Œä»¥è·å¾—è‡³å°‘ä¸¤åŒçœ¼ç›å»ç›‘æ§ä»£ç å˜åŒ–ã€‚åœ¨æˆ‘ä»¥å‰çš„å·¥ä½œï¼Œæˆ‘ä»¬åœ¨ä¸€æ®µæ—¶é—´ï¼ˆå¾ˆçŸ­ï¼‰é€‰æ‹©äº†åšä»£ç å®¡æŸ¥ï¼Œç„¶åä¸€ä¸ªæ¥è‡ª Google çš„é›‡å‘˜åŠ å…¥äº†æˆ‘ä»¬å¹¶ä¸”æ¿€åŠ±æˆ‘ä»¬å®¡æŸ¥æˆ‘ä»¬æ‰€æœ‰çš„ä»£ç ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å»ºè®®ã€‚</p><p>å¦‚æœæ‚¨åšçš„æ­£ç¡®ï¼Œä»£ç å®¡æŸ¥ä¸ä¼šæ„Ÿåˆ°ç¹é‡ã€‚æ‚¨å’Œæ‚¨çš„å®¡æŸ¥è€…ä¸æ˜¯å¯¹æ‰‹ï¼›æ‚¨ä»¬ä¸€èµ·å·¥ä½œæ¥æ„å»ºæœ€å¥½çš„è½¯ä»¶ã€‚é‡è¦æ˜¯ä¸è¦é‡‡ç”¨åé¦ˆ-å³ä½¿æ‚¨çš„ä»£ç éœ€è¦æ”¹å˜ï¼Œè¿™å¹¶ä¸æ„å‘³ç€æ‚¨æ˜¯æœ‰é—®é¢˜çš„ã€‚å¾—åˆ°åé¦ˆæ˜¯æ­£å¸¸çš„ï¼Œå¹¶ä¸”è¿™ä¼šå¸®åŠ©æ‚¨æˆé•¿ï¼</p><p>æœ‰äº›å…¬å¸æœ‰ç€å¤æ‚çš„è§„åˆ™å…³äºå¤šå°‘äººå¿…é¡»å®¡æŸ¥æ¯ä¸€ä»½ä»£ç ï¼Œä¸¥æ ¼è§„å®šæ¯ä¸€éƒ¨åˆ†ä»£ç çš„è´£ä»»äººã€‚æˆ‘è®¤ä¸ºé‚£å®Œå…¨æ²¡æœ‰å¿…è¦ï¼›æˆ‘æ›´å€¾å‘äºä¸€ä¸ªä»…ä»…è§„å®šæ¯ä¸€éƒ¨åˆ†ä»£ç å¿…é¡»æœ‰äººå»å®¡æŸ¥çš„ç®€å•çš„ç³»ç»Ÿã€‚åœ¨å®è·µä¸­ï¼Œæ‚¨ä»ç„¶ä¼šå°†è¯„è®ºå‘é€ç»™ç›¸åº”çš„ä»£ç è´£ä»»äººï¼Œä½†æ˜¯å¥½çš„åœ°æ–¹åœ¨äºå®ƒæ²¡æœ‰ç¡¬æ€§è¦æ±‚ã€‚</p><p>è¿™æ˜¯æˆ‘è®¤ä¸ºå®¡æŸ¥ä»£ç æ˜¯æœ‰ä»·å€¼çš„æœ€å¤§çš„å‡ ç‚¹åŸå› ã€‚</p><ol><li><p>ä»ä»£ç æœ¬èº«æ¥çœ‹ï¼Œä»£ç å®¡æŸ¥æœ€æ˜æ˜¾çš„ä»·å€¼å¾€å¾€æ˜¯â€œå‘ç°é”™è¯¯â€ã€‚æˆ–è€…å¦‚æœæ‚¨å†çœ‹çš„é•¿è¿œäº›ï¼Œåœ¨é‚£äº›ä½œè€…ä¸çŸ¥é“çš„æœ€ä½³å®è·µæˆ–è€…æ½œåœ¨è§„åˆ™çš„æƒ…å†µä¸‹ï¼Œä»£ç å®¡æŸ¥è€…å¯ä»¥é€šè¿‡åé¦ˆæ¥å¸®åŠ©å®é™…çš„ä»£ç å˜å¾—æ›´å¥½ã€‚</p></li><li><p>å®è§‚å±‚é¢ä¸Šçš„çŸ¥è¯†å…±äº«ã€‚å½“æ‚¨å®¡æŸ¥å…¶ä»–äººä»£ç æ—¶ï¼Œæ‚¨å¾€å¾€ä¼šå­¦åˆ°æ–°æŠ€æœ¯ï¼Œè¿™ä¼šä½¿æ‚¨æœªæ¥æ”¶ç›Š-åä¹‹äº¦ç„¶ï¼Œå¦‚æœåœ¨æ‚¨çš„ä»£ç è¢«å®¡æŸ¥æ—¶æŸä¸ªäººå»ºè®®ä¸€ç§æ›´å¥½çš„æ–¹æ³•å»åšä¸€äº›äº‹ã€‚å¦‚æœæ‚¨å¯ä»¥æŠŠæ‚¨å­¦åˆ°çš„ä¸œè¥¿åœ¨æœªæ¥ä½¿ç”¨ï¼Œæ‚¨å°†æˆé•¿ä¸ºä¸€åå·¥ç¨‹å¸ˆã€‚</p></li><li><p>å¾®è§‚å±‚é¢ä¸Šçš„çŸ¥è¯†å…±äº«ã€‚é€šè¿‡å¢åŠ é‚£äº›ç†Ÿæ‚‰ä»»ä½•ä»£ç çš„äººå‘˜æ¥å‡è½»<a href="https://en.wikipedia.org/wiki/Bus_factor" target="_blank" rel="noopener">â€œæ€»çº¿å› ç´ â€</a>ã€‚</p></li><li><p>å…±äº«æ­£ç¡®çš„æ–¹å‘ã€‚å…¶æ¬¡ï¼Œä»£ç å®¡æŸ¥è¿«ä½¿æ‚¨ä¸é˜Ÿå‹æ²Ÿé€šæ‚¨åœ¨åšçš„äº‹æƒ…ï¼Œè¿™æœ‰åŠ©äºç¡®ä¿æ‚¨åœ¨çŸ­æ—¶é—´å†…ä¸ä¼šèµ°å‘é”™è¯¯çš„æ–¹å‘ï¼Œä»è€Œç»™ä»–ä»¬å›é€€ä»£ç çš„æœºä¼šã€‚</p></li><li><p>æ²Ÿé€šç»ƒä¹ ã€‚æ— è®ºæ˜¯åœ¨å›¢é˜Ÿå†…æˆ–è€…å›¢é˜Ÿå¤–ï¼Œæ¸…æ™°çš„æ²Ÿé€šæ˜¯æˆåŠŸå·¥ä½œæœ€é‡è¦çš„æŠ€èƒ½ä¹‹ä¸€ï¼ä»£ç å®¡æŸ¥ç»™æ‚¨ä¸€ä¸ªæœºä¼šåœ¨æ— è®ºæ˜¯åœ¨æè¿°æ›´æ”¹çš„ç›®çš„æˆ–è€…ç»™ä¸€ä¸ªåé¦ˆæ—¶å»ç»ƒä¹ æ¸…æ™°çš„å†™ä½œã€‚</p></li><li><p>å†å²è®°å½•ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå½“äººä»¬çŸ¥é“æœ‰äººåœ¨é˜…è¯»ä¿¡æ¯æ—¶ï¼Œä»–ä»¬å¾€å¾€ä¼šå†™çš„æ›´å¥½ã€‚å½“å›é¡¾æ—§çš„æ›´æ”¹è®°å½•æ—¶è¿™é€šå¸¸æ˜¯æœ‰ç”¨çš„ã€‚</p></li><li><p>å…³äºè¦è®¨è®ºçš„ä¸œè¥¿ã€‚å½“æ‚¨è¯•å›¾åŒæ„åšä»€ä¹ˆæ”¹å˜ï¼Œæœ‰æ—¶å€™å¾ˆéš¾å£å¤´æè¿°å’ŒåŒæ„çš„å…·ä½“ç»†èŠ‚æˆ–è€…ä¸€ä¸ªç‰¹å®šçš„ç®—æ³•ï¼Œé€šè¿‡ä¸€æ®µä»£ç æè¿°å¯ä»¥æ›´åŠ ç²¾ç¡®ã€‚å› ä¸ºä»£ç å¾€å¾€æ˜¯æ˜ç¡®çš„ã€‚</p></li><li><p>å›¢é˜Ÿå‡èšåŠ›ã€‚å½“æ‚¨å®šæœŸåšä»£ç å®¡æŸ¥æ—¶ï¼Œå·¥ä½œæ„Ÿè§‰æœ‰ç‚¹åƒä¸€ä¸ªå•ä¸€çš„å›¢é˜Ÿä¸€èµ·å·¥ä½œï¼Œè€Œä¸æ˜¯æ¯ä¸ªäººåœ¨è‡ªå·±çš„è½¨é“ä¸Šè¿è¡Œã€‚</p></li><li><p>é˜…è¯»ç»ƒä¹ ã€‚ç»ƒä¹ é˜…è¯»åˆ«äººçš„ä»£ç å¯ä»¥å¸®åŠ©æ‚¨è®°ä½å¦‚ä½•ä½¿è‡ªå·±çš„ä»£ç æ›´åŠ å…·æœ‰å¯è¯»æ€§ï¼ˆå¯ç»´æŠ¤æ€§ï¼‰ã€‚è¿™å°†ä¼šä½¿å¥½çš„ä»£ç åœ¨ä»¥åæ°¸è¿œæŒç»­ä¸‹å»ï¼æˆ‘è®¤ä¸º2ï¼Œ5ï¼Œ6ä¸‰ä¸ªåŸå› æ˜¯æœ€æœ‰ä»·å€¼çš„ã€‚</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.pexels.com/photos/2058172/pexels-photo-2058172.jpeg?cs=srgb&amp;amp;dl=architectural-design-architecture-building-2058172.jpg&amp;amp;fm=jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¿»è¯‘è®¡åˆ’" scheme="http://yoursite.com/categories/%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/"/>
    
    
      <category term="ä»£ç å®¡æŸ¥" scheme="http://yoursite.com/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5/"/>
    
  </entry>
  
  <entry>
    <title>Javascriptæ’åºç®—æ³•</title>
    <link href="http://yoursite.com/2019/03/05/Javascript%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>http://yoursite.com/2019/03/05/Javascriptæ’åºç®—æ³•/</id>
    <published>2019-03-05T14:50:06.000Z</published>
    <updated>2019-03-10T14:56:32.073Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.pexels.com/photos/205316/pexels-photo-205316.png?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" alt=""><br><a id="more"></a><br><a name="34fe9f5c"></a></p><h2 id="å¼€ç¯‡"><a href="#å¼€ç¯‡" class="headerlink" title="å¼€ç¯‡"></a>å¼€ç¯‡</h2><p>æ’åºæ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­éå¸¸å¸¸ç”¨çš„ä¸€ç§æ“ä½œã€‚ç›®å‰æœ€ç»å…¸çš„æ’åºç®—æ³•æœ‰åç§ï¼Œåˆ†åˆ«æ˜¯ï¼šå†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€æ’å…¥æ’åºã€å¸Œå°”æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€è®¡æ•°æ’åºã€æ¡¶æ’åºã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸¤ç§æœ€å¸¸ç”¨çš„æ’åºç®—æ³•ï¼šå†’æ³¡æ’åºå’Œå¿«é€Ÿæ’åºã€‚</p><p><a name="5d7ecc89"></a></p><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><p>å†’æ³¡æ’åºå®ç°æ€æƒ³æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·®ï¼Œé€‚åˆä½œä¸ºåŸ¹è®­æ•™å­¦ä½¿ç”¨ã€‚ä¸»è¦å®ç°æ€æƒ³æ˜¯ï¼šéå†æ•°æ®ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸åˆç¬¦æˆ‘ä»¬é¢„æœŸçš„é¡ºåºåˆ™å’Œä¸‹ä¸€ä¸ªæ•°æ®äº¤æ¢ä½ç½®ï¼Œä¾æ­¤ç±»æ¨ã€‚<br><br><img src="https://cdn.nlark.com/yuque/0/2019/gif/149846/1551170760364-233f98f8-4890-432b-9603-9a9876e86283.gif#align=left&amp;display=inline&amp;height=232&amp;originHeight=257&amp;originWidth=826&amp;size=0&amp;status=done&amp;width=746" alt=""><br><br>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äº¤æ¢æ•°ç»„å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr,n,n1</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> temp = arr[n];</span><br><span class="line">arr[n] = arr[n1];</span><br><span class="line">arr[n1] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†’æ³¡æ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=arr.length<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j=<span class="number">0</span>;j&lt;i;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j]&gt;arr[i]) &#123;</span><br><span class="line">                swap(arr,j,i)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="5ee213ee"></a></p><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><p>å¿«é€Ÿæ’åºæ˜¯å·²çŸ¥æ’åºç®—æ³•ä¸­æœ€å¿«çš„ä¹‹ä¸€ï¼Œé€‚åˆæ•°æ®é‡è¾ƒå¤§çš„æ—¶å€™ä½¿ç”¨ã€‚å…¶ä¸»è¦å®ç°æ€æƒ³æ˜¯ï¼šå…ˆå–ä¸€ä¸ªåŸºæ•°ï¼ˆä¸€èˆ¬å–æ•°æ®çš„ä¸­é—´ä½ç½®ï¼‰ï¼Œç„¶åå¯¹åŸºæ•°ä¸¤è¾¹çš„æ•°æ®åˆ†åˆ«æ’åºï¼Œæ¯”åŸºæ•°å¤§çš„æ”¾å³è¾¹ï¼Œæ¯”åŸºæ•°å°çš„æ”¾å·¦è¾¹ã€‚ä¹‹åï¼Œå¯¹å·¦å³ä¸¤è¾¹çš„æ•°æ®è¿›è¡Œä»¥ä¸Šç›¸åŒçš„æ“ä½œï¼Œç›´åˆ°å·¦å³ä¸¤è¾¹æ•°æ®ä¸ºç©ºã€‚<br><br><img src="https://cdn.nlark.com/yuque/0/2019/gif/149846/1551170760350-1d8e709f-2266-456d-967a-25ba1682e275.gif#align=left&amp;display=inline&amp;height=232&amp;originHeight=252&amp;originWidth=811&amp;size=0&amp;status=done&amp;width=746" alt=""><br><br>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¿«é€Ÿæ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> piovtIndex = <span class="built_in">Math</span>.floor(arr.length/<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span>(arr.length&lt;=<span class="number">1</span>) <span class="keyword">return</span> arr;</span><br><span class="line"><span class="keyword">let</span> piovt = arr.splice(piovtIndex,<span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> _left = []</span><br><span class="line"><span class="keyword">let</span> _right = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">let</span> item = arr[i];</span><br><span class="line"><span class="keyword">if</span>(item&lt;piovt) &#123;</span><br><span class="line">_left.push(item)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">_right.push(item)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> quickSort(_left).concat([piovt],quickSort(_right))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a name="25f9c7fa"></a></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1551170760356-3d45ea06-0a88-4fb5-9dfb-f091019e8db4.png#align=left&amp;display=inline&amp;height=504&amp;originHeight=1272&amp;originWidth=1882&amp;size=0&amp;status=done&amp;width=746" alt=""><br><br>ä¸éš¾çœ‹å‡ºï¼šä¸¤ç§ç®—æ³•ç›¸å¯¹æ¯”ä¹‹ä¸‹ï¼Œå¿«é€Ÿæ’åºçš„æ‰€ç”¨çš„æ“ä½œæ›´å°‘ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥éªŒè¯ä¸‹è¿™ä¸ªç»“è®ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _arr = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">100000</span>;i++) &#123;</span><br><span class="line">_arr.push(<span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random()*<span class="number">100</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(_arr)</span></span><br><span class="line"><span class="comment">//å¿«é€Ÿæ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> piovtIndex = <span class="built_in">Math</span>.floor(arr.length/<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span>(arr.length&lt;=<span class="number">1</span>) <span class="keyword">return</span> arr;</span><br><span class="line"><span class="keyword">let</span> piovt = arr.splice(piovtIndex,<span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> _left = []</span><br><span class="line"><span class="keyword">let</span> _right = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">let</span> item = arr[i];</span><br><span class="line"><span class="keyword">if</span>(item&lt;piovt) &#123;</span><br><span class="line">_left.push(item)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">_right.push(item)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> quickSort(_left).concat([piovt],quickSort(_right))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢æ•°ç»„å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr,n,n1</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> temp = arr[n];</span><br><span class="line">arr[n] = arr[n1];</span><br><span class="line">arr[n1] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†’æ³¡æ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=arr.length<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j=<span class="number">0</span>;j&lt;i;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j]&gt;arr[i]) &#123;</span><br><span class="line">                swap(arr,j,i)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> time1 = <span class="built_in">Date</span>.now()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = bubbleSort(_arr)</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(a)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'å†’æ³¡æ’åºç”¨æ—¶ï¼š'</span>,<span class="built_in">Date</span>.now()-time1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> time2 = <span class="built_in">Date</span>.now()</span><br><span class="line">quickSort(_arr)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'å¿«é€Ÿæ’åºç”¨æ—¶ï¼š'</span>,<span class="built_in">Date</span>.now()-time2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†’æ³¡æ’åºç”¨æ—¶ï¼š 5373</span></span><br><span class="line"><span class="comment">// å¿«é€Ÿæ’åºç”¨æ—¶ï¼š 533</span></span><br></pre></td></tr></table></figure><p>åœ¨æ•°æ®é‡ä¸º10wæ—¶ï¼Œç»“æœè¾“å‡ºä¸ºå†’æ³¡æ’åºç”¨æ—¶5373ms,å¿«é€Ÿæ’åºç”¨æ—¶533msï¼Œä¸¤è€…æ€§èƒ½ç›¸å·®10å€ä¹‹å¤šï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.pexels.com/photos/205316/pexels-photo-205316.png?auto=compress&amp;amp;cs=tinysrgb&amp;amp;dpr=2&amp;amp;h=650&amp;amp;w=940&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Javascript" scheme="http://yoursite.com/categories/Javascript/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>Expressä¸­çš„æœåŠ¡ç«¯ç¼“å­˜</title>
    <link href="http://yoursite.com/2019/02/28/express-cache/"/>
    <id>http://yoursite.com/2019/02/28/express-cache/</id>
    <published>2019-02-28T12:50:18.000Z</published>
    <updated>2019-03-05T15:30:41.928Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.pexels.com/photos/238118/pexels-photo-238118.jpeg?cs=srgb&amp;dl=computer-desk-electronics-238118.jpg&amp;fm=jpg" alt=""><br><a id="more"></a></p><blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="https://blog.bitsrc.io/server-side-caching-in-expressjs-24038daec102" target="_blank" rel="noopener">https://blog.bitsrc.io/server-side-caching-in-expressjs-24038daec102</a><br>ä½œè€…ï¼šChidume Nnamdi</p></blockquote><p>ç¼“å­˜å·²ç»æ˜¯åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­è¢«å¹¿æ³›åº”ç”¨çš„æŠ€å·§ä¹‹ä¸€ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•åœ¨ express æœåŠ¡ç«¯å¯ç”¨ç¼“å­˜ã€‚</p><h2 id="æœåŠ¡ç«¯ç¼“å­˜-åŸºæœ¬ç†å¿µ"><a href="#æœåŠ¡ç«¯ç¼“å­˜-åŸºæœ¬ç†å¿µ" class="headerlink" title="æœåŠ¡ç«¯ç¼“å­˜-åŸºæœ¬ç†å¿µ"></a>æœåŠ¡ç«¯ç¼“å­˜-åŸºæœ¬ç†å¿µ</h2><p>Web åº”ç”¨é€šå¸¸åœ¨æœåŠ¡ç«¯è·å–æ–°æ•°æ®ç„¶ååœ¨ DOM ä¸­æ¸²æŸ“ã€‚è¿™ç»™æœåŠ¡å™¨å¸¦æ¥äº†å¤§é‡çš„è´Ÿæ‹…ï¼Œå› ä¸ºå®ƒéœ€è¦å¤§é‡çš„å¤„ç†èƒ½åŠ›å–äº§ç”ŸåŠ¨æ€æ•°æ®ã€‚æµè§ˆå™¨ç«¯åˆ©ç”¨ç¼“å­˜æ¥é˜²æ­¢é¢‘ç¹çš„è¯·æ±‚ã€‚æµè§ˆå™¨æœ‰å†…éƒ¨ç¼“å­˜æœºåˆ¶æ¥å…è®¸åœ¨ç›¸åŒçš„è¯·æ±‚å‘ç”Ÿæ—¶å­˜å‚¨è¯·æ±‚çš„å“åº”å¹¶ä¸”ç”¨ç¼“å­˜çš„å“åº”æ•°æ®æ¥å“åº”è¯·æ±‚ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢æ¥è‡ªç›¸åŒè¯·æ±‚çš„é¢‘ç¹æœåŠ¡å™¨æ“ä½œã€‚</p><p>è™½ç„¶æµè§ˆå™¨æœ‰å¸®åŠ©ï¼Œä½†æ˜¯æœåŠ¡å™¨éœ€è¦ä¸ºä¸åŒçš„æµè§ˆå™¨å’Œç”¨æˆ·è¿è¡Œå’Œæ¸²æŸ“ã€‚æœåŠ¡å™¨ç«¯å¿…é¡»æ‰¾åˆ°ä¸€ç§ä¼˜åŒ–é•¿æ“ä½œçš„æ–¹æ³•ã€‚è¿™å·²ç»å¯ä»¥é€šè¿‡è¿ç”¨ç¼“å­˜æ¥åšåˆ°äº†ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ</h2><p>åœ¨æˆ‘ä»¬å¼€å§‹æ¢ç©¶æœåŠ¡å™¨ç¼“å­˜ä¹‹å‰å…ˆè®©æˆ‘ä»¬æ˜ç™½ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ<br>ç¼“å­˜çš„æ¦‚å¿µæ˜¯å­˜å‚¨ CPU å¯†é›†å‹æ“ä½œçš„ç»“æœï¼Œä»¥ä¾¿åœ¨ä¸‹æ¬¡æ‰§è¡Œå…·æœ‰ç›¸åŒè¾“å…¥åŒæ ·çš„æ“ä½œæ—¶ï¼Œç»“æœä»å‚¨å­˜ä¸­è¿”å›è€Œä¸æ˜¯é‡æ–°æ‰§è¡Œæ¶ˆè€—èµ„æºçš„æ“ä½œã€‚<br>åœ¨ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°é€šå¸¸è¢«ç¼“å­˜ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè®°å¿†åŒ–ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">longOp</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="literal">null</span></span><br><span class="line">    <span class="comment">// simulating a long operation using setTimeout</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'done with longOp func'</span>)</span><br><span class="line">        result = <span class="number">90</span> * input</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">longOp(<span class="number">5</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">50</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">500</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">5000</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line"><span class="comment">// Total ms to run: 4000 ms!</span></span><br><span class="line">longOp(<span class="number">5</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">50</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">500</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">5000</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line"><span class="comment">// Total ms to run: 4000 ms! again</span></span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šå‡½æ•°è¿è¡ŒèŠ±äº†1000ms,æˆ‘ä»¬è¯•ç€ç”¨ä¸åŒçš„è¾“å…¥è°ƒç”¨å®ƒï¼š5,50,500,5000ã€‚æˆ‘ä»¬çš„æ–‡ä»¶æ€»å…±èŠ±äº†4000mså»è¿è¡Œã€‚å†æ¬¡è¿è¡Œç›¸åŒçš„è¾“å…¥å°†åŒæ ·éœ€è¦4000msã€‚<br>ç°åœ¨ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“è¾“å‡ºä¾èµ–è¾“å…¥ return input*90ã€‚æˆ‘ä»¬å¯ä»¥å‚¨å­˜æ¯ä¸€æ¬¡è¾“å…¥äº§ç”Ÿçš„ç»“æœï¼Œå¹¶ä¸”åœ¨ä¸‹ä¸€æ¬¡åŒæ ·è¾“å…¥è°ƒç”¨æ—¶è¿”å›ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">longOp</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result  = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> cache = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(cache[input]) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[input];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            result = input * <span class="number">90</span>;</span><br><span class="line">            cache[input] = result;</span><br><span class="line">        &#125;,<span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬åœ¨ loogOp å‡½æ•°ä¸­åŠ å…¥äº†ç¼“å­˜ã€‚ç¼“å­˜å¯¹è±¡æ˜¯æˆ‘ä»¬ä¸ºæ¯ä¸€æ¬¡è¾“å…¥å‚¨å­˜è®¡ç®—ç»“æœçš„åœ°æ–¹ã€‚å½“å‡½æ•°è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬æ£€æŸ¥ç¼“å­˜å¯¹è±¡ä¸­æ˜¯å¦æœ‰ç»“æœï¼Œå¦‚æœæœ‰æˆ‘ä»¬å°†è·³è¿‡ä¸€ä¸ªé•¿æ“ä½œå¹¶è¿”å›ç»“æœï¼Œå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬æ‰§è¡Œé•¿æ“ä½œå¹¶å°†ç»“æœå­˜åˆ°ç¼“å­˜ä¸­ï¼Œç”¨è¾“å…¥ä½œä¸º key å€¼ï¼Œè¿™æ ·åœ¨ä¸‹ä¸€æ¬¡åŒæ ·è¾“å…¥çš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼“å­˜ä¸­æ‰¾åˆ°ç›¸åº”ç»“æœå¹¶è¿”å›ã€‚<br>å¦‚æœæˆ‘ä»¬å†æ¬¡è¿è¡ŒloogOpï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">longOp(<span class="number">5</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">50</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">500</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line">longOp(<span class="number">5000</span>) <span class="comment">// takes 1000 ms to complete</span></span><br><span class="line"><span class="comment">// Total ms to run: 4000 ms!</span></span><br><span class="line">longOp(<span class="number">5</span>) <span class="comment">// takes 1 ms to complete</span></span><br><span class="line">longOp(<span class="number">50</span>) <span class="comment">// takes 1 ms to complete</span></span><br><span class="line">longOp(<span class="number">500</span>) <span class="comment">// takes 1 ms to complete</span></span><br><span class="line">longOp(<span class="number">5000</span>) <span class="comment">// takes 1 ms to complete</span></span><br><span class="line"><span class="comment">// Total ms to run: 4 ms! again :)</span></span><br></pre></td></tr></table></figure></p><p>æ‚¨çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ€§èƒ½æå‡ã€‚ä»4000msåˆ°4ms,ç¬¬ä¸€æ¬¡è¿è¡Œæ²¡æœ‰ç¼“å­˜ï¼Œç¬¬äºŒæ¬¡è¿è¡Œä»…ä»…ä»ç¼“å­˜ä¸­è¿”å›äº†ç¬¬ä¸€æ¬¡è¿è¡Œçš„ç»“æœã€‚<br>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ˜ç™½äº†ç¼“å­˜çš„æ„ä¹‰ï¼Œè®©æˆ‘ä»¬ç»§ç»­ã€‚</p><blockquote><p>Tips:ç”¨<a href="https://github.com/teambit/bit" target="_blank" rel="noopener">Bit</a> åœ¨é¡¹ç›®ä¹‹é—´å…±äº«ç»„ä»¶ï¼Œå¹¶ä¸”å¯ä»¥æ›´å¿«çš„æ„å»ºJSåº”ç”¨ã€‚è¿™æ˜¯ä»repoå…±äº«åŒ…å¹¶ä¸”ä½¿ç”¨ä»–ä»¬çš„æœ€å¿«çš„æ–¹æ³•ã€‚<br><img src="https://cdn-images-1.medium.com/max/1600/1*Yhkh7jbS5Mx9uP96Y88pZg.gif" alt=""></p></blockquote><p>æˆ‘ä»¬ç»å†äº†ç›¸åŒçš„äº‹æƒ…ï¼Œå½“æˆ‘ä»¬åœ¨ç”¨ express.js :ä¸€ä¸ªå¿«é€Ÿæ­å»ºæœåŠ¡çš„ Node.js æ¡†æ¶ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåƒè¿™æ ·çš„ç´¢å¼•è·¯å¾„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="comment">// simulating a long process</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        res.send(<span class="string">'message from route /'</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªè·¯ç”±ï¼Œå®ƒå°†ä¼šè¿”å› <code>message from route /</code>æ¶ˆæ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨setTimeoutæ¨¡æ‹Ÿä¸€ä¸ªç¼“æ…¢çš„è¿›ç¨‹ã€‚è¿™å°±å¥½æ¯”å¦‚æœæˆ‘ä»¬æ˜¯ä¸€ä¸ªæ–°é—»ç½‘ç«™æœåŠ¡å™¨APIï¼Œæˆ‘ä»¬ç”Ÿæˆè¿‘åƒæ¡æ–°é—»ã€‚è¿™å°†èŠ±è´¹è¿‘1000msæ¥ä¸ºæˆ‘ä»¬çš„ç”¨æˆ·äº¤ä»˜æ–°é—»è´Ÿè½½ã€‚<br>æ¥è¯•è¯•è¿™ä¸ªï¼Œæ–°å»ºä¸€ä¸ª Node é¡¹ç›®å¹¶ä¸”å®‰è£… express æ¨¡å—ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir expr-cache-prj</span><br><span class="line">cd expr-cache-prj</span><br><span class="line">npm init -y</span><br><span class="line">npm i express</span><br><span class="line">touch index.js</span><br></pre></td></tr></table></figure></p><p>å°†ä¸‹é¢çš„å†…å®¹ç²˜è´´åˆ° index.js æ–‡ä»¶ä¸­ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir expr-cache-prj</span><br><span class="line"><span class="built_in">cd</span> expr-cache-prj</span><br><span class="line">npm init -y</span><br><span class="line">npm i express</span><br><span class="line">touch index.js</span><br></pre></td></tr></table></figure></p><p>åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ<code>node ./</code>æ¥å¯åŠ¨æœåŠ¡ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node ./</span><br><span class="line">server:3000</span><br></pre></td></tr></table></figure></p><p>æ‰“å¼€æ‚¨æœ€å–œçˆ±çš„æµè§ˆå™¨å¹¶å¯¼èˆªåˆ°<code>localhost:3000</code>ã€‚æ‰“å¼€å¼€å‘è€…å·¥å…·å¹¶åˆ‡æ¢åˆ° Network é¢æ¿ã€‚</p><p><img src="https://cdn-images-1.medium.com/max/2600/1*g2IiQF7E5wUiR-boTdbebw.png" alt=""></p><p>æ‚¨å¯ä»¥åœ¨ timeline é¢æ¿ä¸­çœ‹åˆ°æ¸²æŸ“è·¯ç”±å¤§çº¦èŠ±è´¹äº†1090ms,å› ä¸º1000ms èŠ±åœ¨äº†æœåŠ¡å“åº”ï¼Œå‰©ä¸‹çš„90mèŠ±åœ¨äº†å°†  message å†…å®¹æ¸²æŸ“ã€‚æ‚¨äº†è§£æœåŠ¡å™¨å¦‚ä½•å½±å“æˆ‘ä»¬ Web åº”ç”¨çš„æ€§èƒ½ã€‚ä¼˜åŒ–ä¸ä»…ä»…æ˜¯åœ¨å®¢æˆ·ç«¯çš„ï¼ŒæœåŠ¡å™¨çš„ä¼˜åŒ–æ›´ä¸ºé‡è¦ã€‚å¦‚æœæ‚¨çš„æœåŠ¡å™¨ç«¯åº”ç”¨éœ€è¦1000æ¯«ç§’æ¥å‘é€å®¢æˆ·ç«¯å°†é‡‡ç”¨çš„æ•°æ®ï¼ˆ1000 + 0.000001ï¼‰1000.000001æ¯«ç§’è¿›è¡Œæ¸²æŸ“ï¼Œé‚£ä¹ˆä¼˜åŒ–å®¢æˆ·ç«¯ç”šè‡³å¯ä»¥è¾¾åˆ°0.000001æ¯«ç§’ã€‚</p><p>å¦‚æœæˆ‘ä»¬å°†æ—¶é—´å¢åŠ åˆ°9000ms:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="comment">// simulating a long process</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        res.send(<span class="string">'message from route /'</span>)</span><br><span class="line">    &#125;, <span class="number">9000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://cdn-images-1.medium.com/max/2600/1*UJ5Mk5V_VBFd-ljLPi8Clw.png" alt=""></p><p>åœ¨è¿™é‡Œæ¶ˆæ¯æ¸²æŸ“èŠ±è´¹äº†9074ms,åœ¨è¿™9074msä¸­ï¼ŒæœåŠ¡å™¨å‘é€æ¶ˆæ¯èŠ±è´¹äº†9000msã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ç¼“å­˜çš„ express çš„ä¸åŒæŠ€æœ¯ï¼š</p><h2 id="ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜æŠ€æœ¯"><a href="#ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜æŠ€æœ¯" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜æŠ€æœ¯"></a>ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜æŠ€æœ¯</h2><p>åœ¨ express ä¸­ï¼Œä¸­é—´ä»¶æ˜¯æ·»åŠ ç¼“å­˜çš„ç†æƒ³æ–¹å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> middleWare1 = <span class="function">(<span class="params">req,res,next</span>)=&gt;</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> middleWare2 = <span class="function">(<span class="params">req,res,next</span>) =&gt;</span> &#123;</span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line">app.get(route,middleWare1,middleWare2)</span><br></pre></td></tr></table></figure><p>å½“è·¯ç”±è¢«è®¿é—®æ—¶ï¼Œexpress è°ƒç”¨middleWare1ï¼ŒmiddleWare1 è°ƒç”¨next ï¼Œexpress è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ middleWare2ï¼ŒmiddleWare2 è°ƒç”¨ nextï¼Œç„¶åå› ä¸ºæ²¡æœ‰æ›´å¤šçš„ä¸­é—´ä»¶å†…è”æ‰§è¡Œé€€å‡ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">expressjs</span><br><span class="line">    |</span><br><span class="line">    v</span><br><span class="line">route match</span><br><span class="line">    |</span><br><span class="line">    v</span><br><span class="line">middleWare1</span><br><span class="line">    |</span><br><span class="line">    v</span><br><span class="line">middleWare2</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æœ€åä¸€ä¸ªä¸­é—´ä»¶é‡Œå°†æ•°æ®å‘é€ç»™ç”¨æˆ·ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> middleWare1 = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    next()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> middleWare2 = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    res.send(<span class="string">'expressjs data'</span>)</span><br><span class="line">&#125;</span><br><span class="line">app.get(route, middleWare1, middleWare2)</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘ä»¬åœ¨ middleWare1 ä¸­æ·»åŠ ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å®Œç¾çš„é…åˆã€‚å®ƒå°†ä¼šé¦–å…ˆè¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ£€æŸ¥è·¯ç”±æ˜¯å¦è¢«ç¼“å­˜ã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬ä¼šä» middleWare1 å‘é€ç¼“å­˜ç»“æœï¼Œå¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°†å†’æ³¡åˆ° middleWare2.<br>åœ¨æˆ‘ä»¬ <code>/</code>è·¯ç”±ä¸­ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="comment">// simulating a long process</span></span><br><span class="line">    wait(<span class="number">1000</span>)</span><br><span class="line">    res.send(<span class="string">'message from route /'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªä¸­é—´ä»¶æ¥ä¿å­˜æˆ‘ä»¬çš„ç¼“å­˜ä»£ç ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cache = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> middware = <span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> key = req.url;</span><br><span class="line">    <span class="keyword">if</span>(cache[key]) &#123;</span><br><span class="line">        res.send(<span class="string">'from cache'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.sendResponse = res.send;</span><br><span class="line">        res.send = <span class="function">(<span class="params">body</span>)=&gt;</span>&#123;</span><br><span class="line">            cache[key] = body;</span><br><span class="line">            res.sendResponse(body);</span><br><span class="line">        &#125;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">app.get(<span class="string">'/'</span>,middleware,(req,res)=&gt;&#123;</span><br><span class="line">    wait(<span class="number">1000</span>);</span><br><span class="line">    res.send(<span class="string">'message from route /'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬åˆ›å»ºäº†ä¸­é—´ä»¶ middlewareã€‚æˆ‘ä»¬åˆ›å»ºäº†å­˜æ”¾ç¼“å­˜ç»“æœçš„å¯¹è±¡ã€‚åœ¨ middleware å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ç”¨è¯·æ±‚çš„è·¯å¾„ä½œä¸ºé”®ã€‚é¦–å…ˆæˆ‘ä»¬æ£€æŸ¥åŸºäºè¯·æ±‚çš„è·¯å¾„çš„ key åœ¨ç¼“å­˜å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬å‘é€ä»ç¼“å­˜ä¸­å‘é€å“åº”ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬åœ¨ç¼“å­˜å¯¹è±¡ä¸­å‚¨å­˜è¯·æ±‚ä½“å¹¶ä¸”å‘é€å“åº”ä»¥ä¾¿ä¸‹ä¸€æ¬¡è¯·æ±‚å¯ä»¥ç›´æ¥æå–ç¼“å­˜æ•°æ®ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨æœåŠ¡ç«¯è¿è¡Œä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å°†åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°æ”¹è¿›ï¼š</p><p><img src="https://cdn-images-1.medium.com/max/2600/1*OdfINqOXN690s6_Meea5Tg.png" alt=""></p><p>çœ‹åˆ°äº†æ²¡ï¼Œæµè§ˆå™¨èŠ±äº†23msæ¥æ¸²æŸ“ã€‚æ˜¯æˆ‘ä»¬ä¸Šä¸€æ¬¡çš„ä¸€åŠå¤šã€‚<br>æˆ‘ä»¬å·²ç»æ˜ç™½æ¥æ€ä¹ˆåœ¨ express æœåŠ¡ä¸­æ·»åŠ ç¼“å­˜ã€‚æˆ‘ä»¬ä¸Šé¢åšçš„æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š</p><ol><li>æˆ‘ä»¬å°†ç¼“å­˜å­˜å‚¨åœ¨è¿›ç¨‹ä¸­ï¼Œä¸€æ—¦æˆ‘ä»¬çš„æœåŠ¡æŒ‚æ‰ï¼Œæˆ‘ä»¬å°†ä»å¤´å¼€å§‹ç¼“å­˜ã€‚</li><li>ç¼“å­˜ä¸èƒ½åœ¨åŒä¸€è¿›ç¨‹ä¸­å¤šæ•°æœåŠ¡ä¸­å…±äº«ã€‚</li></ol><p>NB ç¼“å­˜åœ¨getç±»å‹è·¯ç”±æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ä¸èƒ½ç”¨åœ¨ put,delete,post è·¯ç”±ä¸­ã€‚å½“è¾“å‡ºä¾èµ–ä¸è¾“å…¥æ—¶ï¼Œåœ¨getè·¯ç”±æ‰èƒ½æ·»åŠ ç¼“å­˜ã€‚getè·¯ç”±å‰¯ä½œç”¨æ°¸è¿œä¸åº”è¯¥è¢«ç¼“å­˜ï¼Œå› ä¸ºè¾“å‡ºä¼šéšç€æ—¶é—´è€Œå˜åŒ–ã€‚</p><h2 id="é‡‡ç”¨Redis"><a href="#é‡‡ç”¨Redis" class="headerlink" title="é‡‡ç”¨Redis"></a>é‡‡ç”¨Redis</h2><p><em>Redisæ˜¯ä¸€ä¸ªéä¼ ç»Ÿæ•°æ®åº“ï¼Œè¢«ç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ã€‚å®ƒå¯ä»¥åœ¨å†…å­˜ä¸­ä»¥æå¿«çš„é€Ÿåº¦è¿è¡Œã€‚</em><br>Redis åœ¨å†…å­˜å­˜å‚¨æ•°æ®æ–¹é¢éå¸¸å¼ºå¤§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ç”¨å®ƒåšæ•°æ®ç¼“å­˜æˆ–è€…æ•°æ®åº“ã€‚å®ƒä¸»è¦çš„AIPç”±<code>set(key,value)</code>å’Œ<code>get(key)</code>ç»„æˆã€‚ä¸ºäº†åœ¨æˆ‘ä»¬å·²æœ‰çš„åº”ç”¨ä¸­æ•´åˆ Redisï¼Œæˆ‘ä»¬å¼€å§‹å®‰è£…Redisæ¨¡å—ã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»¬å®‰è£…Redis npm æ¨¡å—ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i redis</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Redis æ¨¡å—å¹¶ä¸”å’Œ Redis æœåŠ¡å»ºç«‹äº†ğŸ”—ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> redis = <span class="built_in">require</span>(<span class="string">'redis'</span>);</span><br><span class="line"><span class="keyword">const</span> client = redis.createClient()</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬åƒè¿™æ ·ç¼–è¾‘ exp.jsï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> redis = <span class="built_in">require</span>(<span class="string">'redis'</span>);</span><br><span class="line"><span class="keyword">const</span> client = redis.createClient()</span><br><span class="line">client.on(<span class="string">'connect'</span>,()=&gt;&#123;</span><br><span class="line">    log(<span class="string">'redis connected'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> log = <span class="built_in">console</span>;</span><br><span class="line"><span class="keyword">var</span> midWare = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = req.url</span><br><span class="line">    client.get(key, (err, result) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err == <span class="literal">null</span> &amp;&amp; result != <span class="literal">null</span>) &#123;</span><br><span class="line">            res.send(<span class="string">'from cache'</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.sendResponse = res.send</span><br><span class="line">            res.send = <span class="function">(<span class="params">body</span>) =&gt;</span> &#123;</span><br><span class="line">                client.set(key, body, (err, reply) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (reply == <span class="string">'OK'</span>)</span><br><span class="line">                        res.sendResponse(body)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            next()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">app.get(<span class="string">'/'</span>, midWare, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="comment">// simulating a long process</span></span><br><span class="line">    wait(<span class="number">1000</span>)</span><br><span class="line">    res.send(<span class="string">'message from route /'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>å’Œä¸Šé¢çš„ä»£ç ä¸€æ ·ï¼Œæˆ‘ä»¬åªæ˜¯æ”¹ä¸ºç”¨ Redis æ›¿ä»£ã€‚<code>client.get(key,cb)</code>å‚è€ƒä¼ å…¥çš„å¯†é’¥ä»å­˜å‚¨ä¸­æ£€ç´¢å‚¨å­˜çš„å€¼ã€‚</p><h2 id="é‡‡ç”¨Memcached"><a href="#é‡‡ç”¨Memcached" class="headerlink" title="é‡‡ç”¨Memcached"></a>é‡‡ç”¨Memcached</h2><p>ä½¿ç”¨Memcachedï¼Œæˆ‘ä»¬å°†å®‰è£… memjs npm æ¨¡å—ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i memjs</span><br></pre></td></tr></table></figure></p><p>å¹¶åœ¨æˆ‘ä»¬çš„exp.jsä¸­é…ç½®å®ƒ:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memjs = <span class="built_in">require</span>(<span class="string">'memjs'</span>)</span><br><span class="line"><span class="keyword">const</span> mc = memjs.Client.create()</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> log = <span class="built_in">console</span></span><br><span class="line"><span class="keyword">var</span> midWare = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = req.url</span><br><span class="line">    mc.get(key, (err, val) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err == <span class="literal">null</span> &amp;&amp; val != <span class="literal">null</span>) &#123;</span><br><span class="line">            res.send(<span class="string">'from cache'</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.sendResponse = res.send</span><br><span class="line">            res.send = <span class="function">(<span class="params">body</span>) =&gt;</span> &#123;</span><br><span class="line">                mc.set(key, body, &#123; <span class="attr">expires</span>: <span class="number">0</span> &#125;, (err, reply) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (reply == <span class="string">'OK'</span>)</span><br><span class="line">                        res.sendResponse(body)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            next()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">app.get(<span class="string">'/'</span>, midWare, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="comment">// simulating a long process</span></span><br><span class="line">    wait(<span class="number">1000</span>)</span><br><span class="line">    res.send(<span class="string">'message from route /'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ä¸ Redis ç›¸åŒï¼Œå”¯ä¸€æ”¹å˜çš„æ˜¯å®¢æˆ·ç«¯åˆ° mcã€‚ Redis å’Œ Memcached å…·æœ‰å‡ ä¹ç›¸åŒçš„ APIï¼Œå…·æœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>æˆ‘ä»¬çœ‹åˆ° expressjs ä¸­çš„æœåŠ¡å™¨ç«¯ç¼“å­˜æ˜¯ä»€ä¹ˆä»¥åŠå¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰ä»£ç é…ç½®ä¸€ä¸ªã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Redis å’Œ Memcached å°†ç¼“å­˜æ·»åŠ åˆ° expressjs æœåŠ¡å™¨ã€‚</p><p>ç¼“å­˜æ˜¯æˆ‘ä»¬åŠ é€Ÿåº”ç”¨ç¨‹åºå°¤å…¶æ˜¯æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºçš„æœ€ä½³ä¼˜åŒ–æŠ€å·§ä¹‹ä¸€ã€‚è®¸å¤šäººç§°å®ƒä¸ºä¸åŒçš„åç§°ï¼šmemoizationï¼Œè¿™ä¸€åˆ‡éƒ½å½’ç»“ä¸ºç¼“å­˜çš„ç›¸åŒæƒ³æ³•ã€‚</p><p>å¦‚æœæ‚¨å¯¹æ­¤æˆ–æˆ‘åº”è¯¥æ·»åŠ ã€æ›´æ­£æˆ–åˆ é™¤çš„ä»»ä½•é—®é¢˜æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶åœ¨ä¸‹é¢å‘è¡¨è¯„è®ºå¹¶å‘æˆ‘è¯¢é—®ä»»ä½•é—®é¢˜ï¼è°¢è°¢ ï¼ï¼ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.pexels.com/photos/238118/pexels-photo-238118.jpeg?cs=srgb&amp;amp;dl=computer-desk-electronics-238118.jpg&amp;amp;fm=jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¿»è¯‘è®¡åˆ’" scheme="http://yoursite.com/categories/%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/"/>
    
    
      <category term="express" scheme="http://yoursite.com/tags/express/"/>
    
      <category term="nodejs" scheme="http://yoursite.com/tags/nodejs/"/>
    
      <category term="cache" scheme="http://yoursite.com/tags/cache/"/>
    
      <category term="server" scheme="http://yoursite.com/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>JavascriptåŸå‹é“¾</title>
    <link href="http://yoursite.com/2019/02/21/javascript/"/>
    <id>http://yoursite.com/2019/02/21/javascript/</id>
    <published>2019-02-21T14:08:51.000Z</published>
    <updated>2019-03-31T13:00:24.853Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.unsplash.com/photo-1489875347897-49f64b51c1f8?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80" alt=""><br><a id="more"></a></p><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p>åœ¨ Javascript ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ¥å£°æ˜ä¸€ä¸ªç±»ï¼Œç„¶ååˆ©ç”¨newå…³é”®è¯å®ä¾‹åŒ–ç±»ã€‚åœ¨æ„é€ å‡½æ•°ä¸­ï¼ŒthisæŒ‡å‘æ¥è¯¥æ„é€ å‡½æ•°æœ¬èº«ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person(<span class="string">"Lily"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person.name) <span class="comment">//Lily</span></span><br><span class="line">person.move()</span><br></pre></td></tr></table></figure></p><h2 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h2><p>prototype æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºè®©æ‰€æœ‰çš„å®ä¾‹å…±äº«å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚åœ¨ä¸Šé¢çš„ğŸŒ°ä¸­ï¼Œæˆ‘ä»¬åœ¨ Person çš„prototypeä¸­æ·»åŠ äº† move æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥è®©æ‰€æœ‰çš„ Person å®ä¾‹éƒ½ç»§æ‰¿è¿™ä¸ªæ–¹æ³•ã€‚</p><h2 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a>__proto__</h2><p><strong>proto</strong> æ˜¯å„ä¸ªæµè§ˆå™¨å‚å•†å®ç°çš„éæ ‡å‡† Javascript å±æ€§ã€‚å®ƒæŒ‡å‘æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡.ä¾‹å¦‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span>js</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person(<span class="string">"Lily"</span>)</span><br><span class="line">person.__proto__ === Person.prototype <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><h2 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h2><p>æ¯ä¸€ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ä¸Šé¢éƒ½ä¼šæœ‰ constructor å¯¹è±¡ï¼Œå®ƒæŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«ï¼Œç”¨ä»£ç æ¥è¡¨ç¤ºå°±æ˜¯è¿™æ ·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span></span>&#123;&#125;</span><br><span class="line">Person.prototype.constructor === Person</span><br></pre></td></tr></table></figure></p><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span></span>&#123;&#125;</span><br><span class="line">Person.prototype = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person()</span><br><span class="line">person.name</span><br></pre></td></tr></table></figure><p>åœ¨ Javascriptä¸­ï¼Œå¦‚æœæˆ‘ä»¬è®¿é—®å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œç³»ç»Ÿå°†å…ˆä¼šåœ¨è¯¥å¯¹è±¡ä¸Šæ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šåœ¨è¯¥å¯¹è±¡çš„<strong>proto</strong> å¯¹è±¡ä¸Šç»§ç»­æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ä¼šç»§ç»­å¾€ä¸Šå±‚æ‰¾ï¼Œå³ Person.prototype.<strong>proto</strong>,ç›´åˆ°æœ€ä¸Šå±‚ï¼Œç³»ç»Ÿä¼šæ‰¾åˆ° Object.prototype,<br>Person.prototyoe.<strong>proto</strong> === Object.prototype,æˆ‘ä»¬æˆ–è®¸ä¼šé—®ï¼ŒObject.prototype.<strong>proto</strong> åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®æ˜¯ null ã€‚è¿™æ ·å°±å½¢æˆä¸€æ¡å®Œæ•´çš„åŸå‹é“¾ã€‚</p><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>Javascriptä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ–¹æ³•å°±æ˜¯åŸå‹é“¾ç»§æ‰¿äº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype);</span><br><span class="line">Student.prototype.constructor = Student;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿å¤šä¸ªçˆ¶ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperClass</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">OtherSuperClass</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ChildClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    SuperClass.call(<span class="keyword">this</span>);</span><br><span class="line">    OtherClass.call(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">ChildClass.prototype = <span class="built_in">Object</span>.create(SuperClass.prototype)</span><br><span class="line"><span class="built_in">Object</span>.assign(SuperClass.prototype,OtherSuperClass.prototype)</span><br><span class="line">ChildClass.prototype.constructor = ChildClass;</span><br></pre></td></tr></table></figure></p><p>ç›¸ä¿¡ä½ çœ‹å®Œä¸Šé¢å…³äºåŸå‹çš„ä»‹ç»å¾ˆå¿«å°±ä¼šæ˜ç™½ä¸Šé¢ç»§æ‰¿çš„åŸç†ï¼šå­ç±»ç»§æ‰¿å¹¶ä¸”é‡å†™çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§ï¼Œè€Œåˆä¸ä¼šå½±å“çˆ¶ç±»ã€‚è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨ Object.create æ–¹æ³•ã€‚</p><h2 id="newå…³é”®å­—"><a href="#newå…³é”®å­—" class="headerlink" title="newå…³é”®å­—"></a>newå…³é”®å­—</h2><p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ new å…³é”®å­—å®ä¾‹åŒ–Javascriptå¯¹è±¡ï¼Œåœ¨newçš„è¿‡ç¨‹ä¸­å…¶å®å‘ç”Ÿäº†å¦‚ä¸‹è¿‡ç¨‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">person = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="comment">/**ç­‰åŒäº*/</span></span><br><span class="line">person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">person.__proto__  = Person.protoype;</span><br><span class="line">Person.call(person)</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢è¿‡ç¨‹å¯ä»¥ç®€å•æè¿°ä¸ºï¼Œå…ˆåˆ›å»ºä¸€ä¸ª Object å®ä¾‹ï¼Œç„¶åå°†è¯¥å®ä¾‹çš„ <strong>protot</strong> å±æ€§æŒ‡å‘Person.prototype ,æœ€åå†å°† this æŒ‡é’ˆæŒ‡å‘ Personï¼Œä¸æ˜¯åˆšå¥½ç¬¦åˆæˆ‘ä»¬ä¸Šé¢æ‰€æè¿°çš„é‚£æ ·å—ï¼Ÿ</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Javascript åŸºäºåŸå‹é“¾çš„è®¾è®¡è®©æˆ‘ä»¬ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯åŒæ—¶åŸå‹é“¾å¯¹äº Javascript åˆå­¦è€…æ¥è¯´ç›¸å¯¹æ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œåœ¨å¹³å¸¸çš„å·¥ä½œå’Œå­¦äº›è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€å®šè¦ç‰¢å›ºæŒæ¡åŸºç¡€çŸ¥è¯†ï¼Œå¤šå¤šç§¯ç´¯çŸ¥è¯†å’Œç»éªŒï¼Œè¿™æ ·æ‰èƒ½ä»å®¹é¢å¯¹å·¥ä½œä¸­é‡åˆ°çš„éš¾é¢˜ã€‚</p><!--## classåœ¨å…¶å®ƒè¯­è¨€ä¸­ï¼Œç±»é€šå¸¸æ˜¯é€šè¿‡classå…³é”®è¯è¿›è¡Œåˆ›å»ºçš„ã€‚åœ¨ES6ä¸­ï¼ŒJavascriptä¹Ÿå¢åŠ ç±»ä¼¼çš„ç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡classå…³é”®è¯æ¥å£°æ˜ä¸€ä¸ªç±»ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    more() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'move'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> Person(<span class="string">"Jack"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person.name) <span class="comment">//Jack</span></span><br><span class="line">person.move()<span class="comment">//move</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨classå£°æ˜ç±»ä¸€ä¸ªPersonç±»ï¼Œå¹¶ç»™Personä¸­æ·»åŠ nameå±æ€§å’Œmoveæ–¹æ³•ã€‚<br>â€“&gt;</p>-->]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.unsplash.com/photo-1489875347897-49f64b51c1f8?ixlib=rb-1.2.1&amp;amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;amp;auto=format&amp;amp;fit=crop&amp;amp;w=1350&amp;amp;q=80&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Javascript" scheme="http://yoursite.com/categories/Javascript/"/>
    
    
      <category term="Javascript" scheme="http://yoursite.com/tags/Javascript/"/>
    
      <category term="åŸå‹é“¾" scheme="http://yoursite.com/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>D3å®˜æ–¹ç½‘ç«™é¦–é¡µç¿»è¯‘</title>
    <link href="http://yoursite.com/2019/02/18/d3-translate/"/>
    <id>http://yoursite.com/2019/02/18/d3-translate/</id>
    <published>2019-02-18T15:05:02.000Z</published>
    <updated>2019-02-18T15:14:56.741Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://d3js.org.cn/home.png" alt=""><br><a id="more"></a><br><!--D3.js is a JavaScript library for manipulating documents based on data. D3 helps you bring data to life using HTML, SVG, and CSS. D3â€™s emphasis on web standards gives you the full capabilities of modern browsers without tying yourself to a proprietary framework, combining powerful visualization components and a data-driven approach to DOM manipulation.--></p><p>D3.js æ˜¯ä¸€ä¸ªåŸºäºæ•°æ®æ¥æ“ä½œæ–‡æ¡£çš„çš„ Javascript åº“ã€‚D3 å¸®åŠ©æ‚¨ä½¿ç”¨ HTML,SVG å’Œ CSS æ¥ä½¿æ•°æ®æ ©æ ©å¦‚ç”Ÿã€‚D3 åœ¨ web æ ‡å‡†ä¸Šçš„é‡ç‚¹åœ¨äºä¸ç”¨è‡ªå·±ç§æœ‰çš„æ¡†æ¶å°±å¯ä»¥ç»™ä¸ä½ ç°ä»£æµè§ˆå™¨å®Œæ•´çš„ç»“åˆäº†å¼ºå¤§çš„ DOM æ“ä½œå¯è§†åŒ–ç»„ä»¶å’Œæ•°æ®é©±åŠ¨æ–¹å¼çš„åŠŸèƒ½ã€‚</p><!--Download the latest version (5.9.1) here:--><p>æœ€æ–°ç‰ˆæœ¬ï¼ˆ5.9.1ï¼‰åœ¨è¿™é‡Œä¸‹è½½ï¼š</p><ul><li><a href="https://github.com/d3/d3/releases/download/v5.9.1/d3.zip" target="_blank" rel="noopener">D3.zip</a></li></ul><!--To link directly to the latest release, copy this snippet:--><p>å¤åˆ¶ä¸‹é¢è¿™æ®µå†…å®¹æ¥ç›´æ¥é“¾æ¥åˆ°æœ€æ–°å‘å¸ƒçš„ç‰ˆæœ¬ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://d3js.org/d3.v5.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><!--The full source and tests are also available for download on GitHub.--><p>å®Œæ•´çš„èµ„æºå’Œæµ‹è¯•ä¹Ÿå¯ä»¥åœ¨ Github ä¸Šä¸‹è½½ã€‚</p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><!--Read more tutorials.--><!--D3 allows you to bind arbitrary data to a Document Object Model (DOM), and then apply data-driven transformations to the document. For example, you can use D3 to generate an HTML table from an array of numbers. Or, use the same data to create an interactive SVG bar chart with smooth transitions and interaction.--><p>D3 å…è®¸æ‚¨ç»‘å®šä»»æ„æ•°æ®åˆ° DOM å¯¹è±¡ä¸Šï¼Œå¹¶ä¸”ç„¶ååº”ç”¨æ•°æ®é©±åŠ¨è½¬æ¢åˆ°æ–‡æ¡£ä¸Šã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç”¨ D3 ä»ä¸€ä¸ªæ•°ç»„ ç”Ÿæˆä¸€ä¸ª HTML è¡¨æ ¼ã€‚æˆ–è€…ç”¨ç›¸åŒçš„æ•°æ®åˆ›å»ºæ ©æ ©å¦‚ç”Ÿçš„ SVG æŸ±çŠ¶å›¾ã€‚<a href="https://github.com/d3/d3/wiki/Tutorials" target="_blank" rel="noopener">é˜…è¯»æ›´å¤šçš„æ•™ç¨‹</a></p><!--D3 is not a monolithic framework that seeks to provide every conceivable feature. Instead, D3 solves the crux of the problem: efficient manipulation of documents based on data. This avoids proprietary representation and affords extraordinary flexibility, exposing the full capabilities of web standards such as HTML, SVG, and CSS. With minimal overhead, D3 is extremely fast, supporting large datasets and dynamic behaviors for interaction and animation. D3â€™s functional style allows code reuse through a diverse collection of official and community-developed modules.--><p>D3ä¸æ˜¯ä¸€ä¸ªå•ç‹¬åŠ›æ±‚æä¾›æ‰€æœ‰å¯æƒ³åˆ°çš„åŠŸèƒ½çš„æ¡†æ¶ã€‚ç›¸åï¼ŒD3è§£å†³äº†é—®é¢˜çš„å…³é”®ï¼šåŸºäºæ•°æ®é«˜æ•ˆçš„æ–‡æ¡£æ“ä½œã€‚è¿™é¿å…äº†ä¸“æœ‰çš„è¡¨ç¤ºï¼Œå¹¶æä¾›äº†éå‡¡çš„çµæ´»æ€§ï¼Œæš´éœ²äº†HTMLï¼ŒSVGå’ŒCSSç­‰Webæ ‡å‡†çš„å…¨éƒ¨åŠŸèƒ½ã€‚ D3 çš„å¼€é”€æå°ï¼Œæ”¯æŒå¤§å‹æ•°æ®é›†å’Œäº¤äº’åŠ¨ç”»çš„åŠ¨æ€è¡Œä¸ºã€‚<br>D3 çš„å‡½æ•°å¼é£æ ¼å…è®¸é€šè¿‡å®˜æ–¹å’Œå„ç§ç¤¾åŒºå¼€å‘çš„æ¨¡å—å¤ç”¨ä»£ç ã€‚</p><!--#Selections--><h1 id="é€‰æ‹©é›†"><a href="#é€‰æ‹©é›†" class="headerlink" title="é€‰æ‹©é›†"></a>é€‰æ‹©é›†</h1><!--Read more about selections.--><p>Modifying documents using the W3C DOM API is tedious: the method names are verbose, and the imperative approach requires manual iteration and bookkeeping of temporary state. For example, to change the text color of paragraph elements:</p><p>ä½¿ç”¨W3C DOM APIä¿®æ”¹æ–‡æ¡£éå¸¸ç¹çï¼šæ–¹æ³•åç§°å†—é•¿ï¼Œå‘½ä»¤å¼æ–¹æ³•éœ€è¦æ‰‹åŠ¨è¿­ä»£å’Œä¸´æ—¶çŠ¶æ€ç¼“å­˜ã€‚ä¾‹å¦‚ï¼Œæ”¹å˜ä¸€ä¸ªæ®µè½æ ‡ç­¾çš„å­—ä½“é¢œè‰²ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> paragraphs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; paragraphs.length; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> paragraph = paragraphs.item(i);</span><br><span class="line">  paragraph.style.setProperty(<span class="string">"color"</span>, <span class="string">"white"</span>, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><!--D3 employs a declarative approach, operating on arbitrary sets of nodes called selections. For example, you can rewrite the above loop as:--><p>D3é‡‡ç”¨å£°æ˜å¼æ–¹æ³•ï¼Œè¿è¡Œåœ¨é€‰ä¸­çš„ä»»æ„èŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†ä¸Šé¢çš„å¾ªç¯é‡å†™ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d3.selectAll(<span class="string">"p"</span>).style(<span class="string">"color"</span>, <span class="string">"white"</span>);</span><br></pre></td></tr></table></figure><!--Yet, you can still manipulate individual nodes as needed:--><p>è€Œä¸”ï¼Œæ‚¨ä»ç„¶å¯ä»¥æ ¹æ®éœ€è¦æ“ä½œå•ä¸ªèŠ‚ç‚¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d3.select(<span class="string">"body"</span>).style(<span class="string">"background-color"</span>, <span class="string">"black"</span>);</span><br></pre></td></tr></table></figure><!--Selectors are defined by the W3C Selectors API and supported natively by modern browsers. The above examples select nodes by tag name ("p" and "body", respectively). Elements may be selected using a variety of predicates, including containment, attribute values, class and ID.--><p>é€‰æ‹©å™¨ç”±W3C Selectors APIå®šä¹‰ï¼Œå¹¶ç”±ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒã€‚ä»¥ä¸Šä¾‹å­é€šè¿‡æ ‡ç­¾åç§°ï¼ˆp å’Œ bodyï¼‰è·å–èŠ‚ç‚¹ã€‚å¯ä»¥ä½¿ç”¨å„ç§ç§°è°“æ¥é€‰æ‹©å…ƒç´ ï¼Œæ¯”å¦‚å±æ€§ï¼Œç±»åå’Œ IDã€‚</p><!--D3 provides numerous methods for mutating nodes: setting attributes or styles; registering event listeners; adding, removing or sorting nodes; and changing HTML or text content. These suffice for the vast majority of needs. Direct access to the underlying DOM is also possible, as each D3 selection is simply an array of nodes.--><p>D3 æä¾›äº†è®¸å¤šæ”¹å˜èŠ‚ç‚¹çš„æ–¹æ³•ï¼šè®¾ç½®å±æ€§æˆ–æ ·å¼ã€æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ã€æ·»åŠ ï¼Œåˆ é™¤æˆ–è€…æ’åºèŠ‚ç‚¹ã€æ”¹å˜ HTML æˆ–è€…æ–‡å­—å†…å®¹ã€‚è¿™äº›å¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°çš„éœ€æ±‚ã€‚ç›´æ¥è®¿é—® DOM åº•å±‚ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºæ¯ä¸€ä¸ª D3 é€‰æ‹©é›†åˆéƒ½æ˜¯ç®€å•çš„åŸç”ŸèŠ‚ç‚¹æ•°ç»„ã€‚</p><!--#Dynamic Properties--><h1 id="åŠ¨æ€å±æ€§"><a href="#åŠ¨æ€å±æ€§" class="headerlink" title="åŠ¨æ€å±æ€§"></a>åŠ¨æ€å±æ€§</h1><!--Readers familiar with other DOM frameworks such as jQuery should immediately recognize similarities with D3. Yet styles, attributes, and other properties can be specified as functions of data in D3, not just simple constants. Despite their apparent simplicity, these functions can be surprisingly powerful; the d3.geoPath function, for example, projects geographic coordinates into SVG path data. D3 provides many built-in reusable functions and function factories, such as graphical primitives for area, line and pie charts.--><p>ç†Ÿæ‚‰å…¶ä»–DOMæ¡†æ¶ï¼ˆå¦‚jQueryï¼‰çš„è¯»è€…åº”ç«‹å³è®¤è¯†åˆ°ä¸ D3 çš„ç›¸ä¼¼ä¹‹å¤„ã€‚æ ·å¼ï¼Œå±æ€§å’Œå…¶ä»–å±æ€§å¯ä»¥æŒ‡å®šä¸ºD3ä¸­çš„æ•°æ®å‡½æ•°ï¼Œä¸ä»…ä»…æ˜¯ç®€å•çš„å¸¸æ•°ã€‚å°½ç®¡å®ƒä»¬æ˜¾è€Œæ˜“è§ï¼Œä½†è¿™äº›åŠŸèƒ½å¯ä»¥ä»¤äººæƒŠè®¶åœ°å¼ºå¤§;ä¾‹å¦‚ï¼Œd3.geoPath å‡½æ•°å°†åœ°ç†åæ ‡æŠ•å½±åˆ°SVGè·¯å¾„æ•°æ®ä¸­ã€‚D3æä¾›äº†è®¸å¤šå†…ç½®çš„å¯é‡ç”¨å‡½æ•°å’Œå‡½æ•°å·¥å‚ï¼Œä¾‹å¦‚é¢ç§¯å›¾ï¼Œçº¿å›¾å’Œé¥¼å›¾çš„å›¾å½¢åŸºå…ƒã€‚</p><!--For example, to randomly color paragraphs:--><p>ä¾‹å¦‚ï¼Œç»™æ®µè½æ ‡ç­¾è®¾ç½®éšæœºé¢œè‰²ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d3.selectAll(<span class="string">"p"</span>).style(<span class="string">"color"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"hsl("</span> + <span class="built_in">Math</span>.random() * <span class="number">360</span> + <span class="string">",100%,50%)"</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><!--To alternate shades of gray for even and odd nodes:--><p>ä¸ºå¶æ•°å’Œå¥‡æ•°èŠ‚ç‚¹äº¤æ›¿ç°åº¦é˜´å½±ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d3.selectAll(<span class="string">"p"</span>).style(<span class="string">"color"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> i % <span class="number">2</span> ? <span class="string">"#fff"</span> : <span class="string">"#eee"</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><!--Computed properties often refer to bound data. Data is specified as an array of values, and each value is passed as the first argument (d) to selection functions. With the default join-by-index, the first element in the data array is passed to the first node in the selection, the second element to the second node, and so on. For example, if you bind an array of numbers to paragraph elements, you can use these numbers to compute dynamic font sizes:--><p>è®¡ç®—å±æ€§é€šå¸¸å¼•ç”¨ç»‘å®šæ•°æ®ã€‚æ•°æ®è¢«æŒ‡å®šä¸ºæ•°å€¼æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆdï¼‰ä¼ é€’ç»™é€‰æ‹©å‡½æ•°ã€‚ä½¿ç”¨é»˜è®¤çš„join-by-indexï¼Œæ•°æ®æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¼ é€’ç»™é€‰æ‹©ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¼ é€’ç»™ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†æ•°å­—æ•°ç»„ç»‘å®šåˆ°æ®µè½å…ƒç´ ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¿™äº›æ•°å­—æ¥è®¡ç®—åŠ¨æ€å­—ä½“å¤§å°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d3.selectAll(<span class="string">"p"</span>)</span><br><span class="line">  .data([<span class="number">4</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">42</span>])</span><br><span class="line">    .style(<span class="string">"font-size"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d + <span class="string">"px"</span>; &#125;);</span><br></pre></td></tr></table></figure><!--Once the data has been bound to the document, you can omit the data operator; D3 will retrieve the previously-bound data. This allows you to recompute properties without rebinding.--><p>ä¸€æ—¦æ•°æ®ç»‘å®šåˆ°æ–‡æ¡£ï¼Œæ‚¨å¯ä»¥çœç•¥æ•°æ®è¿ç®—ç¬¦; D3å°†æ£€ç´¢å…ˆå‰ç»‘å®šçš„æ•°æ®ã€‚è¿™å…è®¸æ‚¨åœ¨ä¸é‡æ–°ç»‘å®šçš„æƒ…å†µä¸‹é‡æ–°è®¡ç®—å±æ€§ã€‚</p><h1 id="Enter-and-Exit"><a href="#Enter-and-Exit" class="headerlink" title="Enter and Exit"></a>Enter and Exit</h1><!--Using D3â€™s enter and exit selections, you can create new nodes for incoming data and remove outgoing nodes that are no longer needed.--><p>ä½¿ç”¨D3çš„ enter å’Œ exit ï¼Œæ‚¨å¯ä»¥ä¸ºä¼ å…¥æ•°æ®åˆ›å»ºæ–°èŠ‚ç‚¹å¹¶åˆ é™¤ä¸å†éœ€è¦çš„ä¼ å‡ºèŠ‚ç‚¹ã€‚</p><!--When data is bound to a selection, each element in the data array is paired with the corresponding node in the selection. If there are fewer nodes than data, the extra data elements form the enter selection, which you can instantiate by appending to the enter selection. For example:--><p>å½“æ•°æ®è¢«ç»‘å®šåˆ°é€‰æ‹©é›†ä¸­ï¼Œåœ¨æ•°æ®æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸é€‰æ‹©é›†ä¸­å¯¹åº”èŠ‚ç‚¹é…å¯¹ã€‚å¦‚æœèŠ‚ç‚¹æ•°é‡å°‘äºæ•°æ®ï¼Œå¤šä½™çš„ data å…ƒç´ å°†ä¼šä¼ å…¥ enter é€‰æ‹©é›†, æ‚¨å¯ä»¥é€šè¿‡è¿½åŠ å¤šä½™é€‰æ‹©é›†æ¥å®ä¾‹åŒ–ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d3.select(<span class="string">"body"</span>)</span><br><span class="line">  .selectAll(<span class="string">"p"</span>)</span><br><span class="line">  .data([<span class="number">4</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">42</span>])</span><br><span class="line">  .enter().append(<span class="string">"p"</span>)</span><br><span class="line">    .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> <span class="string">"Iâ€™m number "</span> + d + <span class="string">"!"</span>; &#125;);</span><br></pre></td></tr></table></figure></p><!--Updating nodes are the default selectionâ€”the result of the data operator. Thus, if you forget about the enter and exit selections, you will automatically select only the elements for which there exists corresponding data. A common pattern is to break the initial selection into three parts: the updating nodes to modify, the entering nodes to add, and the exiting nodes to remove.--><p>æ›´æ–°èŠ‚ç‚¹æ˜¯é»˜è®¤é€‰æ‹© - æ•°æ®è¿ç®—ç¬¦çš„ç»“æœã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨å¿˜è®°äº†è¿›å…¥å’Œé€€å‡ºé€‰æ‹©ï¼Œæ‚¨å°†è‡ªåŠ¨é€‰æ‹©ä»…å­˜åœ¨ç›¸åº”æ•°æ®çš„å…ƒç´ ã€‚å¸¸è§çš„æ¨¡å¼æ˜¯å°†åˆå§‹é€‰æ‹©åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šè¦ä¿®æ”¹çš„æ›´æ–°èŠ‚ç‚¹ï¼Œè¦æ·»åŠ çš„è¿›å…¥èŠ‚ç‚¹ä»¥åŠè¦åˆ é™¤çš„ç°æœ‰èŠ‚ç‚¹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Updateâ€¦</span></span><br><span class="line"><span class="keyword">var</span> p = d3.select(<span class="string">"body"</span>)</span><br><span class="line">  .selectAll(<span class="string">"p"</span>)</span><br><span class="line">  .data([<span class="number">4</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">42</span>])</span><br><span class="line">    .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Enterâ€¦</span></span><br><span class="line">p.enter().append(<span class="string">"p"</span>)</span><br><span class="line">    .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Exitâ€¦</span></span><br><span class="line">p.exit().remove();</span><br></pre></td></tr></table></figure></p><!--By handling these three cases separately, you specify precisely which operations run on which nodes. This improves performance and offers greater control over transitions. For example, with a bar chart you might initialize entering bars using the old scale, and then transition entering bars to the new scale along with the updating and exiting bars.--><p>é€šè¿‡åˆ†åˆ«å¤„ç†è¿™ä¸‰ç§æƒ…å†µï¼Œå¯ä»¥ç²¾ç¡®æŒ‡å®šåœ¨å“ªäº›èŠ‚ç‚¹ä¸Šè¿è¡Œå“ªäº›æ“ä½œã€‚è¿™å¯ä»¥æé«˜æ€§èƒ½å¹¶æä¾›å¯¹è½¬æ¢çš„æ›´å¥½æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨æ¡å½¢å›¾ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ—§æ¯”ä¾‹åˆå§‹åŒ–è¾“å…¥æ¡å½¢ï¼Œç„¶åå°†è¾“å…¥æ¡å½¢è½¬æ¢ä¸ºæ–°æ¯”ä¾‹ä»¥åŠæ›´æ–°å’Œé€€å‡ºæ¡å½¢ã€‚</p><!--D3 lets you transform documents based on data; this includes both creating and destroying elements. D3 allows you to change an existing document in response to user interaction, animation over time, or even asynchronous notification from a third-party. A hybrid approach is even possible, where the document is initially rendered on the server, and updated on the client via D3.--><p>D3å…è®¸æ‚¨æ ¹æ®æ•°æ®è½¬æ¢æ–‡æ¡£;è¿™åŒ…æ‹¬åˆ›å»ºå’Œé”€æ¯å…ƒç´ ã€‚D3å…è®¸æ‚¨æ›´æ”¹ç°æœ‰æ–‡æ¡£ä»¥å“åº”ç”¨æˆ·äº¤äº’ï¼ŒåŠ¨ç”»éšæ—¶é—´æ¨ç§»ï¼Œç”šè‡³æ¥è‡ªç¬¬ä¸‰æ–¹çš„å¼‚æ­¥é€šçŸ¥ã€‚ç”šè‡³å¯ä»¥é‡‡ç”¨æ··åˆæ–¹æ³•ï¼Œå…¶ä¸­æ–‡æ¡£æœ€åˆåœ¨æœåŠ¡å™¨ä¸Šå‘ˆç°ï¼Œå¹¶é€šè¿‡D3åœ¨å®¢æˆ·ç«¯ä¸Šæ›´æ–°ã€‚</p><!--#Transformation, not Representation--><h1 id="è½¬æ¢è€Œéè¡¨ç°"><a href="#è½¬æ¢è€Œéè¡¨ç°" class="headerlink" title="è½¬æ¢è€Œéè¡¨ç°"></a>è½¬æ¢è€Œéè¡¨ç°</h1><!--D3 does not introduce a new visual representation. Unlike Processing or Protovis, D3â€™s vocabulary of graphical marks comes directly from web standards: HTML, SVG, and CSS. For example, you can create SVG elements using D3 and style them with external stylesheets. You can use composite filter effects, dashed strokes and clipping. If browser vendors introduce new features tomorrow, youâ€™ll be able to use them immediatelyâ€”no toolkit update required. And, if you decide in the future to use a toolkit other than D3, you can take your knowledge of standards with you!--><p>D3æ²¡æœ‰å¼•å…¥æ–°çš„è§†è§‰è¡¨ç°ã€‚ä¸Processingæˆ–Protovisä¸åŒï¼ŒD3çš„å›¾å½¢æ ‡è®°è¯æ±‡ç›´æ¥æ¥è‡ªWebæ ‡å‡†ï¼šHTMLï¼ŒSVGå’ŒCSSã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨D3åˆ›å»ºSVGå…ƒç´ ï¼Œå¹¶ä½¿ç”¨å¤–éƒ¨æ ·å¼è¡¨å¯¹å…¶è¿›è¡Œæ ·å¼è®¾ç½®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¤åˆæ»¤é•œæ•ˆæœï¼Œè™šçº¿ç¬”åˆ’å’Œå‰ªè£ã€‚å¦‚æœæµè§ˆå™¨å‚å•†æ˜å¤©æ¨å‡ºæ–°åŠŸèƒ½ï¼Œæ‚¨å°†èƒ½å¤Ÿç«‹å³ä½¿ç”¨å®ƒä»¬ - æ— éœ€æ›´æ–°å·¥å…·åŒ…ã€‚è€Œä¸”ï¼Œå¦‚æœæ‚¨å†³å®šå°†æ¥ä½¿ç”¨ D3 ä»¥å¤–çš„å·¥å…·åŒ…ï¼Œæ‚¨å¯ä»¥éšæ—¶ä½¿ç”¨ä½ æŒæ¡çš„æ ‡å‡†çŸ¥è¯†ï¼</p><!--Best of all, D3 is easy to debug using the browserâ€™s built-in element inspector: the nodes that you manipulate with D3 are exactly those that the browser understands natively.--><p>æœ€é‡è¦çš„æ˜¯ï¼Œä½¿ç”¨æµè§ˆå™¨çš„å†…ç½®å…ƒç´ æ£€æŸ¥å™¨å¯ä»¥è½»æ¾è°ƒè¯•D3ï¼šä½¿ç”¨D3æ“ä½œçš„èŠ‚ç‚¹æ­£æ˜¯æµè§ˆå™¨æœ¬èº«å¯ä»¥ç†è§£çš„èŠ‚ç‚¹ã€‚</p><!--#Transitions--><h1 id="è½¬æ¢"><a href="#è½¬æ¢" class="headerlink" title="è½¬æ¢"></a>è½¬æ¢</h1><!--D3â€™s focus on transformation extends naturally to animated transitions. Transitions gradually interpolate styles and attributes over time. Tweening can be controlled via easing functions such as â€œelasticâ€, â€œcubic-in-outâ€ and â€œlinearâ€. D3â€™s interpolators support both primitives, such as numbers and numbers embedded within strings (font sizes, path data, etc.), and compound values. You can even extend D3â€™s interpolator registry to support complex properties and data structures.--><p>D3å¯¹è½¬æ¢çš„å…³æ³¨è‡ªç„¶å»¶ä¼¸åˆ°åŠ¨ç”»è½¬æ¢ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿‡æ¸¡ä¼šé€æ¸æ’å…¥æ ·å¼å’Œå±æ€§ã€‚å¯ä»¥é€šè¿‡ easeing å‡½æ•°æ¥æ§åˆ¶åŠ¨ç”»æ•ˆæœ ï¼Œä¾‹å¦‚â€œelasticâ€ï¼Œâ€œcubic-in-outâ€å’Œâ€œlinearâ€ã€‚D3çš„æ’å€¼å™¨æ”¯æŒä¸¤ç§åŸºå…ƒï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ä¸­åµŒå…¥çš„æ•°å­—å’Œæ•°å­—ï¼ˆå­—ä½“å¤§å°ï¼Œè·¯å¾„æ•°æ®ç­‰ï¼‰å’Œå¤åˆå€¼ã€‚æ‚¨ç”šè‡³å¯ä»¥æ‰©å±•D3çš„æ’è¡¥å™¨æ³¨å†Œè¡¨ä»¥æ”¯æŒå¤æ‚çš„å±æ€§å’Œæ•°æ®ç»“æ„ã€‚</p><!--For example, to fade the background of the page to black:--><p>ä¾‹å¦‚ï¼Œè¦å°†é¡µé¢èƒŒæ™¯æ·¡åŒ–ä¸ºé»‘è‰²ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d3.select(<span class="string">"body"</span>).transition()</span><br><span class="line">    .style(<span class="string">"background-color"</span>, <span class="string">"black"</span>);</span><br></pre></td></tr></table></figure></p><!--Or, to resize circles in a symbol map with a staggered delay:--><p>æˆ–è€…ï¼Œä½¿ç”¨äº¤é”™å»¶è¿Ÿè°ƒæ•´ç¬¦å·æ˜ å°„ä¸­çš„åœ†åœˆï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d3.selectAll(<span class="string">"circle"</span>).transition()</span><br><span class="line">    .duration(<span class="number">750</span>)</span><br><span class="line">    .delay(<span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>) </span>&#123; <span class="keyword">return</span> i * <span class="number">10</span>; &#125;)</span><br><span class="line">    .attr(<span class="string">"r"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(d * scale); &#125;);</span><br></pre></td></tr></table></figure></p><!--By modifying only the attributes that actually change, D3 reduces overhead and allows greater graphical complexity at high frame rates. D3 also allows sequencing of complex transitions via events. And, you can still use CSS3 transitions; D3 does not replace the browserâ€™s toolbox, but exposes it in a way that is easier to use.--><p>é€šè¿‡ä»…ä¿®æ”¹å®é™…æ›´æ”¹çš„å±æ€§ï¼ŒD3å¯é™ä½å¼€é”€ï¼Œå¹¶åœ¨é«˜å¸§é€Ÿç‡ä¸‹å®ç°æ›´é«˜çš„å›¾å½¢å¤æ‚æ€§ã€‚D3è¿˜å…è®¸é€šè¿‡äº‹ä»¶å¯¹å¤æ‚è½¬æ¢è¿›è¡Œæ’åºã€‚å¹¶ä¸”ï¼Œæ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨CSS3è¿‡æ¸¡; D3ä¸ä¼šå–ä»£æµè§ˆå™¨çš„å·¥å…·ç®±ï¼Œä½†ä¼šä»¥æ›´æ˜“äºä½¿ç”¨çš„æ–¹å¼å…¬å¼€å®ƒã€‚</p><!--Want to learn more? Read these tutorials.--><p>æƒ³è¦å­¦ä¹ æ›´å¤šæ•™ç¨‹è¯·ç§»æ­¥ <a href="https://github.com/d3/d3/wiki/Tutorials" target="_blank" rel="noopener">æ›´å¤šæ•™ç¨‹</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://d3js.org.cn/home.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¿»è¯‘è®¡åˆ’" scheme="http://yoursite.com/categories/%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/"/>
    
    
      <category term="D3" scheme="http://yoursite.com/tags/D3/"/>
    
      <category term="æ•°æ®å¯è§†åŒ–" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>GraphQLå®˜æ–¹è‡ªè¿°æ–‡ä»¶</title>
    <link href="http://yoursite.com/2019/02/18/graphql-translate/"/>
    <id>http://yoursite.com/2019/02/18/graphql-translate/</id>
    <published>2019-02-18T14:52:10.000Z</published>
    <updated>2019-02-23T07:10:02.757Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1550915827036&amp;di=915d3dbc377cb034b3658fb54a0d0439&amp;imgtype=0&amp;src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20180726%2F6e30a4612eb54d3b8b255777463ffd18.png" alt=""><br><a id="more"></a><br>åŸæ–‡åœ°å€ï¼š<a href="https://github.com/facebook/graphql/blob/master/README.md" target="_blank" rel="noopener">https://github.com/facebook/graphql/blob/master/README.md</a></p><p>æˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://facebook.github.io/graphql/" target="_blank" rel="noopener">https://facebook.github.io/graphql/</a> æœ€æ–°å‘å¸ƒçš„<a href="./spec">/spec</a>ç›®å½•çš„markdownæ–‡ä»¶ä¸­æ‰¾åˆ° GraphQLçš„è§„èŒƒã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è·Ÿè¸ªè¿™ä¸ªä»“åº“æœ€æ–°çš„ä»£ç æäº¤æ‰¾åˆ° <a href="https://facebook.github.io/graphql/draft/" target="_blank" rel="noopener">https://facebook.github.io/graphql/draft/</a> ä¸­æåˆ°çš„æœ€è¿‘çš„è‰æ¡ˆè§„èŒƒã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åº”çš„ <a href="https://github.com/facebook/graphql/releases" target="_blank" rel="noopener">release tag</a> åœ¨å›ºå®šçš„é“¾æ¥æ‰¾åˆ° GrahpQL ä¹‹å‰çš„è§„èŒƒã€‚ä¾‹å¦‚ï¼Œ<a href="https://facebook.github.io/graphql/October2016/" target="_blank" rel="noopener">https://facebook.github.io/graphql/October2016/</a> ï¼Œ å¦‚æœç›´æ¥é“¾æ¥åˆ° GraphQL è§„èŒƒï¼Œåˆ™æœ€å¥½é“¾æ¥åˆ°ç‰¹å®šå¼•ç”¨ç‰ˆæœ¬çš„å¸¦æœ‰æ°¸ä¹…æ ‡è®°çš„é“¾æ¥ã€‚</p><h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a><a name="peg0ab"></a>æ¦‚è§ˆ</h2><p>è¿™æ˜¯ä¸€ä¸ªç”±Facebookåˆ›å»ºçš„ Api æŸ¥è¯¢è¯­è¨€è§„èŒƒã€‚</p><p>GraphQL çš„å—ä¼—ç¾¤ä½“ä¸æ˜¯å®¢æˆ·ç«¯å¼€å‘è€…ï¼Œè€Œæ˜¯é‚£äº›å¯¹æ„å»º GraphQL å¼€å‘å’Œå·¥å…·æ„Ÿå…´è¶£çš„äººã€‚</p><p>ä¸ºäº†è¢«å¹¿æ³›é‡‡ç”¨ï¼ŒGraphQL å¿…é¡»é’ˆå¯¹å„ç§å®¢æˆ·ç«¯ã€æ¡†æ¶å’Œè¯­è¨€ï¼Œè¿™éœ€è¦è·¨é¡¹ç›®å’Œç»„ç»‡åä½œã€‚å®ƒçš„è§„èŒƒæ˜¯è¿™é¡¹å·¥ä½œçš„åè°ƒç‚¹ã€‚</p><p>åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°éœ€è¦çš„å¸®åŠ© <a href="https://graphql.org/community/" target="_blank" rel="noopener">from the community</a></p><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a><a name="i31iwq"></a>å…¥é—¨</h2><p>GraphQL æœ‰ç±»å‹ç³»ç»Ÿã€æŸ¥è¯¢è¯­è¨€ã€è¯­ä¹‰æ‰§è¡Œå™¨ã€é™æ€ç±»å‹æ£€æŸ¥å’Œç±»å‹è‡ªæ£€ç»„æˆã€‚ä¸ºäº†ä½¿ç”¨æˆ·å¯ä»¥äº†è§£å…¶ä¸­çš„æ¯ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªç¤ºä¾‹ç”¨æ¥è¯´æ˜ GraphQL çš„æ¯ä¸€ä¸ªéƒ¨åˆ†ã€‚</p><p>è¿™ä¸ªç¤ºä¾‹ä¸æ˜¯å…¨é¢çš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥å¿«é€Ÿè¯´æ˜ GraphQL çš„æ ¸å¿ƒæ¦‚å¿µï¼Œåœ¨æ·±å…¥äº†è§£ <a href="https://github.com/graphql/graphql-js" target="_blank" rel="noopener">GraphQL.js</a>ä¹‹å‰æä¾›ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬æƒ³ç”¨æŸ¥è¯¢â€œæ˜Ÿçƒå¤§æˆ˜ä¸‰éƒ¨æ›²â€ä¸­äººç‰©å’Œåœ°ç‚¹çš„ä¿¡æ¯æ¥æ¼”ç¤ºè¿™ä¸ªä¾‹å­ã€‚</p><h3 id="ç±»å‹ç³»ç»Ÿ"><a href="#ç±»å‹ç³»ç»Ÿ" class="headerlink" title="ç±»å‹ç³»ç»Ÿ"></a><a name="uu5meg"></a>ç±»å‹ç³»ç»Ÿ</h3><p>ä»»ä½• GraphQL çš„å®ç°æ ¸å¿ƒéƒ½æ˜¯å®ƒå¯ä»¥è¿”å›å¯¹è±¡ç±»å‹çš„æè¿°ï¼Œåœ¨ç±»å‹ç³»ç»Ÿä¸­æè¿°å¹¶ä¸”åœ¨ Schema ä¸­è¿”å›ã€‚</p><p>åœ¨æˆ‘ä»¬â€œæ˜Ÿçƒå¤§æˆ˜â€çš„ä¾‹å­ä¸­ï¼Œç±»å‹ç³»ç»Ÿè¢«å®šä¹‰åœ¨äº†æ­¤æ–‡ä»¶ä¸­ <a href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsSchema.js" target="_blank" rel="noopener">starWarsSchema.js</a> ã€‚</p><p>åœ¨ç³»ç»Ÿä¸­æœ€å¤šçš„åŸºæœ¬ç±»å‹æ˜¯ Human,ä»£è¡¨äº†äººç‰©ï¼Œæ¯”å¦‚åƒ Luke,Leia å’Œ Hanã€‚åœ¨æˆ‘ä»¬ç³»ç»Ÿä¸­æ‰€æœ‰çš„äººç±»ä¼šæœ‰ä¸€ä¸ªåå­—ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰ Human ç±»å‹å¿…é¡»æœ‰ä¸€ä¸ªå±æ€§: name. è¿™ä¸ªå±æ€§ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå­—ç¬¦ä¸²ä¸æ˜¯ null(å°±åƒæ¯ä¸ªäººç±»éƒ½å¿…é¡»æœ‰ä¸€ä¸ªåå­—ä¸€æ ·ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å®šä¹‰ name å±æ€§ä¸º non-nullable String(éç©ºå­—ç¬¦ä¸²)ã€‚æˆ‘ä»¬åœ¨ç³»ç»Ÿè§„èŒƒå’Œæ–‡æ¡£ä¸­å§‹ç»ˆä½¿ç”¨ç®€å†™ç¬¦å·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Human ç±»å‹æè¿°ä¸ºè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Human &#123;</span><br><span class="line">  name: String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§ç®€å†™æ˜¯ä¸ºäº†æ–¹ä¾¿æè¿°ç±»å‹ç³»ç»Ÿæœ€åŸºæœ¬çš„ç»„æˆï¼›Javascript å®ç°åŠŸèƒ½æ›´å…¨é¢ï¼Œå¹¶å…è®¸è®°å½•ç±»å‹å’Œå­—æ®µã€‚<br>å¹¶ä¸”è®¾ç½®äº†ç±»å‹ç³»ç»Ÿå’Œåº•å±‚æ•°æ®ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼›å¯¹äº GraphQ.js ä¸­çš„æµ‹è¯•ç”¨ä¾‹ï¼Œåº•å±‚æ•°æ®æ˜¯ä¸€ç»„ Javascript å¯¹è±¡<br><a href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsData.js" target="_blank" rel="noopener">set of JavaScript objects</a> ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåå°æ•°æ®å°†é€šè¿‡æŸäº›æœåŠ¡è¿›è¡Œè®¿é—®ï¼Œæ¬¡ç±»å‹ç³»ç»Ÿå±‚å°†è´Ÿè´£ä»ç±»å‹å’Œå­—æ®µå¤§é“è¯¥æœåŠ¡çš„æ˜ å°„ã€‚</p><p>è®¸å¤š API ä¸­çš„å¸¸è§æ¨¡å¼ï¼Œåœ¨ GraphQL ä¸­ï¼Œæ˜¯ä¸ºå¯¹è±¡æä¾›ç”¨äºé‡æ–°è·å–å¯¹è±¡çš„ IDã€‚æ‰€ä»¥è®©æˆ‘ä»¬æŠŠå®ƒæ·»åŠ åˆ° Human ç±»å‹ä¸­ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ª string ç±»å‹çš„ homeplanet å­—æ®µã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Human &#123;</span><br><span class="line">id:String,</span><br><span class="line">  name:String,</span><br><span class="line">  homePlanet:String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬è°ˆè®ºçš„æ˜¯æ˜Ÿçƒå¤§æˆ˜ä¸‰éƒ¨æ›²ï¼Œå› æ­¤æè¿°æ¯ä¸ªè§’è‰²å‡ºç°çš„å‰§é›†ä¼šå¾ˆæœ‰ç”¨ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Œåˆ—å‡ºä¸‰éƒ¨æ›²ä¸­çš„ä¸‰é›†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emnu Episode &#123; NEWHOPE, EMPORE, JEDI&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ Human ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µæ¥æè¿°ä»–ä»¬å‡ºç°åœ¨å“ªå„¿ã€‚è¿™ä¼šè¿”å›ä¸€ä¸ªå‰§é›†çš„åˆ—è¡¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type Human &#123;</span><br><span class="line">id:String,</span><br><span class="line">  name:String,</span><br><span class="line">  appearsIn:[Episode],</span><br><span class="line">  homeplanet:String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè®©æˆ‘æ¥ä»‹ç»ä¸€ä¸‹å¦ä¸€ä¸ªç±»å‹ï¼š<code>Droid</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type Droid &#123;</span><br><span class="line"></span><br><span class="line">  id: String</span><br><span class="line"></span><br><span class="line">  name: String</span><br><span class="line"></span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line"></span><br><span class="line">  primaryFunction: String</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªç±»å‹ï¼è®©æˆ‘ä»¬æ·»åŠ ä¸€ç§æ–¹å¼æ¥è”ç³»ä»–ä»¬ï¼šäººç±»å’Œæœºå™¨äººéƒ½æœ‰æœ‹å‹ã€‚ä½†æ˜¯äººç±»å¯ä»¥åŒæ—¶å’Œäººç±»å’Œæœºå™¨äººäº¤æœ‹å‹ã€‚æˆ‘ä»¬å¦‚ä½•åŒºåˆ†äººç±»è¿˜æ˜¯æœºå™¨äººæœ‹å‹å‘¢ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¼šè¿”ç°äººæ¥å’Œæœºå™¨äººä¹‹é—´æœ‰å…±åŒçš„åŠŸèƒ½ï¼šä»–ä»¬éƒ½æœ‰ ID ã€nameå’Œ episodesã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬çš„ç±»å‹ç³»ç»Ÿç›®å‰æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">enum Episode &#123; NEWHOPE, EMPIRE, JEDI &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">interface Character &#123;</span><br><span class="line"></span><br><span class="line">  id: String</span><br><span class="line"></span><br><span class="line">  name: String</span><br><span class="line"></span><br><span class="line">  friends: [Character]</span><br><span class="line"></span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Human implements Character &#123;</span><br><span class="line"></span><br><span class="line">  id: String</span><br><span class="line"></span><br><span class="line">  name: String</span><br><span class="line"></span><br><span class="line">  friends: [Character]</span><br><span class="line"></span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line"></span><br><span class="line">  homePlanet: String</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Droid implements Character &#123;</span><br><span class="line"></span><br><span class="line">  id: String</span><br><span class="line"></span><br><span class="line">  name: String</span><br><span class="line"></span><br><span class="line">  friends: [Character]</span><br><span class="line"></span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line"></span><br><span class="line">  primaryFunction: String</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æˆ–è®¸ä¼šé—®ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ä»»ä½•å­—æ®µå¯ä»¥è¿”å› nul lå—ï¼Ÿé»˜è®¤æƒ…å†µä¸‹ï¼Œnull åœ¨ä»»ä½•GraphQLç±»å‹ä¸­éƒ½æ˜¯åˆæ³•çš„ï¼Œç„¶è€Œ<br>å› ä¸ºå®Œæˆä¸€ä¸ªGraphQlæŸ¥è¯¢é€šå¸¸éœ€è¦å’Œä¸åŒçš„æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ï¼Œè¿™äº›æœåŠ¡ç«¯å¯èƒ½ä¸ä¼šè¿”å›å€¼ã€‚ç„¶è€Œå¦‚æœç±»å‹ç³»ç»Ÿå¯ä»¥ä¿è¯ä¸€ä¸ªç±»å‹ä¸ä¼šæ˜¯nullï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªç±»å‹æ ‡è®°ä¸ºéç©ºã€‚æˆ‘ä»¬åœ¨ç±»å‹åé¢åŠ â€œï¼â€æ¥è¡¨ç¤ºéç©ºå­—æ®µã€‚æˆ‘å¯ä»¥æ›´æ–°æˆ‘ä»¬çš„ç³»ç»Ÿä»¥å¤‡æ³¨ id æ°¸è¿œä¸å¯èƒ½ä¸ºç©ºã€‚</p><p>è¯·æ³¨æ„ï¼Œåœ¨æˆ‘ä»¬å½“å‰çš„å®ç°å½“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯ä»»ä½•å­—æ®µéƒ½æ˜¯éç©ºçš„ï¼ˆå› ä¸ºæˆ‘ä»¬å½“å‰çš„å®ç°ä¸­æœ‰ç¡¬ç¼–ç æ•°æ®ï¼‰ï¼Œ<br>æˆ‘ä»¬æ²¡æœ‰æŠŠä»–ä»¬æ ‡è®°ä¸ºéç©ºã€‚å¯ä»¥æƒ³è±¡ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šç”¨å®é™…åç«¯æ•°æ®ä»£æ›¿ç¡¬ç¼–ç æ•°æ®ã€‚é€šè¿‡è¿™äº›é…ç½®ï¼Œæˆ‘ä»¬å…è®¸åç«¯åœ¨å‘ç”Ÿé”™è¯¯çš„æ—¶å€™è¿”å›null,å¹¶ä¸”å‘ŠçŸ¥å®¢æˆ·ç«¯åç«¯å‘ç”Ÿäº†é”™è¯¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">enum Episode &#123; NEWHOPE, EMPIRE, JEDI &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">interface Character &#123;</span><br><span class="line"></span><br><span class="line">  id: String!</span><br><span class="line"></span><br><span class="line">  name: String</span><br><span class="line"></span><br><span class="line">  friends: [Character]</span><br><span class="line"></span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Human implements Character &#123;</span><br><span class="line"></span><br><span class="line">  id: String!</span><br><span class="line"></span><br><span class="line">  name: String</span><br><span class="line"></span><br><span class="line">  friends: [Character]</span><br><span class="line"></span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line"></span><br><span class="line">  homePlanet: String</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Droid implements Character &#123;</span><br><span class="line"></span><br><span class="line">  id: String!</span><br><span class="line"></span><br><span class="line">  name: String</span><br><span class="line"></span><br><span class="line">  friends: [Character]</span><br><span class="line"></span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line"></span><br><span class="line">  primaryFunction: String</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é”™è¿‡äº†æœ€åä¸€éƒ¨åˆ†ï¼šç±»å‹ç³»ç»Ÿçš„ä¸»å…¥å£</p><p>å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Schemaï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªobjectç±»å‹ï¼Œä»–æ˜¯æ‰€æœ‰æŸ¥è¯¢çš„åŸºç¡€ã€‚è¿™ä¸ªç±»å‹çš„åç§°é€šå¸¸è¢«å«åš Query, å®ƒæè¿°äº†æˆ‘ä»¬å…¬å…±é¡¶çº§APIï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­çš„çš„ Query ç±»å‹çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">hero(episode:Eposode): Character</span><br><span class="line">  human(id:String): Human</span><br><span class="line">  droid(id:String):Droid</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ‰ä¸‰ä¸ªé¡¶çº§æ“ä½œï¼Œå¯ä»¥åœ¨æˆ‘ä»¬çš„æ¡†æ¶ä¸­è¢«å®Œæˆï¼š</p><ul><li>hero è¡¨ç¤º è°æ˜¯æ˜Ÿæˆ˜ä¸‰éƒ¨æ›²ä¸­çš„è‹±é›„äººç‰©ï¼Œå®ƒè®¾ç½®äº†ä¸€ä¸ªå¯é€‰çš„å‚æ•°å…è®¸æˆ‘ä»¬æŸ¥è¯¢ç‰¹å®šå‰§é›†çš„è‹±é›„</li><li>human æ¥å—ä¸€ä¸ªéç©ºå‚æ•°IDä½œä¸ºæŸ¥è¯¢æ¡ä»¶æ¥è¿”å›äººç‰©ID</li><li>droid å’Œdroidsä¿æŒä¸€è‡´</li></ul><p>è¿™äº›å­—æ®µæ¼”ç¤ºäº†ç±»å‹ç³»ç»Ÿçš„å¦ä¸€ä¸ªåŠŸèƒ½ï¼šç‰¹å®šå‚æ•°çš„å­—æ®µå¯ä»¥é…ç½®ä»–ä»¬çš„è¡Œä¸ºã€‚</p><p>å½“æˆ‘ä»¬å°†æ•´ä¸ªç±»å‹ç³»ç»Ÿæ‰“åŒ…åˆ°ä¸€èµ·ï¼Œå°†ä¸Šé¢çš„ Query ç±»å‹å®šä¹‰ä¸ºæŸ¥è¯¢å…¥å£ç‚¹ï¼Œè¿™å°†åˆ›å»ºä¸€ä¸ªGraphQL Schemaã€‚</p><p>è¿™ä¸ªä¾‹å­åªæ˜¯åˆæ­¥æ¶‰åŠåˆ°äº†ç±»å‹ç³»ç»Ÿçš„è¡¨å±‚ã€‚è¿™ç§è§„èŒƒåœ¨ç±»å‹ç³»ç»Ÿéƒ¨åˆ†å’Œ <a href="https://github.com/graphql/graphql-js/blob/master/src/type" target="_blank" rel="noopener">type</a> ç›®å½•ä¸­è¯¦ç»†ä»‹ç»äº†è¯¥ä¸»é¢˜ã€‚åŒ…å«å®ç°ç¬¦åˆè§„èŒƒçš„GraphQL çš„ç±»å‹ç³»ç»Ÿä»£ç ã€‚</p><h3 id="æŸ¥è¯¢è¯­æ³•"><a href="#æŸ¥è¯¢è¯­æ³•" class="headerlink" title="æŸ¥è¯¢è¯­æ³•"></a><a name="d8hgnw"></a>æŸ¥è¯¢è¯­æ³•</h3><p>GraphQl æŸ¥è¯¢ä»¥å£°æ˜æ–¹å¼æè¿°äº†å‘è¡Œè€…å¸Œæœ›ä»æ‰§è¡ŒGraphQL æŸ¥è¯¢å®ƒä»¬æƒ³è¦çš„æ•°æ®ã€‚</p><p>åœ¨æˆ‘ä»¬çš„æ˜Ÿæˆ˜ä¾‹å­ä¸­ï¼Œ<a href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsQuery-test.js" target="_blank" rel="noopener">starWarsQueryTests.js</a> æ–‡ä»¶æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œå®ƒä½¿ç”¨ä¸Šé¢è®¨è®ºçš„æ¨¡å¼å’Œä¸€ç»„æ ·æœ¬æ•°æ®ï¼Œåœ¨<a href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsData.js" target="_blank" rel="noopener">starWarsData.js</a>æ–‡ä»¶ä¸­ã€‚å¯ä»¥è¿è¡Œæ­¤æµ‹è¯•æ–‡ä»¶æ¥æ‰§è¡Œå‚è€ƒå®ç°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query HeroNameQuery &#123;</span><br><span class="line"> hero &#123;</span><br><span class="line"> name</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œï¼Œquery HeroNameQuery å®šä¹‰æ¥ä¸€ä¸ªä»¥schemaçš„æ ¹æŸ¥è¯¢ç±»å‹ä¸ºå¼€å¤´çš„æ“ä½œåç§° HeroNameQueryã€‚ç»¼ä¸Šæ‰€è¿°ï¼ŒQuery æœ‰ä¸€ä¸ª hero å­—æ®µï¼Œè¿”å›ä¸€ä¸ªCharacter ç±»å‹ã€‚Character æœ‰ä¸€ä¸ªStringç±»å‹çš„nameå­—æ®µã€‚è¿™ä¸ªæŸ¥è¯¢çš„ç»“æœå°†ä¼šæ˜¯è¿™æ ·ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"hero"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>:<span class="string">"R2-D2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªGraphQL æ–‡æ¡£å®šä¹‰å¤šä¸ªæ“ä½œæ—¶ï¼ŒæŒ‡å®šæŸ¥è¯¢å…³é”®è¯å’Œä¸€ä¸ªæ“ä½œåç§°æ˜¯å”¯ä¸€çš„å¿…è¦æ¡ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæŸ¥è¯¢ç®€å†™é‡å†™ä¹‹å‰çš„æŸ¥è¯¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡è®¾GraphQLçš„åç«¯æœåŠ¡æ•°æ®å°†ä»¥R2-D2æ¥æ ‡ç¤ºheroã€‚å“åº”ç»§ç»­æ ¹æ®è¯·æ±‚æ¥å˜åŒ–ï¼›å¦‚æœæˆ‘ä»¬ç”¨è¿™ä¸ªæŸ¥è¯¢æ¥è¯·æ±‚ R2-D2 çš„ IDå’Œ friends å­—æ®µï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">query HeroNameAndFriendsQuery &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  id</span><br><span class="line">    name</span><br><span class="line">    friends &#123;</span><br><span class="line">    id</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æƒ³è¿™æ ·çš„å“åº”ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"hero"</span>:&#123;</span><br><span class="line">  <span class="attr">"id"</span>:<span class="string">"2001"</span>,</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"R2-D2"</span>,</span><br><span class="line">    <span class="attr">"friends"</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">      <span class="attr">"id"</span>:<span class="string">"1000"</span>,</span><br><span class="line">        <span class="attr">"name"</span>:<span class="string">"Luke Skywalker"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">      <span class="attr">"id"</span>:<span class="string">"1002"</span>,</span><br><span class="line">        <span class="attr">"name"</span>:<span class="string">"Han solo"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">      <span class="attr">"id"</span>:<span class="string">"1003"</span>,</span><br><span class="line">        <span class="attr">"name"</span>:<span class="string">"Leia Organa"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Graphql ä¸€ä¸ªå…³é”®çš„æ–¹é¢æ˜¯å®ƒçš„åµŒå¥—æŸ¥è¯¢èƒ½åŠ›ã€‚åœ¨ä»¥ä¸Šçš„æŸ¥è¯¢ä¸­ï¼Œæˆ‘ä»¬è¯·æ±‚äº† R2-D2 çš„ friendsï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è¯·æ±‚æ›´å¤šå…³äºä»–ä»¬æ¯ä¸ªå¯¹è±¡çš„ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æ„é€ ä¸€ä¸ªæŸ¥è¯¢æ¥è¯·æ±‚ R2-D2 çš„ friends ï¼Œè·å–ä»–ä»¬çš„åç§°å’Œå‡ºç°çš„å‰§é›†ï¼Œç„¶åå†æ¬¡åµŒå¥—æŸ¥è¯¢ä»–ä»¬æ¯ä¸€ä¸ªçš„ friendsã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">query NestedQuery &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  name</span><br><span class="line">    friends &#123;</span><br><span class="line">    name</span><br><span class="line">      appersIn</span><br><span class="line">      friends &#123;</span><br><span class="line">      name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"hero"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"R2-D2"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"friends"</span>: [</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Luke Skywalker"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"appearsIn"</span>: [<span class="string">"NEWHOPE"</span>, <span class="string">"EMPIRE"</span>, <span class="string">"JEDI"</span>],</span><br><span class="line"></span><br><span class="line">        <span class="attr">"friends"</span>: [</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"Han Solo"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"Leia Organa"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"C-3PO"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"R2-D2"</span> &#125;</span><br><span class="line"></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Han Solo"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"appearsIn"</span>: [<span class="string">"NEWHOPE"</span>, <span class="string">"EMPIRE"</span>, <span class="string">"JEDI"</span>],</span><br><span class="line"></span><br><span class="line">        <span class="attr">"friends"</span>: [</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"Luke Skywalker"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"Leia Organa"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"R2-D2"</span> &#125;</span><br><span class="line"></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Leia Organa"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"appearsIn"</span>: [<span class="string">"NEWHOPE"</span>, <span class="string">"EMPIRE"</span>, <span class="string">"JEDI"</span>],</span><br><span class="line"></span><br><span class="line">        <span class="attr">"friends"</span>: [</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"Luke Skywalker"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"Han Solo"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"C-3PO"</span> &#125;,</span><br><span class="line"></span><br><span class="line">          &#123; <span class="attr">"name"</span>: <span class="string">"R2-D2"</span> &#125;</span><br><span class="line"></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„æŸ¥è¯¢ç±»å‹å®šä¹‰ä¸€ç§æ ¹æ®ç»™å®šIDæ¥æŸ¥è¯¢ human çš„æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨æŸ¥è¯¢ç”¨é‡‡ç”¨ç¡¬ç¼–ç çš„IDï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query FetchLukeQuery &#123;</span><br><span class="line">human(id:&quot;1000&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"human"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>:<span class="string">"Luke Skywalker"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå…·æœ‰å‚æ•°çš„æŸ¥è¯¢æ¡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query FetchSomeIdQuery($someId:String!) &#123;</span><br><span class="line">human(id:$someId) &#123;</span><br><span class="line">  name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæŸ¥è¯¢ç°åœ¨æœ‰ä¸€ä¸ªå‚æ•°ï¼š\$someId;ä¸ºäº†è¿è¡Œå®ƒï¼Œæˆ‘ä»¬å¿…é¡»æä¾›é‚£ä¸ª IDã€‚å¦‚æœæˆ‘ä»¬å°† \$someId è®¾ä¸ºâ€œ1000â€ï¼Œæˆ‘ä»¬å°†è·å¾— Lukeã€‚å¦‚æœè®¾ä¸ºâ€œ1002â€ï¼Œæˆ‘ä»¬å°†è·å¾— Hanã€‚å¦‚æœæˆ‘ä»¬åœ¨è¿™é‡Œä¼ é€’äº†ä¸€ä¸ªæ— æ•ˆçš„ ID ï¼Œæˆ‘å°†ä¼šå¾—åˆ° human ç±»å‹çš„ nullï¼Œè¡¨æ˜ä¸å­˜åœ¨è¿™æ ·çš„å¯¹è±¡ã€‚</p><p>æ³¨æ„ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹å“åº”ä¸­çš„é”®æ˜¯å­—æ®µçš„ nameã€‚ä¸ºäº†ç”¨ä¸åŒå‚æ•°æŸ¥è¯¢åŒä¸€ä¸ªå­—æ®µæ—¶ç®€æ´æ˜äº†æˆ–è€…é¿å…é”®å†²çªï¼Œæœ‰æ—¶å€™ä¿®æ”¹è¿™ä¸ªé”®æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨å­—æ®µåˆ«åå¤„ç†è¿™ç§æƒ…å†µï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query FeatchLukeAliased &#123;</span><br><span class="line">luke:human(id:&quot;1000&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°† human å­—æ®µçš„ç»“æœåˆ«åä¸ºå…³é”®å­— â€luke.ç°åœ¨å“åº”æ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"luke"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"Luke Skywalker"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œé”®æ˜¯ â€œlukeâ€ è€Œä¸æ˜¯ â€œhumanâ€ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰çš„ä¾‹å­ä¸­æ²¡æœ‰ä½¿ç”¨åˆ«åä¸€æ ·ã€‚</p><p>è¿™ç§æ–¹æ³•åœ¨æˆ‘ä»¬æƒ³è¦ç”¨ä¸¤æ¬¡åŒæ ·çš„å­—æ®µä¸åŒçš„å‚æ•°æ—¶å°¤å…¶æœ‰ç”¨ï¼Œå°±åƒä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query FetchLukeAndLeiaAliased &#123;</span><br><span class="line">luke:human(id:&quot;1000&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">  &#125;</span><br><span class="line">  leia:human(id:&quot;1003&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ«å human çš„ç¬¬ä¸€ä¸ªç»“æœåˆ° luke ,å¹¶ä¸”ç¬¬äºŒä¸ªç»“æœåˆ° leiaã€‚æ‰€ä»¥ç»“æœæ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"luke"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>:<span class="string">"Luke Skywalker"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"leia"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>:<span class="string">"Leia Organa"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æƒ³è±¡ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è¯·æ±‚ Luke å’Œ Leia çš„æ¯æ˜Ÿã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšæŸ¥è¯¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">query DuplicateFields &#123;</span><br><span class="line">luke:human(id:&quot;1000&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">    homePlanet</span><br><span class="line">  &#125;</span><br><span class="line">  leia:human(id:&quot;1003&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">    homePlanet</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘ä»¬å·²ç»å¯ä»¥çœ‹åˆ°è¿™ç§æ–¹æ³•ä¼šå˜å¾—ç¬¨é‡ï¼Œç”±äºæˆ‘ä»¬ä¸å¾—ä¸æ·»åŠ æ–°çš„å­—æ®µåˆ°æ‰€æœ‰çš„æŸ¥è¯¢éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æå–å…¬å…±å­—æ®µåˆ°ä¸€ä¸ªç‰‡æ®µï¼Œå¹¶ä¸”å°†è¿™ä¸ªç‰‡æ®µåŒ…å«åˆ°æŸ¥è¯¢ä¸­ä»£æ›¿ï¼Œåƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">query useFragment &#123;</span><br><span class="line">luke:human(id:&quot;1000&quot;) &#123;</span><br><span class="line">  ...HumanFragment</span><br><span class="line">  &#125;</span><br><span class="line">  leia:human(id:&quot;1003&quot;) &#123;</span><br><span class="line">  ...HumanFragment</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">frament HumanFragment on Human &#123;</span><br><span class="line">name</span><br><span class="line">  homePlanet</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ªæŸ¥è¯¢çš„ç»“æœæ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"luke"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>:<span class="string">"Luke Skywalker"</span>,</span><br><span class="line">    <span class="attr">"homePlanet"</span>:<span class="string">"tatooine"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"leia"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>:<span class="string">"Leia Organa"</span>,</span><br><span class="line">    <span class="attr">"homePlanet"</span>:<span class="string">"Alderaan"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UseFragment å’Œ DuplicateFields æŸ¥è¯¢éƒ½è·å¾—ç›¸åŒçš„ç»“æœï¼Œä½†æ˜¯ UseFragment æ›´ç®€æ´ï¼›å¦‚æœæˆ‘ä»¬æƒ³è¦æ·»åŠ æ›´å¤šå­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ åˆ°å…¬å…±çš„ç‰‡æ®µè€Œä¸æ˜¯æ‹·è´åˆ°å¤šä¸ªåœ°æ–¹ã€‚</p><p>åœ¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†ç±»å‹ç³»ç»Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“è¾“å‡ºä¸­æ¯ä¸ªå¯¹è±¡çš„ç±»å‹ï¼›å¯ä»¥ä½¿ç”¨å®šä¸€ä¸ªåœ¨æ¯ä¸ªå¯¹è±¡å°šçš„ç‰¹æ®Šå­—æ®µ __typename æ¥æŸ¥è¯¢ç±»å‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query CheckTypeOfR2 &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  __typename</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºR2-D2æ˜¯ droid ç±»å‹ï¼Œæ‰€ä»¥ä¼šè¿”å›ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"hero"</span>:&#123;</span><br><span class="line">  <span class="attr">"__typename"</span>:<span class="string">"Droid"</span>,</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"R2-D2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¦‚æœæƒ³è¦çŸ¥é“è¿”å›çš„å…·ä½“ç±»å‹ã€‚è¿™æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸º hero è¢«å®šä¹‰ä¸ºè¿”å› Character æ¥å£ï¼›å¦‚æœæˆ‘ä»¬åè€Œè¯·æ±‚ç¬¬äº”é›†heroå‘¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query CheckTypeOfLuke &#123;</span><br><span class="line">hero(episode:EMPIRE) &#123;</span><br><span class="line">  __typename</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†ä¼šå‘ç°æ˜¯ Luke</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"hero"</span>:&#123;</span><br><span class="line">  <span class="attr">"__typename"</span>:<span class="string">"Huamn"</span>,</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"Luke Skywalker"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ç±»å‹ç³»ç»Ÿä¸€æ ·ï¼Œè¿™ä¸ªä¾‹å­åªæ˜¯è§¦åŠåˆ°æ¥æŸ¥è¯¢è¯­è¨€çš„è¡¨å±‚ã€‚è¯¥è§„èŒƒè¯¦ç»†ä»‹ç»æ¥å…³äºâ€œè¯­è¨€â€éƒ¨åˆ†è¯¦æƒ…ï¼Œå¹¶ä¸”ï¼Œåœ¨GraphQL.js ä¸­çš„ <a href="https://github.com/graphql/graphql-js/blob/master/src/language" target="_blank" rel="noopener">language</a> ç›®å½•åŒ…å«æ¥ä»£ç å®ç°äº†ä¸€ä¸ªè§„èŒƒå…¼å®¹ GraphQL æŸ¥è¯¢è¯­è¨€è§£æå™¨å’Œè¯æ³•åˆ†æå™¨ã€‚</p><h3 id="æ ¡éªŒç³»ç»Ÿ"><a href="#æ ¡éªŒç³»ç»Ÿ" class="headerlink" title="æ ¡éªŒç³»ç»Ÿ"></a><a name="ll2dna"></a>æ ¡éªŒç³»ç»Ÿ</h3><p>é€šè¿‡ä½¿ç”¨ç±»å‹ç³»ç»Ÿï¼ŒGraphQL å¯ä»¥é¢„è§åˆ°ä¸€ä¸ªæŸ¥è¯¢æ˜¯å¦æœ‰æ•ˆã€‚è¿™ç§æœºåˆ¶å…è®¸æœåŠ¡ç«¯æˆ–è€…å®¢æˆ·ç«¯åœ¨æ— æ•ˆæŸ¥è¯¢è¢«åˆ›å»ºæ—¶æœ‰æ•ˆåˆ°é€šçŸ¥å¼€å‘è€…ï¼Œè€Œä¸éœ€è¦ä¾èµ–è¿è¡Œæ—¶çš„æ£€æŸ¥ã€‚</p><p>åœ¨æˆ‘ä»¬çš„æ˜Ÿæˆ˜ä¾‹å­ä¸­ï¼Œ<a href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsValidation-test.js" target="_blank" rel="noopener">starWarsValidationTests.js</a> æ–‡ä»¶ä¸­åŒ…å«äº†ä¸€äº›å¸¸è§çš„ç¤ºèŒƒæŸ¥è¯¢ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªå¯è¿è¡Œæ¥ç»ƒä¹ å‚è€ƒå®ç°æ ¡éªŒå™¨çš„æµ‹è¯•æ–‡ä»¶ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å–ä¸€ä¸ªå¤æ‚çš„æ ¡éªŒæŸ¥è¯¢ã€‚è¿™æ˜¯ä¸€ä¸ªæ¥è‡ªä¸Šé¢éƒ¨åˆ†åµŒå¥—æŸ¥è¯¢çš„ä¾‹å­ï¼Œä½†æ˜¯å°†é‡å¤çš„å­—æ®µè€ƒè™‘åœ¨ä¸€ä¸ªç‰‡æ®µå†…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">query NestedQueryWithFragment &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  ...NameAndAppearances</span><br><span class="line">    friends&#123;</span><br><span class="line">    ...NameAndAppearances</span><br><span class="line">      friends&#123;</span><br><span class="line">      ...NameAndAppearances</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">fragment NameAndAppearances on Character &#123;</span><br><span class="line">name</span><br><span class="line">  appearsIn</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”è¿™ä¸ªæŸ¥è¯¢æ˜¯æœ‰æ•ˆçš„ã€‚è®©æˆ‘ä»¬çœ‹ä¸€å†™æ— æ•ˆçš„æŸ¥è¯¢ã€‚</p><p>å½“æˆ‘ä»¬æŸ¥è¯¢å­—æ®µæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æŸ¥è¯¢ä¸€ä¸ªåœ¨ç»™å®šç±»å‹ä¸­å­˜åœ¨çš„å­—æ®µã€‚ä¾‹å¦‚ hero è¿”å› Character ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ Character ä¸ŠæŸ¥è¯¢ä¸€ä¸ªå­—æ®µã€‚é‚£ä¸ªç±»å‹ä¸å­˜åœ¨ favoriteSpaceship å­—æ®µï¼Œæ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#INVALID:favoriteSpaceship does not exist on Charcter</span><br><span class="line">query HeroSpaceshipQuery &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  favoriteSpaceship</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ˜¯æ— æ•ˆçš„ã€‚</p><p>æ¯å½“æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸ªå­—æ®µå¹¶ä¸”å®ƒè¿”å›çš„ä¸æ˜¯æ ‡é‡æˆ–è€…æšä¸¾ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‡å®šæˆ‘ä»¬æƒ³è¦ä»å­—æ®µä¸­è·å–çš„æ•°æ®ã€‚Hero è¿”å› Character ç±»å‹ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è¯·æ±‚åƒ name å’Œ appearsIn è¿™æ ·çš„å­—æ®µï¼›å¦‚æœæˆ‘ä»¬å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œè¿™ä¸ªæŸ¥è¯¢å°†ä¼šå˜å¾—æ— æ•ˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># INVALID: hero is not a scalar, so fields are needed</span><br><span class="line">query HeroNoFieldsQuery &#123;</span><br><span class="line">hero</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œå¦‚æœæ˜¯æ ‡é‡ï¼Œåˆ™æŸ¥è¯¢å…¶ä»–çš„å­—æ®µæ²¡æœ‰æ„ä¹‰ï¼Œè¿™æ ·ä¹Ÿä¼šå°†æŸ¥è¯¢å˜å¾—æ— æ•ˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># INVALID: name is a scalar, so fields are not permitted</span><br><span class="line">queryHeroFieldsOnScalarQuery &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  name &#123;</span><br><span class="line">    firstCharacterOfName</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹å‰ï¼Œæœ‰äººåœ¨é—®é¢˜ä¸­æŒ‡å‡ºä¸€ä¸ªæŸ¥è¯¢åªèƒ½æŸ¥è¯¢ç±»å‹ä¸­æœ‰çš„å­—æ®µï¼›å½“æˆ‘ä»¬æŸ¥è¯¢å°†è¿”å› CHaracter ç±»å‹çš„ hero æ—¶ï¼Œæˆ‘ä»¬åªèƒ½æŸ¥è¯¢ Character ä¸­å­˜åœ¨çš„å­—æ®µã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åƒæŸ¥è¯¢ R2-D2 ä¸­ä¸»è¦åŠŸèƒ½ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># INVALID: primaryFunction does not exist on Character</span><br><span class="line">query DriodFieldsOnCaracter &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  name</span><br><span class="line">    primaryFunction</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¸ªæŸ¥è¯¢æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸º primaryFunction ä¸æ˜¯ Character ä¸­çš„å­—æ®µã€‚æˆ‘ä»¬æƒ³è¦ä¸€ç§æ–¹å¼æ¥è¡¨ç¤ºæˆ‘ä»¬å¸Œæœ›æŸ¥è¯¢ primaryFunction å¦‚æœ Character æ˜¯ Droidï¼Œå¦åˆ™å¿½å¾‹è¿™ä¸ªå­—æ®µã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æˆ‘ä¹‹å‰ä»‹ç»çš„ fragments æ¥åšè¿™ä»¶äº‹ã€‚é€šè¿‡è®¾ç½®ä¸€ä¸ªè¢«å®šä¹‰åœ¨ Droid çš„ fragment å¹¶åŒ…å«å®ƒï¼Œæˆ‘ä»¬ç¡®ä¿æˆ‘ä»¬ä»…æŸ¥è¯¢ primaryFunction è¢«å®šä¹‰çš„éƒ¨åˆ†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">query DriodFieldInFragment &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  name</span><br><span class="line">    ...DriodFields</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">fragment DriodFields on Driod &#123;</span><br><span class="line">primaryFunction</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæŸ¥è¯¢æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯å®ƒæœ‰ç‚¹å†—é•¿ã€‚å½“æˆ‘ä»¬å¤šæ¬¡ä½¿ç”¨æ—¶ï¼Œå‘½åç‰‡æ®µæ‰æ˜¯æœ‰ä»·å€¼çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åªç”¨äº†ä¸€æ¬¡ã€‚<br>ç›¸æ¯”ä¸å‘½åä¸€ä¸ªç‰‡æ®µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªè¡Œå†…ç‰‡æ®µï¼›è¿™ä»ç„¶å…è®¸æˆ‘ä»¬è¡¨ç¤ºæˆ‘ä»¬æ­£åœ¨æŸ¥è¯¢çš„ç±»å‹ï¼Œä½†æ˜¯ä¸ç”¨å‘½åä¸€ä¸ªåˆ†å¼€çš„ç‰‡æ®µã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query DriodFieldsInINLineFragment &#123;</span><br><span class="line">hero &#123;</span><br><span class="line">  name</span><br><span class="line">    ...on Driod &#123;</span><br><span class="line">    primaryFucntion</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä»…ä»…æ˜¯è§¦åŠåˆ°äº†æ ¡éªŒç³»ç»Ÿçš„è¡¨é¢ï¼›é‚£é‡Œæœ‰è®¸å¤šæ ¡éªŒè§„åˆ™æ¥ç¡®ä¿ GraphQL æŸ¥è¯¢åœ¨è¯­ä¹‰ä¸Šæ˜¯æœ‰æ„ä¹‰çš„ã€‚è¯¥è§„èŒƒä»‹ç»äº†æ›´å¤šçš„å…³äºæ ¡éªŒä¸»é¢˜çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶ä¸”<a href="https://github.com/graphql/graphql-js/blob/master/src/validation" target="_blank" rel="noopener">validation</a> ç›®å½•åŒ…å«äº†ä»£ç å®ç°ä¸€ä¸ª GraphQL æ ¡éªŒå™¨çš„å…¼å®¹è§„èŒƒã€‚</p><h3 id="è‡ªæˆ‘æ£€æŸ¥"><a href="#è‡ªæˆ‘æ£€æŸ¥" class="headerlink" title="è‡ªæˆ‘æ£€æŸ¥"></a><a name="1yg4bi"></a>è‡ªæˆ‘æ£€æŸ¥</h3><p>å‘ GraphQL  æ¶æ„è¯¢é—®æœ‰å…³äºå®ƒæ”¯æŒçš„æŸ¥è¯¢ä¿¡æ¯é€šå¸¸æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚GraphQL å…è®¸æˆ‘ä»¬é€šè¿‡è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿè¿™æ ·åšã€‚</p><p>åœ¨æˆ‘ä»¬çš„æ˜Ÿæˆ˜ä¾‹å­ä¸­ï¼Œ<a href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsIntrospection-test.js" target="_blank" rel="noopener">starWarsIntrospectionTests.js</a> æ–‡ä»¶åŒ…å«äº†ä¸€äº›è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿçš„ç¤ºèŒƒæŸ¥è¯¢ï¼Œå¹¶ä¸”è¿™æ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œæ¥ç»ƒä¹ å‚è€ƒå®ç°è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿçš„æµ‹è¯•æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬è®¾è®¡æ¥ç±»å‹ç³»ç»Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“å¯ç”¨çš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ²¡æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥è¯¢é—® GraphQL ï¼Œé€šè¿‡æŸ¥è¯¢ __schema å­—æ®µï¼ˆæ€»æ˜¯å¯ä»¥æŸ¥è¯¢çš„æ ¹æ•°æ®ç±»å‹ï¼‰ã€‚è®©æˆ‘ä»¬ç°åœ¨å¼€å§‹è¿™æ ·åšå¹¶ä¸”è¯¢é—®ä»€ä¹ˆç±»å‹æ˜¯æœ‰æ•ˆçš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">query IntrospectionTypeQuery &#123;</span><br><span class="line">__schema &#123;</span><br><span class="line">  types &#123;</span><br><span class="line">    name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"__schema"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"types"</span>: [</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Query"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Character"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Human"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"String"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Episode"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Droid"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"__Schema"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"__Type"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"__TypeKind"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Boolean"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"__Field"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"__InputValue"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"__EnumValue"</span></span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"__Directive"</span></span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å“‡å“¦ï¼Œé‚£æ˜¯å¾ˆå¤šæ•°æ®ç±»å‹ã€‚ä»–ä»¬æ˜¯ä»€ä¹ˆï¼Ÿè®©æˆ‘å¯¹ä»–ä»¬è¿›è¡Œåˆ†ç»„ï¼š</p><ul><li><p><strong>Query, Character, Human, Episode, Droid</strong> - è¿™äº›åœ¨æˆ‘ä»¬ç±»å‹ç³»ç»Ÿä¸­å®šä¹‰çš„ã€‚</p></li><li><p><strong>String, Boolean</strong> - è¿™äº›æ˜¯ç±»å‹ç³»ç»Ÿæä¾›çš„æ ‡å‡†ç±»å‹ã€‚</p></li><li><strong>Schema, </strong>Type, <strong>Field, </strong>InputValue, <strong>EnumValue,</strong>Directive - è¿™äº›éƒ½æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´ï¼Œè¡¨ç¤ºä»–ä»¬æ˜¯è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</li></ul><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°è¯•å¹¶ä¸”æ‰¾å‡ºä¸€ä¸ªå¼€å§‹æœ‰æ•ˆæŸ¥è¯¢çš„éƒ¨åˆ†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">query InstrospectionQueryTypeQuery &#123;</span><br><span class="line">__schema &#123;</span><br><span class="line">  queryType &#123;</span><br><span class="line">    name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¾—åˆ°çš„ç»“æœæ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"__schema"</span>:&#123;</span><br><span class="line">  <span class="attr">"queryType"</span>:&#123;</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"Query"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œä¸”é‚£ä¸ªæ˜¯ç¬¦åˆæˆ‘ä»¬åœ¨ç±»å‹ç³»ç»Ÿæ‰€ä»‹ç»çš„ï¼šQuery ç±»å‹æ˜¯æˆ‘ä»¬å¼€å§‹çš„åœ°æ–¹ã€‚æ³¨æ„è¿™é‡Œçš„å‘½åæ˜¯æŒ‰ç…§æƒ¯ä¾‹çš„ã€‚æˆ‘ä»¬å¯ä»¥å‘½åæˆ‘ä»¬çš„<code>Query</code>ç±»å‹ å¦åˆ™ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®šå®ƒï¼Œå®ƒä»ç„¶ä¼šåœ¨è¿™é‡Œè¿”å› ä½œä¸ºæŸ¥è¯¢çš„èµ·å§‹ç±»å‹ã€‚ä½†æ˜¯å‘½åä¸º<code>Query</code>æ˜¯æœ‰ç”¨çš„ æƒ¯ä¾‹ã€‚</p><p>æ£€æŸ¥ä¸€ä¸ªå…·ä½“çš„ç±»å‹é€šå¸¸æ˜¯æœ‰ç”¨çš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ Droid ç±»å‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query InstrospectionDroidTypeQuery &#123;</span><br><span class="line">__type(name:&quot;Droid&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼šå¾—åˆ°ç»“æœï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"type"</span>:&#123;</span><br><span class="line">  <span class="attr">"name"</span>:<span class="string">"Droid"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬å‘äº†è§£æ›´å¤šå…³äº Droid ã€‚ä¾‹å¦‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£è¿˜æ˜¯å¯¹è±¡ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query IntrospectionDroidKindQuery &#123;</span><br><span class="line">__tyoe(name:&quot;Doid&quot;) &#123;</span><br><span class="line">  name,</span><br><span class="line">    kind</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"__type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Droid"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"kind"</span>: <span class="string">"OBJECT"</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>kind è¿”å›ä¸€ä¸ª __TypeKind ï¼Œå…¶ä¸­ä¸€ä¸ªå€¼æ˜¯ OBJECTã€‚å¦‚æœæˆ‘ä»¬æŸ¥è¯¢ Character å‘¢ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query InstrospectionCharacterKindQuery &#123;</span><br><span class="line">__type(name:&quot;Character&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">    kind</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"__type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Character"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"kind"</span>: <span class="string">"INTERFACE"</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°å®ƒæ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡çŸ¥é“ä»€ä¹ˆå­—æ®µæ˜¯å¯ç”¨çš„å¾ˆæœ‰ç”¨ï¼Œæ‰€ä»¥å…³äº Droid è¯¢é—®è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">query InstrospectionDroidFiedldsQuery &#123;</span><br><span class="line">__type(name:&quot;Droid&quot;) &#123;</span><br><span class="line">  name</span><br><span class="line">    fields &#123;</span><br><span class="line">    name</span><br><span class="line">      type &#123;</span><br><span class="line">      name</span><br><span class="line">        kind</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"__type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Droid"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"fields"</span>: [</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"id"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"NON_NULL"</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"name"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="string">"String"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"SCALAR"</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"friends"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"LIST"</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"appearsIn"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"LIST"</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"primaryFunction"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="string">"String"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"SCALAR"</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒä»¬æ˜¯æˆ‘ä»¬å®šä¹‰åœ¨ Droid ä¸Šé¢çš„å­—æ®µã€‚</p><p>id åœ¨è¿™é‡Œçœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼Œå®ƒæ²¡æœ‰è¯¥ç±»å‹çš„åç§°ã€‚é‚£æ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§<br>ä¸º NON_NULL çš„åŒ…è£…ç±»å‹ã€‚å¦‚æœæˆ‘ä»¬æŸ¥è¯¢è¯¥å­—æ®µç±»å‹çš„ ofTypeï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ° String ç±»å‹ï¼Œå‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸²ã€‚</p><p>åŒæ ·ï¼Œfriends å’Œ appearsIn éƒ½æ²¡æœ‰ nameï¼Œå› ä¸ºå®ƒä»¬æ˜¯ LIST çš„åŒ…è£…ç±»å‹ã€‚æˆ‘ä»¬åœ¨è¿™äº›ç±»å‹ä¸­æŸ¥è¯¢ ofTypeï¼Œå‘Šè¯‰æˆ‘ä»¬è¿™äº›æ˜¯ä»€ä¹ˆåˆ—è¡¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">query IntrospectionDroidWrappedFieldsQuery &#123;</span><br><span class="line"></span><br><span class="line">  __type(name: &quot;Droid&quot;) &#123;</span><br><span class="line"></span><br><span class="line">    name</span><br><span class="line"></span><br><span class="line">    fields &#123;</span><br><span class="line"></span><br><span class="line">      name</span><br><span class="line"></span><br><span class="line">      type &#123;</span><br><span class="line"></span><br><span class="line">        name</span><br><span class="line"></span><br><span class="line">        kind</span><br><span class="line"></span><br><span class="line">        ofType &#123;</span><br><span class="line"></span><br><span class="line">          name</span><br><span class="line"></span><br><span class="line">          kind</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"__type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Droid"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"fields"</span>: [</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"id"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"NON_NULL"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"ofType"</span>: &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"String"</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">"kind"</span>: <span class="string">"SCALAR"</span></span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"name"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="string">"String"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"SCALAR"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"ofType"</span>: <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"friends"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"LIST"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"ofType"</span>: &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Character"</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">"kind"</span>: <span class="string">"INTERFACE"</span></span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"appearsIn"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"LIST"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"ofType"</span>: &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Episode"</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">"kind"</span>: <span class="string">"ENUM"</span></span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"primaryFunction"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">"name"</span>: <span class="string">"String"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"kind"</span>: <span class="string">"SCALAR"</span>,</span><br><span class="line"></span><br><span class="line">          <span class="attr">"ofType"</span>: <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªè‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿçš„å·¥å…·ç‰¹æ€§ç»“æŸå°¤å…¶æœ‰ç”¨ï¼›è®©æˆ‘ä»¬æŸ¥è¯¢æ–‡æ¡£ç³»ç»Ÿã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">query IntrospectionDroidDescriptionQuery &#123;</span><br><span class="line"></span><br><span class="line">  __type(name: &quot;Droid&quot;) &#123;</span><br><span class="line"></span><br><span class="line">    name</span><br><span class="line"></span><br><span class="line">    description</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äº§å‡ºæ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">"__type"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Droid"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"description"</span>: <span class="string">"A mechanical creature in the Star Wars universe."</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿæ¥è®¿é—®ç±»å‹ç³»ç»Ÿçš„æ–‡æ¡£ï¼Œå¹¶ä¸”å¯ä»¥åˆ›å»ºæµè§ˆå™¨æ–‡æ¡£æˆ–è€…å¯Œåº”ç”¨ IDE å·¥å…·ã€‚</p><p>è¿™ä¹Ÿåªæ˜¯è§¦åŠåˆ°æ¥è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿçš„è¡¨é¢ï¼›æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢æšä¸¾å€¼ï¼Œç±»å‹å®ç°çš„æ¥å£ç­‰å¾…ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥æ£€æŸ¥è‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿæœ¬çœã€‚åœ¨ Introspection éƒ¨åˆ†å¯ä»¥çœ‹åˆ°ç›¸å…³ä¸»é¢˜çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œå¹¶ä¸” <a href="https://github.com/graphql/graphql-js/blob/master/src/type/introspection.js" target="_blank" rel="noopener">introspection</a> æ–‡ä»¶åŒ…å«äº†è‡ªæˆ‘æ£€æŸ¥ç³»ç»ŸæŸ¥è¯¢çš„å…¼å®¹è§„èŒƒä»£ç å®ç°ã€‚</p><h3 id="å…¶å®ƒå†…å®¹"><a href="#å…¶å®ƒå†…å®¹" class="headerlink" title="å…¶å®ƒå†…å®¹"></a><a name="e8pyxk"></a>å…¶å®ƒå†…å®¹</h3><p>è¿™ä¸ªè‡ªè¿°æ–‡ä»¶ä»‹ç»äº†æœ‰å…³äºç±»å‹ç³»ç»Ÿï¼ŒæŸ¥è¯¢æ‰§è¡Œï¼Œæ ¡éªŒå’Œè‡ªæˆ‘æ£€æŸ¥ç³»ç»Ÿçš„å‚è€ƒå®ç°ã€‚<a href="https://github.com/graphql/graphql-js/" target="_blank" rel="noopener">GraphQL.js</a> å’Œè§„èŒƒä¸­è¿˜æœ‰æ›´å¤šä¿¡æ¯ï¼ŒåŒ…å«äº†æ‰§è¡ŒæŸ¥è¯¢ï¼Œå“åº”æ ¼å¼åŒ–ï¼Œè§£é‡Šç±»å‹ç³»ç»Ÿå¦‚ä½•æ˜ å°„åˆ°åº•å±‚å®ç°ï¼ŒGraphQL å“åº”æ ¼å¼åŒ–å’Œ GraphQL çš„è¯­æ³•æè¿°å’Œå®ç°ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://timgsa.baidu.com/timg?image&amp;amp;quality=80&amp;amp;size=b9999_10000&amp;amp;sec=1550915827036&amp;amp;di=915d3dbc377cb034b3658fb54a0d0439&amp;amp;imgtype=0&amp;amp;src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20180726%2F6e30a4612eb54d3b8b255777463ffd18.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¿»è¯‘è®¡åˆ’" scheme="http://yoursite.com/categories/%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92/"/>
    
    
      <category term="GraphQl" scheme="http://yoursite.com/tags/GraphQl/"/>
    
  </entry>
  
  <entry>
    <title>Vueé˜²å‘æŒ‡å—</title>
    <link href="http://yoursite.com/2019/02/03/Vue%E9%98%B2%E5%9D%91%E6%8C%87%E5%8D%97/"/>
    <id>http://yoursite.com/2019/02/03/Vueé˜²å‘æŒ‡å—/</id>
    <published>2019-02-03T00:56:52.000Z</published>
    <updated>2019-03-31T13:00:51.160Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.pexels.com/photos/169573/pexels-photo-169573.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" alt=""><br><a id="more"></a><br><a name="75c4d379"></a></p><h3 id="å¯¹è±¡å±æ€§æ·»åŠ ä¸åˆ é™¤"><a href="#å¯¹è±¡å±æ€§æ·»åŠ ä¸åˆ é™¤" class="headerlink" title="å¯¹è±¡å±æ€§æ·»åŠ ä¸åˆ é™¤"></a>å¯¹è±¡å±æ€§æ·»åŠ ä¸åˆ é™¤</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">data() &#123; </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    a</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm.b = <span class="string">"xxxx"</span> <span class="comment">//éå“åº”</span></span><br><span class="line">vm.a = <span class="string">"xxx"</span> <span class="comment">//å“åº”</span></span><br><span class="line"></span><br><span class="line">vm.$set(<span class="string">'b'</span>,<span class="string">"xxxx"</span>)<span class="comment">//å“åº”</span></span><br></pre></td></tr></table></figure><p>Vue ä¸èƒ½æ£€æµ‹ä»¥ä¸Šå±æ€§æ·»åŠ æˆ–åˆ é™¤çš„å˜åŒ–ï¼Œå¿…é¡»ä½¿ç”¨ Vue.set æˆ–è€… vm.$set è®¾ç½®å±æ€§</p><p><a name="df352415"></a></p><h3 id="æ•°ç»„æ›´æ–°æ£€æµ‹"><a href="#æ•°ç»„æ›´æ–°æ£€æµ‹" class="headerlink" title="æ•°ç»„æ›´æ–°æ£€æµ‹"></a>æ•°ç»„æ›´æ–°æ£€æµ‹</h3><p>Vue æ— æ³•æ£€æµ‹åˆ°ä»¥ä¸‹æ›´æ–°ï¼š</p><ul><li>å•ç‹¬è®¾ç½®æ•°æ®ä¸­æŸä¸€é¡¹å…ƒç´ </li><li>å˜æ›´æ•°æ®é•¿åº¦</li></ul><p>æ›¿ä»£çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ vm.$set æ–¹æ³•,åˆ é™¤æ•°æ®æŸä¸€é¡¹ä½¿ç”¨ splice æ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    items:[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm.$set(vm.items,index,item)</span><br><span class="line">vm.items.splice(newLength)</span><br><span class="line">vm.items.splice(itemIndex,<span class="number">1</span>)</span><br><span class="line">vm.items.push(item)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><a name="aab349d2"></a></p><h3 id="å˜é‡å‘½å"><a href="#å˜é‡å‘½å" class="headerlink" title="å˜é‡å‘½å"></a>å˜é‡å‘½å</h3><p>ä»¥â€_â€,â€$â€ä¸ºå¼€å¤´å‘½åçš„å˜é‡ä¸ä¼šè¢« Vue ä»£ç†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  template:<span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">&lt;span&gt;&#123;&#123;_a&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;span&gt;&#123;&#123;$b&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>,</span><br><span class="line">data() &#123;</span><br><span class="line">  _a:<span class="number">1</span>,</span><br><span class="line">     $b:<span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm._a = <span class="number">3</span> <span class="comment">//ä¸ä¼šå“åº”</span></span><br><span class="line">vm.$b = <span class="number">4</span> <span class="comment">//ä¸ä¼šå“åº”</span></span><br></pre></td></tr></table></figure><p><a name="edfbb65b"></a></p><h3 id="äº‹ä»¶ç»‘å®š"><a href="#äº‹ä»¶ç»‘å®š" class="headerlink" title="äº‹ä»¶ç»‘å®š"></a>äº‹ä»¶ç»‘å®š</h3><p>åœ¨è‡ªå®šä¹‰ Vue ç»„ä»¶ä¸Šç»‘å®šåŸç”Ÿäº‹ä»¶éœ€è¦åŠ  .native ä¿®é¥°ç¬¦</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-component</span> @<span class="attr">click.native</span>=<span class="string">"handleClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a name="fec3d6e4"></a></p><h3 id="å®šæ—¶å™¨"><a href="#å®šæ—¶å™¨" class="headerlink" title="å®šæ—¶å™¨"></a>å®šæ—¶å™¨</h3><p>ç»„ä»¶å†…éƒ¨åˆ›å»ºçš„å®šæ—¶å™¨è¦åŠæ—¶é”€æ¯ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;,<span class="number">10000</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestory() &#123;</span><br><span class="line">  clearInterval(<span class="keyword">this</span>.timer)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><a name="232b0de8"></a></p><h3 id="domæ“ä½œ"><a href="#domæ“ä½œ" class="headerlink" title="domæ“ä½œ"></a>domæ“ä½œ</h3><p>éœ€è¦åœ¨domæ“ä½œä¹‹åæ‰§è¡Œçš„æ“ä½œè¦æ”¾åˆ°$nexTickä¸­æ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">mounted() &#123;</span><br><span class="line">  <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">///.......</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.pexels.com/photos/169573/pexels-photo-169573.jpeg?auto=compress&amp;amp;cs=tinysrgb&amp;amp;dpr=2&amp;amp;h=650&amp;amp;w=940&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Vue" scheme="http://yoursite.com/categories/Vue/"/>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Reactæ ‘ç»„ä»¶å¼€å‘</title>
    <link href="http://yoursite.com/2019/01/18/react-ztree/"/>
    <id>http://yoursite.com/2019/01/18/react-ztree/</id>
    <published>2019-01-18T15:37:11.000Z</published>
    <updated>2019-03-31T13:01:06.357Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.unsplash.com/photo-1482062364825-616fd23b8fc1?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=800&amp;q=60" alt=""><br><a id="more"></a></p><h2 id="å¼€å‘ç›®çš„"><a href="#å¼€å‘ç›®çš„" class="headerlink" title="å¼€å‘ç›®çš„"></a>å¼€å‘ç›®çš„</h2><p>é¡¹ç›®ä¸­ç»å¸¸ä¼šç”¨åˆ°æ ‘å½¢æ§ä»¶ï¼Œè€Œä¸”æ•°æ®é‡è¾ƒå¤§ï¼Œé€šå¸¸ä¼šè¾¾åˆ°ä¸Šä¸‡çš„æ•°æ®é‡ï¼Œä¹‹å‰ç”¨çš„jQuery ztree å¯ä»¥å¾ˆå¥½çš„æ»¡è¶³ä»¥ä¸Šè¦æ±‚ï¼Œè€Œè‡ªå·±ç›®å‰ä¹Ÿæ²¡æœ‰èƒ½åŠ›é€ ä¸€ä¸ªæ»¡è¶³è¿™æ ·è¦æ±‚çš„è½®å­ï¼Œæ‰€ä»¥è¿˜æ˜¯å»¶ç”¨ä¹‹å‰çš„ztreeï¼Œç„¶ååœ¨å…¶ä¹‹ä¸Šå°è£…æˆreact componentå½¢å¼ã€‚</p><h2 id="å¼€å‘è¿‡ç¨‹"><a href="#å¼€å‘è¿‡ç¨‹" class="headerlink" title="å¼€å‘è¿‡ç¨‹"></a>å¼€å‘è¿‡ç¨‹</h2><p>é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®ç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨webpack umdæ‰“åŒ…æ–¹å¼ï¼Œä½¿å…¶å¯ä»¥ç”¨äºamdï¼Œcmdå’Œå…¨å±€å¼•ç”¨.<br>é¡¹ç›®ç›®å½•æ˜¯è¿™æ ·æ»´~<br><img src="//img.mukewang.com/5b0ea3570001898603500512.png" alt="å›¾ç‰‡æè¿°"></p><p>src ä¸­ztree-for-react.js æ˜¯æºç ï¼Œç»è¿‡webpackç¼–è¯‘æ‰“åŒ…åçš„æ–‡ä»¶ä¼šä¿å­˜åˆ°libç›®å½•ä¸­</p><p>webpack é…ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="//img.mukewang.com/5b0eb2800001a0d110580861.png" alt="å›¾ç‰‡æè¿°"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™æ ¸å¿ƒä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React,&#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span>;   <span class="comment">//åŠ è½½jQuery</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'ztree'</span>;  <span class="comment">//åŠ è½½ztree</span></span><br><span class="line"><span class="keyword">let</span> ztreeIndex=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ReactZtree</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    <span class="keyword">this</span>.renderZtreeDom();</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidUpdate()&#123;</span><br><span class="line">    <span class="keyword">this</span>.renderZtreeDom();</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount()&#123;</span><br><span class="line">    <span class="keyword">this</span>.ztreeObj.destory();</span><br><span class="line">  &#125;</span><br><span class="line">  renderZtreeDom()&#123;</span><br><span class="line">    <span class="keyword">let</span> ztreeObj = <span class="keyword">this</span>.ztreeObj=$.fn.zTree.init(<span class="keyword">this</span>.getTreeDom(),<span class="keyword">this</span>.getTreeSetting(),<span class="keyword">this</span>.props.nodes);</span><br><span class="line">    <span class="keyword">return</span> ztreeObj;</span><br><span class="line">  &#125;</span><br><span class="line">  getTreeDom()&#123;</span><br><span class="line">    <span class="keyword">return</span> $(<span class="keyword">this</span>.refs.ztree);</span><br><span class="line">  &#125;</span><br><span class="line">  getTreeSetting()&#123;</span><br><span class="line">    <span class="keyword">let</span> props=<span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      treeId:props.treeId,</span><br><span class="line">      treeObj:props.treeObj,</span><br><span class="line">      <span class="keyword">async</span>:props.async,</span><br><span class="line">      callback:props.events,</span><br><span class="line">      check:props.check,</span><br><span class="line">      data:props.data,</span><br><span class="line">      edit:props.edit,</span><br><span class="line">      view:props.view</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  getTreeObj()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.ztreeObj;</span><br><span class="line">  &#125;</span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"ztree"</span> ref=<span class="string">"ztree"</span> id=&#123;<span class="string">`ztree_<span class="subst">$&#123;ztreeIndex++&#125;</span>`</span>&#125;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨componentDidMount é’©å­å‡½æ•°ä¸­åˆå§‹åŒ–ztreeï¼Œåˆ©ç”¨getTreeSettingæ–¹æ³•å†™å…¥ztreeçš„é…ç½®ï¼Œå°†ztreeçš„é…ç½®è½¬æ¢ä¸ºReactç»„ä»¶çš„propsï¼Œå½“æ ‘èŠ‚ç‚¹æˆ–è€…é…ç½®æ›´æ–°æ—¶æˆ‘ä»¬è°ƒç”¨ztree distroyæ–¹æ³•é”€æ¯ztreeå¯¹è±¡å¹¶ä¸”é‡æ–°åˆå§‹åŒ–ztreeï¼Œè¿™æ ·å°±è¾¾åˆ°äº†å½“å¤–éƒ¨propså±æ€§æ”¹å˜æ˜¯ztreeå¯ä»¥è‡ªåŠ¨åˆ·æ–°çš„æ•ˆæœ,è¿™æ ·ä¸€ä¸ªztreeç»„ä»¶å°±å¤§åŠŸå‘Šæˆå•¦~</p><p>æœ€åé™„ä¸Šè¿™ä¸ªé¡¹ç›®çš„<a href="https://github.com/arixse/ztree-for-react" target="_blank" rel="noopener">githubåœ°å€</a>,å–œæ¬¢çš„ç«¥é‹å¯ä»¥staræˆ–è€…forkï¼Œä¹Ÿéå¸¸æ¬¢è¿æissuesæ¥å¸®å¿™è¿›ä¸€æ­¥æ”¹è¿›å’Œå®Œå–„è¿™ä¸ªç»„ä»¶ã€‚ç›®å‰npmåŒ…ä¹Ÿå·²ç»å‘å¸ƒï¼Œæœ‰éœ€è¦çš„åŒå­¦å¯ä»¥ä½¿ç”¨npmå®‰è£…:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ztree-for-react</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://images.unsplash.com/photo-1482062364825-616fd23b8fc1?ixlib=rb-1.2.1&amp;amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;amp;auto=format&amp;amp;fit=crop&amp;amp;w=800&amp;amp;q=60&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="React" scheme="http://yoursite.com/categories/React/"/>
    
    
      <category term="React" scheme="http://yoursite.com/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºD3.jsçš„åŠ›å¯¼å‘å›¾å¼€å‘å®è·µ</title>
    <link href="http://yoursite.com/2019/01/18/d3-test/"/>
    <id>http://yoursite.com/2019/01/18/d3-test/</id>
    <published>2019-01-18T15:04:19.000Z</published>
    <updated>2019-02-18T15:17:43.678Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://d3js.org.cn/home.png" alt=""><br><a id="more"></a></p><h1 id="D3åˆä½“éªŒ"><a href="#D3åˆä½“éªŒ" class="headerlink" title="D3åˆä½“éªŒ"></a>D3åˆä½“éªŒ</h1><p>è¯´åˆ°å‰ç«¯æ•°æ®å¯è§†åŒ–ï¼Œå°±ä¸å¾—ä¸æåˆ°é¼é¼å¤§åçš„d3.jsã€‚ä¹‹å‰å› ä¸ºå…¬å¸ä¸€ç›´éƒ½åœ¨ç”¨echarts,æ‰€ä»¥å¯¹d3äº†è§£çš„ä¸å¤šã€‚å¹¸å¥½å‰å‡ ä¸ªæ˜ŸæœŸæœ‰ä¸ªé¡¹ç›®è¦å®ç°ä¸€ä¸ªäººç‰©å…³ç³»çš„åŠ›å¯¼å‘å›¾ï¼Œå¹¶ä¸”äººç‰©å›¾ç‰‡è¦å®ç°åœ†å½¢ã€‚ç»è¿‡åœ¨ç½‘ä¸ŠæŸ¥æ‰¾èµ„æ–™åå‘ç°echartså¹¶æ²¡æœ‰è¿™æ ·çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å°±æƒ³åˆ°äº†ç”¨d3æ¥å®ç°ï¼Œæœ€ç»ˆå®ç°çš„æ•ˆæœå¤§ä½“æ˜¯è¿™æ ·æ»´~<br><img src="https://cdn.nlark.com/yuque/0/2019/png/149846/1547784052478-e1036227-99b9-458d-8090-41473f20e267.png#align=left&amp;display=inline&amp;height=642&amp;linkTarget=_blank&amp;name=image.png&amp;originHeight=642&amp;originWidth=769&amp;size=120895&amp;width=769" alt="image.png"><br>è¯´è¯´å¤§ä½“çš„å®ç°æ€è·¯ï¼š</p><h3 id="1-æ„å»ºåŠ›å¯¼å‘å›¾"><a href="#1-æ„å»ºåŠ›å¯¼å‘å›¾" class="headerlink" title="1.æ„å»ºåŠ›å¯¼å‘å›¾"></a>1.æ„å»ºåŠ›å¯¼å‘å›¾</h3><p><em>ç›®å‰æˆ‘ç”¨çš„d3ç‰ˆæœ¬æ˜¯v5.7.0</em><br>ç›´æ¥ä¸Šä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width = <span class="number">1170</span>,</span><br><span class="line">height = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">var</span> imgSize = <span class="number">60</span>;</span><br><span class="line"><span class="keyword">var</span> svg = d3</span><br><span class="line">.select(<span class="string">"body"</span>)</span><br><span class="line">.append(<span class="string">"svg"</span>)</span><br><span class="line">.attr(<span class="string">"width"</span>, width)</span><br><span class="line">.attr(<span class="string">"height"</span>, height);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> simulation = d3</span><br><span class="line">.forceSimulation()</span><br><span class="line">.alpha(<span class="number">0.2</span>)</span><br><span class="line">.force(</span><br><span class="line"><span class="string">"link"</span>,</span><br><span class="line">d3.forceLink().id(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> d.id;</span><br><span class="line">&#125;)</span><br><span class="line">)</span><br><span class="line">.force(</span><br><span class="line"><span class="string">"charge"</span>,</span><br><span class="line">d3</span><br><span class="line">.forceManyBody()</span><br><span class="line">.distanceMin(<span class="number">200</span>)</span><br><span class="line">.strength(<span class="number">-250</span>)</span><br><span class="line">)</span><br><span class="line">.force(<span class="string">"center"</span>, d3.forceCenter(width / <span class="number">2</span>, height / <span class="number">2</span>))</span><br></pre></td></tr></table></figure></p><p>é¦–å…ˆæˆ‘ä»¬å»ç”Ÿæˆä¸€ä¸ªsvgèŠ‚ç‚¹ï¼Œåˆ©ç”¨d3åŸºæœ¬çš„apiå°±å¯ä»¥å®ç°ï¼Œç„¶åæ ¹æ®å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼Œæˆ‘ä»¬è¦ç”Ÿæˆä¸€ä¸ªsimulationï¼Œæˆ‘ç§°å®ƒä¸ºæ¨¡æ‹Ÿå™¨ï¼Œè¿™ä¸ªæ˜¯æœ€ä¸»è¦çš„ï¼Œæˆ‘ä»¬åˆ©ç”¨d3.forceSimulationè¿™ä¸ªæ–¹æ³•ç”Ÿæˆäº†ä¸€ä¸ªåŠ›å¯¼å‘å›¾çš„æ¨¡æ‹Ÿå™¨ï¼Œè¿™ä¸ªç›¸å½“äºæ˜¯ä¸€ä¸ªåŠ›å¯¼å‘å›¾çš„æ¡†æ¶ï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ¡†æ¶ä¸Šé¢æ·»åŠ æˆ‘ä»¬éœ€è¦çš„èŠ‚ç‚¹å’Œè¿çº¿</p><h3 id="2-åˆ›å»ºèŠ‚ç‚¹"><a href="#2-åˆ›å»ºèŠ‚ç‚¹" class="headerlink" title="2. åˆ›å»ºèŠ‚ç‚¹"></a>2. åˆ›å»ºèŠ‚ç‚¹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">svg.append(<span class="string">"defs"</span>)</span><br><span class="line">.selectAll(<span class="string">"pattern"</span>)</span><br><span class="line">.data(graph.nodes)</span><br><span class="line">.enter()</span><br><span class="line">.append(<span class="string">"pattern"</span>)</span><br><span class="line">.attr(<span class="string">"patternUnits"</span>, <span class="string">"objectBoundingBox"</span>)</span><br><span class="line">.attr(<span class="string">"patternContentUnits"</span>, <span class="string">"userSpaceOnUse"</span>)</span><br><span class="line">.attr(<span class="string">"id"</span>, d =&gt; d.id)</span><br><span class="line">.attr(<span class="string">"width"</span>, <span class="number">1.0</span>)</span><br><span class="line">.attr(<span class="string">"height"</span>, <span class="number">1.0</span>)</span><br><span class="line">.append(<span class="string">"image"</span>)</span><br><span class="line">.attr(<span class="string">"width"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.main) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">178</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> imgSize;</span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"height"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.main) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">178</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> imgSize;</span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"xlink:href"</span>, d =&gt; d.image)</span><br><span class="line">.attr(<span class="string">"x"</span>, <span class="number">0</span>)</span><br><span class="line">.attr(<span class="string">"y"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.main) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>d3é€‰æ‹©å™¨çš„ç”¨æ³•å’ŒjQueryé€‰æ‹©å™¨ç”¨æ³•ç±»ä¼¼ï¼Œå¦‚æœæ²¡æœ‰æ¥è§¦è¿‡å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ç›¸å…³æ–‡æ¡£ï¼Œä¸‹é¢è¯´ä¸‹enterå’Œexitçš„ç”¨æ³•</p><h4 id="enter"><a href="#enter" class="headerlink" title="enter()"></a>enter()</h4><p>è¿”å›æ•°ç»„æ•°æ®ç›¸æ¯”å¯¹åº”èŠ‚ç‚¹æ•°æ®å¤šä½™å‡ºçš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d3.selectAll(<span class="string">'line'</span>)</span><br><span class="line">.data(data)</span><br><span class="line">.append(<span class="string">'line'</span>)</span><br><span class="line">.attr(<span class="string">'stroke'</span>,<span class="string">'red'</span>)</span><br></pre></td></tr></table></figure><p>selectAllé€‰ä¸­å½“å‰æ–‡æ¡£ä¸­æ‰€æœ‰lineèŠ‚ç‚¹ï¼Œå¦‚æœlineèŠ‚ç‚¹çš„ä¸ªæ•°ä¸ºn,dataæ•°ç»„é•¿åº¦ä¸ºmï¼Œåˆ™enteré€‰ä¸­çš„æ•°æ®ä¸ºn-mé•¿åº¦çš„dataé›†åˆï¼Œä»¥ä¸Šä»£ç ä¼šå°†å°‘çš„é‚£éƒ¨åˆ†lineèŠ‚ç‚¹ä¸Šå»ã€‚</p><h4 id="exit"><a href="#exit" class="headerlink" title="exit()"></a>exit()</h4><p>è¿”å›é€‰ä¸­èŠ‚ç‚¹æ¯”æ•°æ®é•¿åº¦å¤šçš„é‚£éƒ¨åˆ†èŠ‚ç‚¹é›†åˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d3.select(<span class="string">'text'</span>)</span><br><span class="line">.data(data) <span class="comment">//data.length==n</span></span><br><span class="line">.exit() </span><br><span class="line">.remove()</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç æ‰§è¡Œåä¼šå°†å¤šä½™çš„textèŠ‚ç‚¹åˆ é™¤</p><h3 id="3-åˆ›å»ºè¿çº¿å’Œæ–‡å­—"><a href="#3-åˆ›å»ºè¿çº¿å’Œæ–‡å­—" class="headerlink" title="3. åˆ›å»ºè¿çº¿å’Œæ–‡å­—"></a>3. åˆ›å»ºè¿çº¿å’Œæ–‡å­—</h3><p>è¿çº¿ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> link = svg</span><br><span class="line">.append(<span class="string">"g"</span>)</span><br><span class="line">.attr(<span class="string">"class"</span>, <span class="string">"links"</span>)</span><br><span class="line">.selectAll(<span class="string">"line"</span>)</span><br><span class="line">.data(graph.links)</span><br><span class="line">.enter()</span><br><span class="line">.append(<span class="string">"line"</span>)</span><br><span class="line">.attr(<span class="string">"stroke"</span>, <span class="string">"#00a0e9"</span>);</span><br></pre></td></tr></table></figure></p><p>æ–‡å­—ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> linkText = svg</span><br><span class="line">.append(<span class="string">"g"</span>)</span><br><span class="line">.selectAll(<span class="string">"circle"</span>)</span><br><span class="line">.data(graph.nodes.filter(<span class="function"><span class="params">item</span> =&gt;</span> !item.empty))</span><br><span class="line">.enter()</span><br><span class="line">.append(<span class="string">"text"</span>)</span><br><span class="line">.text(<span class="function"><span class="params">d</span> =&gt;</span> d.id);</span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºè¿çº¿å’Œæ˜¾ç¤ºæ–‡å­—å’Œåˆ›å»ºèŠ‚ç‚¹çš„é€»è¾‘åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯é€‰ä¸­çš„æ•°æ®ä¸åŒ</p><h3 id="4-è¿æ¥èŠ‚ç‚¹å’Œè¿çº¿"><a href="#4-è¿æ¥èŠ‚ç‚¹å’Œè¿çº¿" class="headerlink" title="4.è¿æ¥èŠ‚ç‚¹å’Œè¿çº¿"></a>4.è¿æ¥èŠ‚ç‚¹å’Œè¿çº¿</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">simulation</span><br><span class="line">.nodes(graph.nodes)</span><br><span class="line">.on(<span class="string">"tick"</span>, ticked)</span><br><span class="line">.force(<span class="string">"link"</span>)</span><br><span class="line">.links(graph.links);</span><br></pre></td></tr></table></figure><p>åœ¨èŠ‚ç‚¹å’Œè¿çº¿éƒ½å‡†å¤‡å¥½çš„å‰æä¸‹æˆ‘ä»¬å¯ä»¥å°†èŠ‚ç‚¹å’Œè¿çº¿å…³è”èµ·æ¥ï¼Œç”¨simulation.nodes å’Œsimulation.force(â€œlinkâ€).links()æ–¹æ³•ã€‚<br>åœ¨è¿™é‡Œè¦æä¸‹tickäº‹ä»¶ï¼ŒèŠ‚ç‚¹å’Œè¿çº¿æ¯æ¬¡æ›´æ–°éƒ½ä¼šè§¦å‘tickäº‹ä»¶ï¼Œå› æ­¤æˆ‘ä»¬è¦ç»™tickäº‹ä»¶å¢åŠ å›è°ƒå‡½æ•°ï¼Œæ¥æ›´æ–°èŠ‚ç‚¹å’Œè¿çº¿è¿˜æœ‰æ–‡å­—çš„ä½ç½®ã€‚<br>ä¸‹é¢æ˜¯tickedä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ticked</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">node.attr(<span class="string">"cx"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.main) &#123;</span><br><span class="line"><span class="keyword">return</span> width / <span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.x &lt;= imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> imgSize;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.x &gt;= width - imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> width - imgSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.x;</span><br><span class="line">&#125;).attr(<span class="string">"cy"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.main) &#123;</span><br><span class="line"><span class="keyword">return</span> height / <span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.y &lt;= imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> imgSize;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.y &gt;= height) &#123;</span><br><span class="line"><span class="keyword">return</span> height - imgSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.y;</span><br><span class="line">&#125;);</span><br><span class="line">link.attr(<span class="string">"x1"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.source.main) &#123;</span><br><span class="line"><span class="keyword">return</span> width / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.source.x;</span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"y1"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.source.main) &#123;</span><br><span class="line"><span class="keyword">return</span> height / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.source.y;</span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"x2"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.target.x &lt;= imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> imgSize;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.target.x &gt;= width - imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> width - imgSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.target.x;</span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"y2"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.target.y &lt;= imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> imgSize;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.target.y &gt;= height - imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> height - imgSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.target.y;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">linkText</span><br><span class="line">.attr(<span class="string">"x"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.main) &#123;</span><br><span class="line"><span class="keyword">return</span> width / <span class="number">2</span> - <span class="number">20</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.x &lt;= imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> imgSize - <span class="number">20</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.x &gt;= width - imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> width - imgSize - <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.x<span class="number">-20</span>;</span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"y"</span>, d =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (d.main) &#123;</span><br><span class="line"><span class="keyword">return</span> height / <span class="number">2</span> + <span class="number">110</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.y &lt;= imgSize) &#123;</span><br><span class="line"><span class="keyword">return</span> imgSize + <span class="number">50</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (d.y &gt;= height) &#123;</span><br><span class="line"><span class="keyword">return</span> height - imgSize +<span class="number">50</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d.y+<span class="number">50</span>;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘æ£€æµ‹äº†ä¸‹è¾¹ç•Œå€¼ï¼Œä¸ºäº†ä¸è®©èŠ‚ç‚¹å’Œè¿çº¿è¶…å‡ºè¾¹ç•Œï¼Œä½†æ˜¯ç°åœ¨ç”¨è¿™æ ·çš„æ–¹æ³•é‡ç½®èŠ‚ç‚¹å’Œè¿çº¿çš„ä½ç½®åœ¨æ‹–æ‹½çš„æ—¶å€™ä¼šéå¸¸ç”Ÿç¡¬ï¼Œåœ¨å¹¿æ³›æŸ¥äº†èµ„æ–™åè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ³•ï¼Œå¸Œæœ›æœ‰åŠæ³•çš„åŒå­¦å‘ŠçŸ¥~:)</p><h3 id="5-å®ç°æ‹–æ‹½"><a href="#5-å®ç°æ‹–æ‹½" class="headerlink" title="5. å®ç°æ‹–æ‹½"></a>5. å®ç°æ‹–æ‹½</h3><p>å®ç°æ‹–æ‹½éœ€è¦è°ƒç”¨d3.dragï¼Œè¿™é‡Œé‡‡ç”¨callæ–¹æ³•è°ƒç”¨dragæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">nodes.call(</span><br><span class="line">  d3.drag()</span><br><span class="line">  .on(<span class="string">"start"</span>,dragstarted)</span><br><span class="line">  .on(<span class="string">"drag"</span>,dragged)</span><br><span class="line">  .on(<span class="string">"end"</span>,dragended)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragstarted</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!d3.event.active) simulation.alphaTarget(<span class="number">0.3</span>).restart();</span><br><span class="line">d.fx = d.x;</span><br><span class="line">d.fy = d.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragged</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">d.fx = d3.event.x;</span><br><span class="line">d.fy = d3.event.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragended</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!d3.event.active) simulation.alphaTarget(<span class="number">0</span>);</span><br><span class="line">d.fx = <span class="literal">null</span>;</span><br><span class="line">d.fy = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç»‘å®šäº†æ‹–æ‹½çš„ä¸‰ä¸ªæ—¶é—´ï¼Œåˆ†åˆ«æ˜¯å¼€å§‹ï¼Œæ‹–æ‹½ä¸­å’Œæ‹–æ‹½ç»“æŸã€‚åœ¨ä¸‰ä¸ªäº‹ä»¶å›è°ƒä¸­å»æ›´æ–°èŠ‚ç‚¹ä½ç½®ã€‚</p><h3 id="6-åœ†å½¢å›¾ç‰‡"><a href="#6-åœ†å½¢å›¾ç‰‡" class="headerlink" title="6. åœ†å½¢å›¾ç‰‡"></a>6. åœ†å½¢å›¾ç‰‡</h3><p>ç”±äºåˆå§‹çŠ¶æ€ä¸‹nodesé‡‡ç”¨çš„å¹¶ä¸æ˜¯åœ†å½¢å›¾ç‰‡ï¼Œè¦å®ç°åœ†å½¢å›¾ç‰‡éœ€è¦å€ŸåŠ©äºsvgä¸­circleå’Œpatternæ ‡ç­¾ã€‚å…³äºè¿™æ–¹é¢æˆ‘æ˜¯å‚è€ƒçš„è¿™ç¯‡æ–‡ç« æ¥åšçš„ <a href="https://www.zhangxinxu.com/wordpress/2014/06/svg-canvas-image-border-radius/" target="_blank" rel="noopener">svgåœ†è§’</a>ã€‚<br>é¦–å…ˆå¯¹äºæ¯ä¸€ä¸ªnodeèŠ‚ç‚¹å¯¹åº”ç”Ÿæˆpatternæ ‡ç­¾ï¼Œç”¨gæ ‡ç­¾åšåˆ†ç»„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timestamp = <span class="built_in">Date</span>.now()</span><br><span class="line">svg.append(<span class="string">"defs"</span>)</span><br><span class="line">.data(data.graph)</span><br><span class="line">.append(<span class="string">"pattern"</span>)</span><br><span class="line">.attr(<span class="string">"patternUnits"</span>,<span class="string">"objectBoundingBox"</span>)</span><br><span class="line">.attr(<span class="string">"patternContentUnits"</span>,<span class="string">"userSpaceOnUse"</span>)</span><br><span class="line">.attr(<span class="string">"id"</span>,d=&gt;d.id+<span class="string">'_'</span>+ timestamp)</span><br><span class="line">.append(<span class="string">"image"</span>)</span><br><span class="line">.attr(<span class="string">"xlink:href"</span>,d=&gt;d.imageUrl)</span><br><span class="line">nodes.selectAll(<span class="string">"circle"</span>)</span><br><span class="line">.data(data.graph)</span><br><span class="line">.append(<span class="string">"circle"</span>)</span><br><span class="line">.attr(<span class="string">"fill"</span>,d=&gt;<span class="string">`url(#<span class="subst">$&#123;d.id&#125;</span>_<span class="subst">$&#123;timestamp&#125;</span>)`</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå…ˆç¼“å­˜ä¸€ä¸ªä¸€ä¸ªå½“å‰æ—¶é—´æˆ³å˜é‡ï¼Œæ–¹ä¾¿åé¢ä¸ºpatternæ ‡ç­¾ç”Ÿæˆå”¯ä¸€çš„idï¼Œç„¶ååœ¨svgä¸­æ·»åŠ ä¸€ä¸ªdefsæ ‡ç­¾ï¼Œdefsæ ‡ç­¾ç”¨æ³•å¯ä»¥å‚è€ƒç›¸å…³èµ„æ–™ï¼Œåœ¨è¿™é‡Œå°±ä¸å¤šè¯´å•¦ã€‚ç„¶ååœ¨defsä¸­æ·»åŠ å¤šä¸ªpatternï¼Œä¸ºæ¯ä¸€ä¸ªpatternç”Ÿæˆå”¯ä¸€çš„idï¼Œæ–¹ä¾¿åé¢circleæ ‡ç­¾å¼•ç”¨ã€‚ç”±äºéœ€æ±‚ä¸­æåˆ°ä¸»èŠ‚ç‚¹å’Œå…¶ä»–åˆ†æ”¯èŠ‚ç‚¹çš„å¤§å°ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œè®¾ç½®ä¸ºpatternè®¾ç½®äº†patternUnitså±æ€§,è¿™ä¸ªå±æ€§å¯ä»¥æ–¹ä¾¿ç”¨æˆ·å®šä¹‰patternå¤§å°ã€‚</p><h4 id="patternUnits"><a href="#patternUnits" class="headerlink" title="patternUnits"></a>patternUnits</h4><ol><li>objectBoundingBoxï¼šè®¾ç½®pattern å¤§å°ä¸ºç›¸å¯¹å€¼ï¼Œè®¾ç½®èŒƒå›´æ˜¯0~1</li><li>userSpaceOnUser: è®¾ç½®patternå¤§å°ä¸ºç»å¯¹å€¼<h4 id="patternContentUnits"><a href="#patternContentUnits" class="headerlink" title="patternContentUnits"></a>patternContentUnits</h4></li><li>objectBoundingBoxï¼šè®¾ç½®patternä¸­å†…å®¹å¤§å°ä¸ºç›¸å¯¹å€¼ï¼Œè®¾ç½®èŒƒå›´æ˜¯0~1</li><li>userSpaceOnUser: è®¾ç½®patternä¸­å†…å®¹å¤§å°ä¸ºç»å¯¹å€¼</li></ol><p>ç›¸å…³èµ„æ–™å¯ä»¥å‚è€ƒw3cplusä¸Šé¢ç›¸å…³æ–‡ç« ï¼š<br><a href="https://www.w3cplus.com/svg/svg-pattern-element.html" target="_blank" rel="noopener">https://www.w3cplus.com/svg/svg-pattern-element.html</a></p><p>è¯¥æ•ˆæœçš„ä¸»ä½“ å†…å®¹å°±è¿™ä¹ˆå¤šï¼Œè‡³äºå›¾ç‰‡åé¢è“è‰²å°ç‚¹çº¯ç²¹æ˜¯ä¸ºäº†è£…é¥°ç”¨ï¼Œåœ¨å®é™…ä¸­æ²¡æœ‰æ„ä¹‰ã€‚ç›¸å…³å®ç°æ€è·¯ä¸ºåœ¨æ¯ä¸ªå›¾ç‰‡èŠ‚ç‚¹åé¢æ·»åŠ ä¸‰ä¸ªå°èŠ‚ç‚¹æ•°æ®ï¼Œç„¶ååŠ ä¸Šå¯¹åº”çš„æ ‡å¿—ï¼Œåœ¨æ›´æ–°ä½ç½®ä¸è®¾ç½®æ ·å¼çš„æ—¶å€™ä¸å…¶ä»–èŠ‚ç‚¹åŒºåˆ«å¯¹å¾…ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setEmptyNodes</span>(<span class="params">data, num</span>) </span>&#123;</span><br><span class="line">data.nodes.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (!item.main) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">data.nodes.push(&#123;</span><br><span class="line">id: <span class="string">`<span class="subst">$&#123;item.id&#125;</span>_empty_<span class="subst">$&#123;i&#125;</span>`</span>,</span><br><span class="line">name: <span class="string">``</span>,</span><br><span class="line">empty: <span class="literal">true</span>,</span><br><span class="line">parentNode: item.id</span><br><span class="line">&#125;);</span><br><span class="line">data.links.push(&#123;</span><br><span class="line">source: item.id,</span><br><span class="line">target: <span class="string">`<span class="subst">$&#123;item.id&#125;</span>_empty_<span class="subst">$&#123;i&#125;</span>`</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ï¼Œä¸€ä¸ªç®€å•çš„åŠ›å¯¼å‘å›¾å°±å¤§åŠŸå‘Šæˆå•¦ã€‚</p><h3 id="7-æ„Ÿå—"><a href="#7-æ„Ÿå—" class="headerlink" title="7.æ„Ÿå—"></a>7.æ„Ÿå—</h3><p>d3ä¸æ„§æ˜¯å‰ç«¯æ•°æ®å¯è§†åŒ–æœ€æµè¡Œçš„æ¡†æ¶ï¼Œç”¨äº†ä¸€æ¬¡å°±æ„Ÿå—åˆ°äº†å®ƒæ— æ¯”å¼ºå¤§ã€‚æƒ³æ¯”echartsæ¥è¯´ï¼Œd3æ›´çµæ´»ï¼Œå¯ä»¥å®ç°æ›´åŠ ä¸°å¯Œçš„æ•ˆæœã€‚æœ€åé™„ä¸Šd3çš„å®˜ç½‘åœ°å€ <a href="https://d3js.org/" target="_blank" rel="noopener">https://d3js.org/</a>ã€‚å¸Œæœ›è¿˜æ²¡æœ‰ä½¿ç”¨è¿‡d3çš„å°ä¼™ä¼´ä»¬å¯ä»¥åœ¨ä»¥åçš„å·¥ä½œè¿‡ç¨‹ä¸­è¿ç”¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://d3js.org.cn/home.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="æ•°æ®å¯è§†åŒ–" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
    
      <category term="D3" scheme="http://yoursite.com/tags/D3/"/>
    
      <category term="æ•°æ®å¯è§†åŒ–" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
      <category term="å›¾è¡¨" scheme="http://yoursite.com/tags/%E5%9B%BE%E8%A1%A8/"/>
    
      <category term="chart" scheme="http://yoursite.com/tags/chart/"/>
    
  </entry>
  
</feed>
